(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"19aaf83769573194b7f8":function(t,e,n){"use strict";n.r(e);var r=n("8af190b70a6bc55c6f1b"),i=n.n(r),o=(n("8a2d1b95e05b6a321e74"),n("d7dd51e1bf6bfc2c9c3d")),a=n("a28fc3c963a1d4d1a2e5"),s=n("ab4cb61bcb2dc161defb"),u=n("31459fc8da67bf5b19f7"),c=n.n(u),f=n("74d43ba619aa28ff7a43"),l=n.n(f),h=n("e95a63b25fb92ed15721"),p=n("54f683fcda7806277002"),d="app/VideoPlayer/MOVIE_LOADED",v="app/VideoPlayer/LOAD_MOVIE",y="app/VideoPlayer/LOAD_MOVIE_ERROR",m=Object(p.fromJS)({loading:!1,error:!1,id:null,movie:null,movieLink:null});var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return t.set("loading",!0).set("error",!1).set("id",e.id);case y:return t.set("error",e.error).set("loading",!1);case d:return t.set("movie",e.movie).set("movieLink",e.movieLink).set("loading",!1).set("error",!1);default:return t}},b=n("d782b72bc5b680c7122c"),w=n("f363639bc5c3c97af546");function _(t,e){return{type:d,movie:t,movieLink:e}}var S=regeneratorRuntime.mark(T),E=regeneratorRuntime.mark(x);function T(t){var e,n,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(b.call)(w.a,"https://api.themoviedb.org/3/movie/".concat(t.id,"?api_key=a8ff50b145b3742d52ef2fc9ce52264f"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return e=i.sent,i.next=6,Object(b.call)(w.a,"https://api.themoviedb.org/3/movie/".concat(t.id,"/videos?api_key=a8ff50b145b3742d52ef2fc9ce52264f"),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return n=i.sent,r=n.results[0].key,i.next=10,Object(b.put)(_(e,"https://www.youtube.com/watch?v=".concat(r)));case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(0),i.next=16,Object(b.put)((o=i.t0,{type:y,error:o}));case 16:case"end":return i.stop()}var o},S,null,[[0,12]])}function x(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.takeLatest)(v,T);case 2:case"end":return t.stop()}},E)}var I,k=n("adc20f99e57c573c589c"),A=n("d95b0cf107403b178365"),M=function(t){return t.videoPlayer||m};function P(t){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e,n,r){I||(I="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=t&&t.defaultProps,o=arguments.length-3;if(e||0===o||(e={children:void 0}),1===o)e.children=r;else if(o>1){for(var a=new Array(o),s=0;s<o;s++)a[s]=arguments[s+3];e.children=a}if(e&&i)for(var u in i)void 0===e[u]&&(e[u]=i[u]);else e||(e=i||{});return{$$typeof:I,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return!e||"object"!==P(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=R("i",{className:"fa fa-arrow-left","aria-hidden":"true"}),L=R("video",{id:"video",poster:"//shaka-player-demo.appspot.com/assets/poster.jpg",controls:!0,"data-shaka-player-container":!0,"data-shaka-player-cast-receiver-id":"7B25EC44",autoPlay:!0,allow:"fullScreen",width:"1440",height:"444",track:"",crossOrigin:"anonymous",allowcrosssitecredentials:"true"},void 0,R("track",{label:"English",kind:"subtitles",srcLang:"eng",src:"https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_en.vtt",type:"text/vtt"}),R("track",{label:"French",kind:"subtitles",srcLang:"fr",src:"https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_fr.vtt",type:"text/vtt"}),R("track",{label:"Spanish",kind:"subtitles",srcLang:"es",src:"https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_es.vtt",type:"text/vtt"}),R("track",{label:"German",kind:"subtitles",srcLang:"de",src:"https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_de.vtt",type:"text/vtt"})),U=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=C(this,N(e).call(this)),window.muxjs=l.a,t}var n,r,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,i.a.PureComponent),n=e,(r=[{key:"componentDidMount",value:function(){var t=this.props.location.pathname.split("/");this.props.getMovieWithId(t[t.length-1]),c.a.polyfill.installAll(),c.a.Player.isBrowserSupported()?this.initPlayer():console.error("Browser not supported!")}},{key:"initPlayer",value:function(){var t=document.getElementById("video");t.setAttribute("crossorigin","anonymous");var e=new c.a.Player(t);e.resolution="1440X444",e.bandwidth="10285391",e.codecs="CODECS=avc1.4d4033",window.player=e,e.addEventListener("error",this.onErrorEvent),e.configure("streaming.alwaysStreamText",!0),e.configure({preferredTextLanguage:"fr"}),e.load("https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8").then(function(){t.textTracks[0].mode="showing",t.setAttribute("crossorigin","anonymous"),e.selectTextTrack(e.getTextTracks()[0]),console.log("The video has now been loaded!")}).catch(function(t){console.error("Error code",t.code,"object",t)})}},{key:"onErrorEvent",value:function(t){this.onError(t.detail)}},{key:"render",value:function(){return R("div",{},void 0,R("div",{className:"p-2"},void 0,R(h.Link,{className:"text-right float-left mr-3 mt-3",style:{fontSize:"20px"},to:"/"},void 0,j," Back to dashboard")),L)}}])&&O(n.prototype,r),o&&O(n,o),e}();var z=Object(a.b)({loading:Object(a.a)(M,function(t){return t.get("loading")}),error:Object(a.a)(M,function(t){return t.get("error")}),movie:Object(a.a)(M,function(t){return t.get("movie")}),movieLink:Object(a.a)(M,function(t){return t.get("movieLink")}),id:Object(a.a)(M,function(t){return t.get("id")})}),B=Object(o.connect)(z,function(t){return{getMovieWithId:function(e){return t(function(t){return{type:v,id:t}}(e))}}}),q=Object(A.a)({key:"videoPlayer",reducer:g}),K=Object(k.a)({key:"videoPlayer",saga:x});e.default=Object(s.compose)(q,K,B)(U)},"31459fc8da67bf5b19f7":function(t,e,n){(function(t){!function(){var n="undefined"!=typeof window?window:t,r={};for(var i in function(t,e){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i="undefined"!=typeof t&&t===this?this:"undefined"!=typeof e&&null!=e?e:this;function o(){o=function(){},i.Symbol||(i.Symbol=s)}var a,s=(a=0,function(t){return"jscomp_symbol_"+(t||"")+a++});function u(){o();var t=i.Symbol.iterator;t||(t=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&r(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return c(this)}}),u=function(){}}function c(t){var e=0;return f(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function f(t){return u(),(t={next:t})[i.Symbol.iterator]=function(){return this},t}function l(t){u();var e=t[Symbol.iterator];return e?e.call(t):c(t)}function h(t,e){if(e){for(var n=i,o=t.split("."),a=0;a<o.length-1;a++){var s=o[a];s in n||(n[s]={}),n=n[s]}(s=e(a=n[o=o[o.length-1]]))!=a&&null!=s&&r(n,o,{configurable:!0,writable:!0,value:s})}}function p(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise(function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())})}(t())}h("Promise",function(t){function e(t){this.b=0,this.g=void 0,this.a=[];var e=this.c();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;n.prototype.b=function(t){null==this.a&&(this.a=[],this.f()),this.a.push(t)},n.prototype.f=function(){var t=this;this.c(function(){t.h()})};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.g(t)}}}this.a=null},n.prototype.g=function(t){this.c(function(){throw t})},e.prototype.c=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.s),reject:t(this.f)}},e.prototype.s=function(t){if(t===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.v(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.f(t)}"function"==typeof e?this.C(e,t):this.h(t)},e.prototype.f=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.g=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.v=function(t){var e=this.c();t.Yb(e.resolve,e.reject)},e.prototype.C=function(t,e){var n=this.c();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.Yb(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Yb=function(t,e){function n(){switch(r.b){case 1:t(r.g);break;case 2:e(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=l(t),o=i.next();!o.done;o=i.next())r(o.value).Yb(e,n)})},e.all=function(t){var n=l(t),i=n.next();return i.done?r([]):new e(function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Yb(o(a.length-1),e),i=n.next()}while(!i.done)})},e}),h("Promise.prototype.finally",function(t){return t||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}});var d,v="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var y;t:{var m={};try{m.__proto__={ne:!0},y=m.ne;break t}catch(a){}y=!1}d=y?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var g=d;function b(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function w(t){if(t.g)throw new TypeError("Generator is already running");t.g=!0}function _(t,e){t.a={yd:e,Gd:!0},t.j=t.f||t.b}function S(t,e,n){return t.j=n,{value:e}}function E(t){t.j=0}function T(t,e,n){t.f=e,void 0!=n&&(t.b=n)}function x(t,e){t.f=0,t.b=e||0}function I(t,e){t.j=e,t.f=0}function k(t){t.f=0;var e=t.a.yd;return t.a=null,e}function A(t){t.i=[t.a],t.f=0,t.b=0}function M(t,e){var n=t.i.splice(0)[0];(n=t.a=t.a||n)?n.Gd?t.j=t.f||t.b:void 0!=n.A&&t.b<n.A?(t.j=n.A,t.a=null):t.j=t.b:t.j=e}function P(t){this.a=new b,this.b=t}function R(t,e,n,r){try{var i=e.call(t.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.a.g=!1,i;var o=i.value}catch(e){return t.a.c=null,_(t.a,e),O(t)}return t.a.c=null,r.call(t.a,o),O(t)}function O(t){for(;t.a.j;)try{var e=t.b(t.a);if(e)return t.a.g=!1,{value:e.value,done:!1}}catch(e){t.a.o=void 0,_(t.a,e)}if(t.a.g=!1,t.a.a){if(e=t.a.a,t.a.a=null,e.Gd)throw e.yd;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function C(t){this.next=function(e){return w(t.a),t.a.c?e=R(t,t.a.c.next,e,t.a.h):(t.a.h(e),e=O(t)),e},this.throw=function(e){return w(t.a),t.a.c?e=R(t,t.a.c.throw,e,t.a.h):(_(t.a,e),e=O(t)),e},this.return=function(e){return function(t,e){w(t.a);var n=t.a.c;return n?R(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),O(t))}(t,e)},u(),this[Symbol.iterator]=function(){return this}}function N(t,e){return C.prototype=t.prototype,new C(new P(e))}function D(t){if(!(t instanceof Array)){t=l(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e,n){t instanceof String&&(t=String(t));for(var r=t.length,i=0;i<r;i++){var o=t[i];if(e.call(n,o,i,t))return{Cd:i,ie:o}}return{Cd:-1,ie:void 0}}function U(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""}b.prototype.h=function(t){this.o=t},b.prototype.return=function(t){this.a={return:t},this.j=this.b},b.prototype.A=function(t){this.j=t},h("WeakMap",function(t){function e(t){if(this.a=(s+=Math.random()+1).toString(),t){o(),u(),t=l(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}function n(t){j(t,a)||r(t,a,{value:{}})}function i(t){var e=Object[t];e&&(Object[t]=function(t){return n(t),e(t)})}if(function(){if(!t||!Object.seal)return!1;try{var e=Object.seal({}),n=Object.seal({}),r=new t([[e,2],[n,3]]);return 2==r.get(e)&&3==r.get(n)&&(r.delete(e),r.set(n,4),!r.has(e)&&4==r.get(n))}catch(t){return!1}}())return t;var a="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return e.prototype.set=function(t,e){if(n(t),!j(t,a))throw Error("WeakMap key fail: "+t);return t[a][this.a]=e,this},e.prototype.get=function(t){return j(t,a)?t[a][this.a]:void 0},e.prototype.has=function(t){return j(t,a)&&j(t[a],this.a)},e.prototype.delete=function(t){return!(!j(t,a)||!j(t[a],this.a))&&delete t[a][this.a]},e}),h("Map",function(t){function e(){var t={};return t.Ca=t.next=t.head=t}function n(t,e){var n=t.a;return f(function(){if(n){for(;n.head!=t.a;)n=n.Ca;for(;n.next!=n.head;)return n=n.next,{done:!1,value:e(n)};n=null}return{done:!0,value:void 0}})}function r(t,e){var n=e&&typeof e;"object"==n||"function"==n?a.has(e)?n=a.get(e):(n=""+ ++s,a.set(e,n)):n="p_"+e;var r=t.b[n];if(r&&j(t.b,n))for(var i=0;i<r.length;i++){var o=r[i];if(e!==e&&o.key!==o.key||e===o.key)return{id:n,list:r,index:i,X:o}}return{id:n,list:r,index:-1,X:void 0}}function i(t){if(this.b={},this.a=e(),this.size=0,t){t=l(t);for(var n;!(n=t.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(l([[e,"s"]]));if("s"!=n.get(e)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==e&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(t){return!1}}())return t;o(),u();var a=new WeakMap;i.prototype.set=function(t,e){var n=r(this,t);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=e:(n.X={next:this.a,Ca:this.a.Ca,head:this.a,key:t,value:e},n.list.push(n.X),this.a.Ca.next=n.X,this.a.Ca=n.X,this.size++),this},i.prototype.delete=function(t){return!(!(t=r(this,t)).X||!t.list)&&(t.list.splice(t.index,1),t.list.length||delete this.b[t.id],t.X.Ca.next=t.X.next,t.X.next.Ca=t.X.Ca,t.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Ca=e(),this.size=0},i.prototype.has=function(t){return!!r(this,t).X},i.prototype.get=function(t){return(t=r(this,t).X)&&t.value},i.prototype.entries=function(){return n(this,function(t){return[t.key,t.value]})},i.prototype.keys=function(){return n(this,function(t){return t.key})},i.prototype.values=function(){return n(this,function(t){return t.value})},i.prototype.forEach=function(t,e){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,t.call(e,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),h("Set",function(t){function e(t){if(this.a=new Map,t){t=l(t);for(var e;!(e=t.next()).done;)this.add(e.value)}this.size=this.a.size}return function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(l([e]));if(!n.has(e)||1!=n.size||n.add(e)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==e&&i.value[1]==e&&(!(i=r.next()).done&&i.value[0]!=e&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(t){return!1}}()?t:(o(),u(),e.prototype.add=function(t){return this.a.set(t,t),this.size=this.a.size,this},e.prototype.delete=function(t){return t=this.a.delete(t),this.size=this.a.size,t},e.prototype.clear=function(){this.a.clear(),this.size=0},e.prototype.has=function(t){return this.a.has(t)},e.prototype.entries=function(){return this.a.entries()},e.prototype.values=function(){return this.a.values()},e.prototype.keys=e.prototype.values,e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,e){var n=this;this.a.forEach(function(r){return t.call(e,r,r,n)})},e)}),h("Array.prototype.findIndex",function(t){return t||function(t,e){return L(this,t,e).Cd}}),h("Array.prototype.keys",function(t){return t||function(){return function(t,e){u(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,function(t){return t})}}),h("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}}),h("Array.prototype.includes",function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=e||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===t||Object.is(o,t))return!0}return!1}}),h("String.prototype.includes",function(t){return t||function(t,e){return-1!==U(this,t,"includes").indexOf(t,e||0)}}),h("Array.from",function(t){return t||function(t,e,n){u(),e=null!=e?e:function(t){return t};var r=[],i=t[Symbol.iterator];if("function"==typeof i)for(t=i.call(t);!(i=t.next()).done;)r.push(e.call(n,i.value));else{i=t.length;for(var o=0;o<i;o++)r.push(e.call(n,t[o]))}return r}}),h("String.prototype.startsWith",function(t){return t||function(t,e){for(var n=U(this,t,"startsWith"),r=n.length,i=t.length,o=Math.max(0,Math.min(0|e,n.length)),a=0;a<i&&o<r;)if(n[o++]!=t[a++])return!1;return a>=i}}),h("Array.prototype.find",function(t){return t||function(t,e){return L(this,t,e).ie}});var z=this;function B(t,e){var n,r=t.split("."),i=z;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===e?i=i[n]?i[n]:i[n]={}:i[n]=e}function q(t,e){function n(){}n.prototype=e.prototype,t.ag=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.og=function(t,n,r){return e.prototype[n].apply(t,Array.prototype.slice.call(arguments,2))}}function K(t){this.c=Math.exp(Math.log(.5)/t),this.b=this.a=0}function F(t,e,n){var r=Math.pow(t.c,e);n=n*(1-r)+r*t.a,isNaN(n)||(t.a=n,t.b+=e)}function V(t){return t.a/(1-Math.pow(t.c,t.b))}function H(){this.b=new K(2),this.c=new K(5),this.a=0}function G(){}function W(){}function X(){}z.a=!0,H.prototype.getBandwidthEstimate=function(t){return 128e3>this.a?t:Math.min(V(this.b),V(this.c))},t.console&&t.console.log.bind&&(W=console.warn.bind(console),G=console.error.bind(console));var Y=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function $(t){var e;t instanceof $?(J(this,t.va),this.$a=t.$a,this.ra=t.ra,Q(this,t.xb),this.ia=t.ia,Z(this,t.a.clone()),this.Qa=t.Qa):t&&(e=String(t).match(Y))?(J(this,e[1]||"",!0),this.$a=tt(e[2]||""),this.ra=tt(e[3]||"",!0),Q(this,e[4]),this.ia=tt(e[5]||"",!0),Z(this,e[6]||"",!0),this.Qa=tt(e[7]||"")):this.a=new ut(null)}function J(t,e,n){t.va=n?tt(e,!0):e,t.va&&(t.va=t.va.replace(/:$/,""))}function Q(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.xb=e}else t.xb=null}function Z(t,e,n){e instanceof ut?t.a=e:(n||(e=et(e,at)),t.a=new ut(e))}function tt(t,e){return t?e?decodeURI(t):decodeURIComponent(t):""}function et(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nt),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nt(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(n=$.prototype).va="",n.$a="",n.ra="",n.xb=null,n.ia="",n.Qa="",n.toString=function(){var t=[],e=this.va;if(e&&t.push(et(e,rt,!0),":"),e=this.ra){t.push("//");var n=this.$a;n&&t.push(et(n,rt,!0),"@"),t.push(encodeURIComponent(e).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.xb)&&t.push(":",String(e))}return(e=this.ia)&&(this.ra&&"/"!=e.charAt(0)&&t.push("/"),t.push(et(e,"/"==e.charAt(0)?ot:it,!0))),(e=this.a.toString())&&t.push("?",e),(e=this.Qa)&&t.push("#",et(e,st)),t.join("")},n.resolve=function(t){var e=this.clone();"data"===e.va&&(e=new $);var n=!!t.va;n?J(e,t.va):n=!!t.$a,n?e.$a=t.$a:n=!!t.ra,n?e.ra=t.ra:n=null!=t.xb;var r=t.ia;if(n)Q(e,t.xb);else if(n=!!t.ia){if("/"!=r.charAt(0))if(this.ra&&!this.ia)r="/"+r;else{var i=e.ia.lastIndexOf("/");-1!=i&&(r=e.ia.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?e.ia=r:n=""!==t.a.toString(),n?Z(e,t.a.clone()):n=!!t.Qa,n&&(e.Qa=t.Qa),e},n.clone=function(){return new $(this)};var rt=/[#\/\?@]/g,it=/[#\?:]/g,ot=/[#\?]/g,at=/[#\?@]/g,st=/#/g;function ut(t){this.a=t||null}function ct(t){this.b=t,this.a=null}function ft(t){this.b=t,this.a=null}function lt(t,e){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==t.maxAttempts?n.maxAttempts:t.maxAttempts,this.f=null==t.baseDelay?n.baseDelay:t.baseDelay,this.h=null==t.fuzzFactor?n.fuzzFactor:t.fuzzFactor,this.g=null==t.backoffFactor?n.backoffFactor:t.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==e&&e)&&(this.a=1)}function ht(t){return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:if(t.a>=t.i){if(!t.c)return e.return(Promise.reject());t.a=1,t.b=t.f}return n=t.a,t.a++,0==n?e.return():(r=t.b*(1+(2*Math.random()-1)*t.h),S(e,new Promise(function(t){new ft(t).O(r/1e3)}),2));case 2:t.b*=t.g,E(e)}})})}function pt(t,e,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];this.severity=t,this.category=e,this.code=n,this.data=i,this.handled=!1}function dt(){var t,e,n=new Promise(function(n,r){t=n,e=r});return n.resolve=t,n.reject=e,n}function vt(t,e){this.promise=t,this.Jd=e,this.a=!1}function yt(t){return new vt(Promise.reject(t),function(){return Promise.resolve()})}function mt(){var t=Promise.reject(new pt(2,7,7001));return t.catch(function(){}),new vt(t,function(){return Promise.resolve()})}function gt(t){return new vt(Promise.resolve(t),function(){return Promise.resolve()})}function bt(t){return new vt(t,function(){return t.catch(function(){})})}function wt(t){return new vt(Promise.all(t.map(function(t){return t.promise})),function(){return Promise.all(t.map(function(t){return t.abort()}))})}function _t(t,e,n){try{var r=t(e);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){}).catch(function(){})})}catch(t){return n.reject(t),function(){return Promise.resolve()}}}function St(e,n){for(var r in n=void 0===n?{}:n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=t.performance&&t.performance.now?t.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Et(){this.a={}}function Tt(){this.Bc=new Et,this.Vb=this}function xt(t){var e=new Set;return function t(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(e.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;e.add(n);var i,o=r?[]:{};for(i in n)o[i]=t(n[i]);return r&&(o.length=n.length),o}}(t)}function It(t,e){return!("number"!==typeof t||"number"!==typeof e||!isNaN(t)||!isNaN(e))||t===e}function kt(t,e){var n=t.indexOf(e);-1<n&&t.splice(n,1)}function At(t,e,n){if(n||(n=It),t.length!=e.length)return!1;e=e.slice();for(var r={},i=(t=l(t)).next();!i.done;r={item:r.item},i=t.next()){if(r.item=i.value,-1==(i=e.findIndex(function(t){return function(e){return n(t.item,e)}}(r))))return!1;e[i]=e[e.length-1],e.pop()}return 0==e.length}function Mt(){this.a=[]}function Pt(t,e){t.a.push(e.finally(function(){kt(t.a,e)}))}function Rt(t){Tt.call(this),this.f=!1,this.g=new Mt,this.a=new Set,this.b=new Set,this.c=t||null}(n=ut.prototype).ha=null,n.$b=null,n.add=function(t,e){if(!this.ha&&(this.ha={},this.$b=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null;if(0<=i){var a=n[r].substring(0,i);o=n[r].substring(i+1)}else a=n[r];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(t)&&this.ha[t])||(this.ha[t]=n=[]),n.push(e),this.$b++,this},n.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var t,e=[];for(t in this.ha)for(var n=encodeURIComponent(t),r=this.ha[t],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),e.push(o)}return this.a=e.join("&")},n.clone=function(){var t=new ut;if(t.a=this.a,this.ha){var e,n={};for(e in this.ha)n[e]=this.ha[e].concat();t.ha=n,t.$b=this.$b}return t},ct.prototype.O=function(e){var n=this;this.stop();var r=!0,i=null;return this.a=function(){t.clearTimeout(i),r=!1},i=t.setTimeout(function(){r&&n.b()},1e3*e),this},ct.prototype.stop=function(){this.a&&(this.a(),this.a=null)},B("shaka.util.Timer",ft),ft.prototype.sc=function(){return this.stop(),this.b(),this},ft.prototype.tickNow=ft.prototype.sc,ft.prototype.O=function(t){var e=this;return this.stop(),this.a=new ct(function(){e.b()}).O(t),this},ft.prototype.tickAfter=ft.prototype.O,ft.prototype.La=function(t){var e=this;return this.stop(),this.a=new ct(function(){e.a.O(t),e.b()}).O(t),this},ft.prototype.tickEvery=ft.prototype.La,ft.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},ft.prototype.stop=ft.prototype.stop,B("shaka.util.Error",pt),pt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},pt.Severity={RECOVERABLE:1,CRITICAL:2},pt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},pt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},dt.prototype.resolve=function(){},dt.prototype.reject=function(){},B("shaka.util.AbortableOperation",vt),vt.failed=yt,vt.aborted=mt,vt.completed=gt,vt.notAbortable=bt,vt.prototype.abort=function(){return this.a=!0,this.Jd()},vt.prototype.abort=vt.prototype.abort,vt.all=wt,vt.prototype.finally=function(t){return this.promise.then(function(){return t(!0)},function(){return t(!1)}),this},vt.prototype.finally=vt.prototype.finally,vt.prototype.U=function(t,e){function n(){return i.reject(new pt(2,7,7001)),r.abort()}var r=this,i=new dt;return this.promise.then(function(e){r.a?i.reject(new pt(2,7,7001)):t?n=_t(t,e,i):i.resolve(e)},function(t){e?n=_t(e,t,i):i.reject(t)}),new vt(i,function(){return n()})},vt.prototype.chain=vt.prototype.U,St.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},St.prototype.stopImmediatePropagation=function(){this.a=!0},St.prototype.stopPropagation=function(){},(n=Et.prototype).push=function(t,e){this.a.hasOwnProperty(t)?this.a[t].push(e):this.a[t]=[e]},n.get=function(t){return(t=this.a[t])?t.slice():null},n.getAll=function(){var t,e=[];for(t in this.a)e.push.apply(e,this.a[t]);return e},n.remove=function(t,e){var n=this.a[t];if(n)for(var r=0;r<n.length;++r)n[r]==e&&(n.splice(r,1),--r)},n.forEach=function(t){for(var e in this.a)t(e,this.a[e])},Tt.prototype.addEventListener=function(t,e){this.Bc.push(t,e)},Tt.prototype.removeEventListener=function(t,e){this.Bc.remove(t,e)},Tt.prototype.dispatchEvent=function(t){for(var e=this.Bc.get(t.type)||[],n=0;n<e.length;++n){t.target=this.Vb,t.currentTarget=this.Vb;var r=e[n];try{r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(t){}if(t.a)break}return t.defaultPrevented},Mt.prototype.destroy=function(){var t=[];return this.a.forEach(function(e){e.promise.catch(function(){}),t.push(e.abort())}),this.a=[],Promise.all(t)},q(Rt,Tt),B("shaka.net.NetworkingEngine",Rt);var Ot={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};Rt.RequestType=Ot,Rt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Ct={};function Nt(t,e,n){n=n||3;var r=Ct[t];(!r||n>=r.priority)&&(Ct[t]={priority:n,zf:e})}function Dt(t,e){return{uris:t,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:e,licenseRequestType:null,sessionId:null}}function jt(){this.a=0}function Lt(t,e,n){vt.call(this,t,e),this.b=n}Rt.registerScheme=Nt,Rt.unregisterScheme=function(t){delete Ct[t]},Rt.prototype.Bf=function(t){this.a.add(t)},Rt.prototype.registerRequestFilter=Rt.prototype.Bf,Rt.prototype.cg=function(t){this.a.delete(t)},Rt.prototype.unregisterRequestFilter=Rt.prototype.cg,Rt.prototype.we=function(){this.a.clear()},Rt.prototype.clearAllRequestFilters=Rt.prototype.we,Rt.prototype.Cf=function(t){this.b.add(t)},Rt.prototype.registerResponseFilter=Rt.prototype.Cf,Rt.prototype.dg=function(t){this.b.delete(t)},Rt.prototype.unregisterResponseFilter=Rt.prototype.dg,Rt.prototype.xe=function(){this.b.clear()},Rt.prototype.clearAllResponseFilters=Rt.prototype.xe,Rt.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Rt.prototype.destroy=Rt.prototype.destroy,Rt.prototype.request=function(t,e){var n=this,r=new jt;if(this.f){var i=Promise.reject(new pt(2,7,7001));return i.catch(function(){}),new Lt(i,function(){return Promise.resolve()},r)}e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?xt(e.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},e.uris=xt(e.uris);var o=(i=function(t,e,n){for(var r=gt(void 0),i={},o=(t=l(t.a)).next();!o.done;i={fd:i.fd},o=t.next())i.fd=o.value,r=r.U(function(t){return function(){return t.fd(e,n)}}(i));return r.U(void 0,function(t){if(t&&7001==t.code)throw t;throw new pt(2,1,1006,t)})}(this,t,e)).U(function(){return function t(e,n,r,i,o,a,s){var u=new $(r.uris[o]),c=u.va,f=!1;c||(c=location.protocol,c=c.slice(0,-1),J(u,c),r.uris[o]=u.toString());var l=(c=Ct[c])?c.zf:null;if(!l)return yt(new pt(2,1,1e3,u));var h;return bt(ht(i)).U(function(){return e.f?mt():(h=Date.now(),l(r.uris[o],r,n,function(t,r,i){e.c&&1==n&&(e.c(t,r),f=!0,s.a=i)}))}).U(function(t){return void 0==t.timeMs&&(t.timeMs=Date.now()-h),{response:t,Ze:f}},function(u){if(u&&7001==u.code)throw u;if(e.f)return mt();if(u&&1==u.severity)return e.dispatchEvent(new St("retry",{error:u instanceof pt?u:null})),o=(o+1)%r.uris.length,t(e,n,r,i,o,u,s);throw u||a})}(n,t,e,new lt(e.retryParameters,!1),0,null,r)}),a=o.U(function(e){return function(t,e,n){for(var r=gt(void 0),i=(t=l(t.b)).next();!i.done;i=t.next())r=r.U(i.value.bind(null,e,n.response));return r.U(function(){return n},function(t){if(t&&7001==t.code)throw t;var e=2;throw t instanceof pt&&(e=t.severity),new pt(e,1,1007,t)})}(n,t,e)}),s=Date.now(),u=0;i.promise.then(function(){u=Date.now()-s},function(){});var c=0;return o.promise.then(function(){c=Date.now()},function(){}),i=new Lt((i=a.U(function(e){var r=Date.now()-c,i=e.response;return i.timeMs+=u,i.timeMs+=r,e.Ze||!n.c||i.fromCache||1!=t||n.c(i.timeMs,i.data.byteLength),i},function(t){throw t&&(t.severity=2),t})).promise,i.Jd,r),Pt(this.g,i),i},Rt.prototype.request=Rt.prototype.request,Rt.NumBytesRemainingClass=jt;var Ut=Lt;if(Ut.prototype=v(vt.prototype),Ut.prototype.constructor=Ut,g)g(Ut,vt);else for(var zt in vt)if("prototype"!=zt)if(Object.defineProperties){var Bt=Object.getOwnPropertyDescriptor(vt,zt);Bt&&Object.defineProperty(Ut,zt,Bt)}else Ut[zt]=vt[zt];function qt(){}function Kt(){this.a=new Et}function Ft(t,e,n,r){this.target=t,this.type=e,this.listener=n,this.a=function(t,e){if(void 0==e)return!1;if("boolean"==typeof e)return e;var n=new Set(["passive","capture"]);return Object.keys(e).filter(function(t){return!n.has(t)}),function(t){var e=Vt;if(void 0==e){e=!1;try{var n={},r={get:function(){return e=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},t.addEventListener("test",r,n),t.removeEventListener("test",r,n)}catch(t){e=!1}Vt=e}return e||!1}(t)?e:e.capture||!1}(t,r),this.target.addEventListener(e,n,this.a)}Ut.ag=vt.prototype,Rt.PendingRequest=Lt,Lt.all=wt,Lt.notAbortable=bt,Lt.completed=gt,Lt.aborted=mt,Lt.failed=yt,B("shaka.util.IReleasable",qt),qt.prototype.release=function(){},B("shaka.util.EventManager",Kt),Kt.prototype.release=function(){this.Ya(),this.a=null},Kt.prototype.release=Kt.prototype.release,Kt.prototype.w=function(t,e,n,r){this.a&&(t=new Ft(t,e,n,r),this.a.push(e,t))},Kt.prototype.listen=Kt.prototype.w,Kt.prototype.da=function(t,e,n,r){var i=this;this.w(t,e,function r(o){i.ea(t,e,r),n(o)},r)},Kt.prototype.listenOnce=Kt.prototype.da,Kt.prototype.ea=function(t,e,n){if(this.a)for(var r=this.a.get(e)||[],i=(r=l(r)).next();!i.done;i=r.next())(i=i.value).target!=t||n!=i.listener&&n||(i.ea(),this.a.remove(e,i))},Kt.prototype.unlisten=Kt.prototype.ea,Kt.prototype.Ya=function(){if(this.a){for(var t=this.a.getAll(),e=(t=l(t)).next();!e.done;e=t.next())e.value.ea();this.a.a={}}},Kt.prototype.removeAll=Kt.prototype.Ya,Ft.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Ft.prototype.unlisten=Ft.prototype.ea;var Vt=void 0;function Ht(t){if(t=new Uint8Array(t),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(0,!0)+4!=t.byteLength)throw new RangeError("Malformed FairPlay init data");return new $(t=oe(t.subarray(4),!0)).ra}function Gt(t,e,n){function r(t){new DataView(o.buffer).setUint32(a,t.byteLength,!0),a+=4,i(t)}function i(t){o.set(t,a),a+=t.byteLength}if(!n||!n.byteLength)throw new pt(2,6,6015);e="string"==typeof e?new Uint8Array(ue(e,!0)):new Uint8Array(e);var o=new Uint8Array(8+t.byteLength+e.byteLength+n.byteLength),a=0;return i(new Uint8Array(t)),r(e),r(new Uint8Array(n)),o}function Wt(t,e){for(var n=l(t),r=n.next();!r.done;r=n.next())if(!e(r.value))return!1;return!0}function Xt(t){var e=new Map;return Object.keys(t).forEach(function(n){e.set(n,t[n])}),e}function Yt(t){var e={};return t.forEach(function(t,n){e[n]=t}),e}function $t(t,e){var n=t;return e&&(n+='; codecs="'+e+'"'),n}function Jt(t){var e=(t=t.split("."))[0];return t.pop(),[e,t.join(".")]}B("shaka.util.FairPlayUtils.defaultGetContentId",Ht),B("shaka.util.FairPlayUtils.initDataTransform",Gt);var Qt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Zt(){return!(!t.MediaSource||!MediaSource.isTypeSupported)}function te(t){return""!=(re||(ne||(ne=new ft(function(){re=null})),(re=document.querySelector("video")||document.querySelector("audio"))||(re=document.createElement("video")),ne.O(1),re)).canPlayType(t)}function ee(t){return(navigator.userAgent||"").includes(t)}var ne=null,re=null;function ie(t){if(!t)return"";239==(t=new Uint8Array(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),t=ce(t),t=escape(t);try{return decodeURIComponent(t)}catch(t){throw new pt(2,2,2004)}}function oe(t,e,n){if(!t)return"";if(!n&&0!=t.byteLength%2)throw new pt(2,2,2004);if(t instanceof ArrayBuffer)var r=t;else(n=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),r=n.buffer;t=Math.floor(t.byteLength/2),n=new Uint16Array(t),r=new DataView(r);for(var i=0;i<t;i++)n[i]=r.getUint16(2*i,e);return ce(n)}function ae(t){var e=new Uint8Array(t);if(239==e[0]&&187==e[1]&&191==e[2])return ie(e);if(254==e[0]&&255==e[1])return oe(e.subarray(2),!1);if(255==e[0]&&254==e[1])return oe(e.subarray(2),!0);var n=function(t,e){return t.byteLength<=e||32<=t[e]&&126>=t[e]}.bind(null,e);if(0==e[0]&&0==e[2])return oe(t,!1);if(0==e[1]&&0==e[3])return oe(t,!0);if(n(0)&&n(1)&&n(2)&&n(3))return ie(t);throw new pt(2,2,2003)}function se(t){t=encodeURIComponent(t),t=unescape(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;++n)e[n]=t.charCodeAt(n);return e.buffer}function ue(t,e){for(var n=new Uint8Array(2*t.length),r=new DataView(n.buffer),i=0;i<t.length;++i)r.setUint16(2*i,t.charCodeAt(i),e);return n.buffer}function ce(t){if(!fe)for(var e=function(t){try{return D(new Uint8Array(t)),!0}catch(t){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(e(n.size)){fe=function(t){return function(e){for(var n="",r=0;r<e.length;r+=t.size)n+=String.fromCharCode.apply(String,D(e.subarray(r,r+t.size)));return n}}(n);break}return fe(t)}B("shaka.util.StringUtils.fromUTF8",ie),B("shaka.util.StringUtils.fromUTF16",oe),B("shaka.util.StringUtils.fromBytesAutoDetect",ae),B("shaka.util.StringUtils.toUTF8",se),B("shaka.util.StringUtils.toUTF16",ue);var fe=null;function le(e,n){var r=ce(e);return n=void 0==n||n,r=t.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}function he(e){e=t.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}function pe(e){for(var n=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)n[r/2]=t.parseInt(e.substr(r,2),16);return n}function de(t){for(var e="",n=0;n<t.length;++n){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function ve(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!=e[n])return!1;return!0}function ye(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(var r=n=0;r<e.length;++r)n+=e[r].length;n=new Uint8Array(n);for(var i=r=0;i<e.length;++i)n.set(e[i],r),r+=e[i].length;return n}function me(t){var e=this;this.C=t,this.v=new Set,this.m=this.h=null,this.P=!1,this.a=null,this.i=new Kt,this.b=new Map,this.s=[],this.l=new dt,this.c=null,this.g=function(n){e.l.reject(n),t.onError(n)},this.na=new Map,this.T=new Map,this.M=new ft(function(){return function(t){var e=t.na,n=t.T;n.clear(),e.forEach(function(t,e){return n.set(e,t)}),(e=Array.from(n.values())).length&&e.every(function(t){return"expired"==t})&&t.g(new pt(2,6,6014)),t.C.kc(Yt(n))}(e)}),this.f=!1,this.$=new dt,this.D=!1,this.G=[],this.ma=!1,this.W=new ft(function(){var t;(t=e).b.forEach(function(e,n){var r=e.Yc,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(t.C.onExpirationUpdated(n.sessionId,i),e.Yc=i)})}).La(1),this.l.catch(function(){})}function ge(t,e,n){return t.s=n,t.D=0<n.length,be(t,e)}function be(e,n){var r=n.some(function(t){return 0<t.drmInfos.length});if(!r){var i=Xt(e.c.servers);!function(t,e){var n=[];e.forEach(function(t,e){n.push({keySystem:e,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var r=l(t),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}(n,i)}var o=function(e){if(0==(e=Xt(e.c.clearKeys)).size)return null;var n=[],r=[];e.forEach(function(t,e){var i=pe(e),o=pe(t);i={kty:"oct",kid:le(i,!1),k:le(o,!1)},n.push(i),r.push(i.kid)}),e=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(se(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+t.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}(e);if(o){var a=l(n);for(i=a.next();!i.done;i=a.next())i.value.drmInfos=[o]}for(i=(o=l(n)).next();!i.done;i=o.next())for(a=(i=l(i.value.drmInfos)).next();!a.done;a=i.next())Ce(a.value,Xt(e.c.servers),Xt(e.c.advanced||{}));return(i=function(t,e){for(var n=new Set,r=l(e),i=r.next();!i.done;i=r.next()){var o=l(i.value.drmInfos);for(i=o.next();!i.done;i=o.next())n.add(i.value)}for(r=l(n),i=r.next();!i.done;i=r.next())Ce(i.value,Xt(t.c.servers),Xt(t.c.advanced||{}));o=t.D?"required":"optional";var a=t.D?["persistent-license"]:["temporary"];for(r=new Map,n=l(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:o,sessionTypes:a,label:i.keySystem,drmInfos:[]});for(n=l(e),i=n.next();!i.done;i=n.next()){i=i.value,o=i.audio,a=i.video;var s=o?$t(o.mimeType,o.codecs):"",u=a?$t(a.mimeType,a.codecs):"",c=l(i.drmInfos);for(i=c.next();!i.done;i=c.next()){i=i.value;var f=r.get(i.keySystem);f.drmInfos.push(i),i.distinctiveIdentifierRequired&&(f.distinctiveIdentifier="required"),i.persistentStateRequired&&(f.persistentState="required"),o&&f.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),a&&f.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}(e,n)).size?(i=xe(e,i),r?i:i.catch(function(){})):(e.P=!0,Promise.resolve())}function we(t){return p(function e(){var n;return N(e,function(e){switch(e.j){case 1:if(!(t.h&&t.a&&t.a.serverCertificate&&t.a.serverCertificate.length)){e.A(0);break}return T(e,3),S(e,t.h.setServerCertificate(t.a.serverCertificate),5);case 5:I(e,0);break;case 3:return n=k(e),e.return(Promise.reject(new pt(2,6,6004,n.message)))}})})}function _e(t){var e=t.a?t.a.initData:[];return e.forEach(function(e){return ke(t,e.initDataType,e.initData)}),t.s.forEach(function(e){return Ie(t,e)}),e.length||t.s.length||t.l.resolve(),t.l}function Se(t,e,n){for(var r=t.b.values(),i=(r=l(r)).next();!i.done;i=r.next())if(ve(n,i.value.initData))return;ke(t,e,n)}function Ee(t,e){return!!ee("Edge/")||t.v.has(e)}function Te(t){return t=function(t,e){for(var n=[],r=l(t),i=r.next();!i.done;i=r.next())n.push(e(i.value));return n}(t=t.b.keys(),function(t){return t.sessionId}),Array.from(t)}function xe(t,e){if(1==e.size&&e.has(""))return Promise.reject(new pt(2,6,6e3));for(var n=l(e.values()),r=n.next();!r.done;r=n.next())0==(r=r.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new dt;return[!0,!1].forEach(function(t){var n=this;e.forEach(function(e,r){e.drmInfos.some(function(t){return!!t.licenseServerUri})==t&&(i=i.catch(function(){if(!this.f)return navigator.requestMediaKeySystemAccess(r,[e])}.bind(n)))})}.bind(t)),i=(i=i.catch(function(){return Promise.reject(new pt(2,6,6001))})).then(function(t){if(this.f)return Promise.reject();this.v.clear();var n=t.getConfiguration(),r=n.videoCapabilities||[],i=l(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.v.add(n.value.contentType);for(n=(r=l(r)).next();!n.done;n=r.next())this.v.add(n.value.contentType);r=t.keySystem,i=[];var o=[],a=[],s=[];return function(t,e,n,r,i){t.forEach(function(t){if(e.includes(t.licenseServerUri)||e.push(t.licenseServerUri),t.serverCertificate&&(n.some(function(e){return ve(e,t.serverCertificate)})||n.push(t.serverCertificate)),t.initData&&t.initData.forEach(function(t){r.some(function(e){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&ve(e.initData,t.initData)})||r.push(t)}),t.keyIds)for(var o=0;o<t.keyIds.length;++o)i.includes(t.keyIds[o])||i.push(t.keyIds[o])})}((n=e.get(t.keySystem)).drmInfos,i,o,a,s),this.a={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:o[0],initData:a,keyIds:s},this.a.licenseServerUri?t.createMediaKeys():Promise.reject(new pt(2,6,6012,this.a.keySystem))}.bind(t)).then(function(t){if(this.f)return Promise.reject();this.h=t,this.P=!0}.bind(t)).catch(function(t){if(!this.f)return this.a=null,this.v.clear(),t instanceof pt?Promise.reject(t):Promise.reject(new pt(2,6,6002,t.message))}.bind(t)),n.reject(),i}function Ie(t,e){try{var n=t.h.createSession("persistent-license")}catch(e){var r=new pt(2,6,6005,e.message);return t.g(r),Promise.reject(r)}t.i.w(n,"message",t.Rd.bind(t)),t.i.w(n,"keystatuseschange",t.Pd.bind(t));var i={initData:null,loaded:!1,Yc:1/0,xa:null};return t.b.set(n,i),n.load(e).then(function(t){return this.f?Promise.reject():t?(i.loaded=!0,Oe(this)&&this.l.resolve(),n):(this.b.delete(n),void this.g(new pt(2,6,6013)))}.bind(t),function(t){this.f||(this.b.delete(n),this.g(new pt(2,6,6005,t.message)))}.bind(t))}function ke(t,e,n){try{var r=t.D?t.h.createSession("persistent-license"):t.h.createSession()}catch(e){return void t.g(new pt(2,6,6005,e.message))}t.i.w(r,"message",t.Rd.bind(t)),t.i.w(r,"keystatuseschange",t.Pd.bind(t)),t.b.set(r,{initData:n,loaded:!1,Yc:1/0,xa:null});try{if(t.c.initDataTransform)n=t.c.initDataTransform(n);else if(t.keySystem().startsWith("com.apple.fps")){var i=t.a.serverCertificate;n=Gt(n,Ht(n),i)}}catch(n){return e=n,n instanceof pt||(e=new pt(2,6,6016,n)),void t.g(e)}r.generateRequest(e,n.buffer).catch(function(e){if(!t.f){if(t.b.delete(r),e.errorCode&&e.errorCode.systemCode){var n=e.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}t.g(new pt(2,6,6006,e.message,e,n))}})}function Ae(t,e){var n=e.target,r=t.b.get(n),i=t.a.licenseServerUri,o=t.c.advanced[t.a.keySystem];"individualization-request"==e.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer),(i=Dt([i],t.c.retryParameters)).body=e.message,i.method="POST",i.licenseRequestType=e.messageType,i.sessionId=n.sessionId,"com.microsoft.playready"!=t.a.keySystem&&"com.chromecast.playready"!=t.a.keySystem||function(t){var e=oe(t.body,!0,!0);if(e.includes("PlayReadyKeyMessage")){for(var n=(e=(new DOMParser).parseFromString(e,"application/xml")).getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)t.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;t.body=he(e.querySelector("Challenge").textContent).buffer}else t.headers["Content-Type"]="text/xml; charset=utf-8"}(i),t.a.keySystem.startsWith("com.apple.fps")&&t.c.fairPlayTransform&&function(t){var e=new Uint8Array(t.body);e="spc="+le(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=se(e)}(i),t.C.rb.request(2,i).promise.then(function(t){return this.f?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.c.fairPlayTransform&&function(t){try{var e=ie(t.data)}catch(t){return}"<ckc>"===(e=e.trim()).substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6));try{e=JSON.parse(e).ckc}catch(t){}t.data=he(e).buffer}(t),n.update(t.data).then(function(){var t=this;this.C.onEvent(new St("drmsessionupdate")),r&&(r.xa&&r.xa.resolve(),new ft(function(){r.loaded=!0,Oe(t)&&t.l.resolve()}).O(De))}.bind(this)))}.bind(t),function(t){this.f||(t=new pt(2,6,6007,t),this.g(t),r&&r.xa&&r.xa.reject(t))}.bind(t)).catch(function(t){this.f||(t=new pt(2,6,6008,t.message),this.g(t),r&&r.xa&&r.xa.reject(t))}.bind(t))}function Me(){var t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],e=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],n=new Map;return t="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(t){return function(t){return p(function r(){var i,o,a;return N(r,function(r){switch(r.j){case 1:return T(r,2),S(r,navigator.requestMediaKeySystemAccess(t,e),4);case 4:return i=r.o,a=!!(o=i.getConfiguration().sessionTypes)&&o.includes("persistent-license"),ee("Tizen 3")&&(a=!1),n.set(t,{persistentState:a}),S(r,i.createMediaKeys(),5);case 5:I(r,0);break;case 2:k(r),n.set(t,null),E(r)}})})}(t)}),Promise.all(t).then(function(){return Yt(n)})}function Pe(t,e){var n=e.audio,r=e.video;if(n&&n.encrypted&&!Ee(t,$t(n.mimeType,n.codecs))||r&&r.encrypted&&!Ee(t,$t(r.mimeType,r.codecs)))return!1;var i=t.keySystem();return 0==e.drmInfos.length||e.drmInfos.some(function(t){return t.keySystem==i})}function Re(t,e){if(!t.length)return e;if(!e.length)return t;for(var n=[],r=0;r<t.length;r++)for(var i=0;i<e.length;i++)if(t[r].keySystem==e[i].keySystem){var o=t[r];i=e[i];var a=[];a=(a=a.concat(o.initData||[])).concat(i.initData||[]);var s=[];s=(s=s.concat(o.keyIds)).concat(i.keyIds),n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||i.persistentStateRequired,videoRobustness:o.videoRobustness||i.videoRobustness,audioRobustness:o.audioRobustness||i.audioRobustness,serverCertificate:o.serverCertificate||i.serverCertificate,initData:a,keyIds:s});break}return n}function Oe(t){return Wt(t=t.b.values(),function(t){return t.loaded})}function Ce(e,n,r){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(n.size&&(n=n.get(e.keySystem)||"",e.licenseServerUri=n),e.keyIds||(e.keyIds=[]),(r=r.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=r.persistentStateRequired),e.videoRobustness||(e.videoRobustness=r.videoRobustness),e.audioRobustness||(e.audioRobustness=r.audioRobustness),e.serverCertificate||(e.serverCertificate=r.serverCertificate)),t.cast&&t.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}B("shaka.util.Uint8ArrayUtils.toBase64",le),B("shaka.util.Uint8ArrayUtils.fromBase64",he),B("shaka.util.Uint8ArrayUtils.fromHex",pe),B("shaka.util.Uint8ArrayUtils.toHex",de),B("shaka.util.Uint8ArrayUtils.equal",ve),B("shaka.util.Uint8ArrayUtils.concat",ye),(n=me.prototype).destroy=function(){var t=this;return p(function e(){return N(e,function(e){switch(e.j){case 1:return t.f?S(e,t.$,0):(t.f=!0,S(e,function(t){return p(function e(){var n;return N(e,function(e){switch(e.j){case 1:return t.i.release(),t.i=null,t.l.reject(),t.W.stop(),t.W=null,t.M.stop(),t.M=null,n=Array.from(t.b.keys()),t.b.clear(),S(e,Promise.all(n.map(function(t){return Promise.resolve().then(function(){return p(function e(){return N(e,function(e){switch(e.j){case 1:return T(e,2),S(e,function(t){return p(function e(){var n;return N(e,function(e){switch(e.j){case 1:return n=new Promise(function(t){new ft(t).O(Ne)}),S(e,Promise.race([t.close().then(function(){return!0}),n.then(function(){return!1})]),2);case 2:E(e)}})})}(t),4);case 4:I(e,0);break;case 2:k(e),E(e)}})})})})),2);case 2:if(!t.m){e.A(3);break}return T(e,4),S(e,t.m.setMediaKeys(null),6);case 6:I(e,5);break;case 4:k(e);case 5:t.m=null;case 3:t.a=null,t.v.clear(),t.h=null,t.s=[],t.c=null,t.g=null,t.C=null,E(e)}})})}(t),4));case 4:t.$.resolve(),e.A(0)}})})},n.configure=function(t){this.c=t},n.Cb=function(t){var e=this;if(!this.h)return this.i.da(t,"encrypted",function(){e.g(new pt(2,6,6010))}),Promise.resolve();this.m=t,this.i.da(this.m,"play",function(){for(var t=0;t<e.G.length;t++)Ae(e,e.G[t]);e.ma=!0,e.G=[]}),t=(t=this.m.setMediaKeys(this.h)).catch(function(t){return Promise.reject(new pt(2,6,6003,t.message))});var n=we(this);return Promise.all([t,n]).then(function(){if(e.f)return Promise.reject();_e(e),e.a.initData.length||e.s.length||e.i.w(e.m,"encrypted",function(t){return Se(e,t.initDataType,new Uint8Array(t.initData))})}).catch(function(t){if(!e.f)return Promise.reject(t)})},n.keySystem=function(){return this.a?this.a.keySystem:""},n.dc=function(){for(var t=1/0,e=this.b.keys(),n=(e=l(e)).next();!n.done;n=e.next())n=n.value,isNaN(n.expiration)||(t=Math.min(t,n.expiration));return t},n.Rd=function(t){this.c.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ma?this.G.push(t):Ae(this,t)},n.Pd=function(t){t=t.target;var e=this.b.get(t),n=!1;t.keyStatuses.forEach(function(t,r){if("string"==typeof r){var i=r;r=t,t=i}if("com.microsoft.playready"==this.a.keySystem&&16==r.byteLength&&!ee("Tizen")){var o=(i=new DataView(r)).getUint32(0,!0),a=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,o,!1),i.setUint16(4,a,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(e.loaded=!0),"expired"==t&&(n=!0),i=de(new Uint8Array(r)),this.na.set(i,t)}.bind(this));var r=t.expiration-Date.now();(0>r||n&&1e3>r)&&e&&!e.xa&&(this.b.delete(t),t.close().catch(function(){})),Oe(this)&&(this.l.resolve(),this.M.O(je))};var Ne=1,De=5,je=.5;function Le(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Ue(){}function ze(t){return!t||1==t.length&&1e-6>t.end(0)-t.start(0)?null:t.length?t.end(t.length-1):null}function Be(t,e,n){return n=void 0===n?0:n,!(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0)||e>t.end(t.length-1))&&e+n>=t.start(0)}function qe(t,e){if(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0))return 0;for(var n=0,r=t.length-1;0<=r&&t.end(r)>e;--r)n+=t.end(r)-Math.max(t.start(r),e);return n}function Ke(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}Le.prototype.init=function(t){var e=muxjs.mp4.probe;t=new Uint8Array(t),this.g=e.videoTrackIds(t),this.f=e.timescale(t),this.a.init()},Le.prototype.b=function(t,e){var n=new Uint8Array(t);(n=this.a.parse(n,this.g,this.f))&&n.captions&&e(n.captions),this.a.clearParsedCaptions()},Le.prototype.c=function(){this.a.resetCaptionStream()},Ue.prototype.init=function(){},Ue.prototype.b=function(){},Ue.prototype.c=function(){};var Fe={ye:function(t,e){return t.reduce(function(t,e,n){return e.catch(t.bind(null,n))}.bind(null,e),Promise.reject())},yc:function(t,e){return t.concat(e)},ic:function(){},Ga:function(t){return null!=t}};function Ve(t,e){if(0==e.length)return t;var n=e.map(function(t){return new $(t)});return t.map(function(t){return new $(t)}).map(function(t){return n.map(t.resolve.bind(t))}).reduce(Fe.yc,[]).map(function(t){return t.toString()})}function He(t,e){return{keySystem:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:e||[],keyIds:[]}}var Ge={Na:"video",Ab:"audio",qa:"text",kg:"application"},We=1/15;function Xe(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Ye(e,n){return!(!t.muxjs||"mp2t"!=e.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported($e(n,e)):MediaSource.isTypeSupported($e("audio",e))||MediaSource.isTypeSupported($e("video",e)))}function $e(t,e){var n=e.replace(/mp2t/i,"mp4");"audio"==t&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],a=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function Je(t,e,n){this.startTime=t,this.direction=rn,this.endTime=e,this.payload=n,this.region=new hn,this.position=null,this.positionAlign=Qe,this.size=100,this.textAlign=Ze,this.writingMode=on,this.lineInterpretation=an,this.line=null,this.lineHeight="",this.lineAlign=sn,this.displayAlign=en,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=cn,this.fontStyle=fn,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}Xe.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Xe.prototype.i=function(t){this.c=t.captions;var e=new Uint8Array(t.data.byteLength+t.initSegment.byteLength);e.set(t.initSegment,0),e.set(t.data,t.initSegment.byteLength),this.g.push(e)},Xe.prototype.h=function(){var t={data:ye.apply(null,this.g),captions:this.c};this.b.resolve(t),this.f=!1},B("shaka.text.Cue",Je);var Qe="auto";Je.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qe};var Ze="center",tn={LEFT:"left",RIGHT:"right",CENTER:Ze,START:"start",END:"end"};Je.textAlign=tn;var en="after",nn={BEFORE:"before",CENTER:"center",AFTER:en};Je.displayAlign=nn;var rn="ltr";Je.direction={HORIZONTAL_LEFT_TO_RIGHT:rn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var on="horizontal-tb";Je.writingMode={HORIZONTAL_TOP_TO_BOTTOM:on,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var an=0;Je.lineInterpretation={LINE_NUMBER:an,PERCENTAGE:1};var sn="start",un={CENTER:"center",START:sn,END:"end"};Je.lineAlign=un;var cn=400;Je.fontWeight={NORMAL:cn,BOLD:700};var fn="normal",ln={NORMAL:fn,ITALIC:"italic",OBLIQUE:"oblique"};function hn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=pn,this.scroll=dn}Je.fontStyle=ln,Je.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},B("shaka.text.CueRegion",hn);var pn=1;hn.units={PX:0,PERCENTAGE:pn,LINES:2};var dn="";function vn(t){this.g=null,this.c=t,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}hn.scrollMode={NONE:dn,UP:"up"};var yn={};function mn(e){return!!(yn[e]||t.muxjs&&"application/cea-608"==e)}function gn(t,e){"application/cea-608"!=e&&(t.g=new yn[e])}function bn(t,e,n,r,i){for(var o=n+" "+r,a=new Map,s=(e=l(e)).next();!s.done;s=e.next()){var u=s.value;s=u.stream,a.has(s)||a.set(s,new Map),a.get(s).has(o)||a.get(s).set(o,[]),u.startTime+=i,u.endTime+=i,u.startTime>=t.f&&u.startTime<t.h&&(u=new Je(u.startTime,u.endTime,u.text),a.get(s).get(o).push(u),s==t.l&&t.c.append([u]))}for(o=(i=l(a.keys())).next();!o.done;o=i.next())for(o=o.value,t.i.has(o)||t.i.set(o,new Map),s=(e=l(a.get(o).keys())).next();!s.done;s=e.next())s=s.value,u=a.get(o).get(s),t.i.get(o).set(s,u);t.a=null==t.a?Math.max(n,t.f):Math.min(t.a,Math.max(n,t.f)),t.b=Math.max(t.b,Math.min(r,t.h))}function wn(t,e,n){this.f=t,this.g=n,this.b={},this.a=null,this.c={},this.i=new Kt,this.v=!1,this.l={},this.m=e,t=this.s=new dt,e=new MediaSource,this.i.da(e,"sourceopen",t.resolve),this.f.src=_n(e),this.h=e}B("shaka.text.TextEngine.registerParser",function(t,e){yn[t]=e}),B("shaka.text.TextEngine.unregisterParser",function(t){delete yn[t]}),vn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},vn.prototype.Mc=function(t){try{return this.g.parseMedia(new Uint8Array(t),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(t){throw new pt(2,2,2009,t)}},vn.prototype.remove=function(t,e){return Promise.resolve().then(function(){!this.c||!this.c.remove(t,e)||null==this.a||e<=this.a||t>=this.b||(t<=this.a&&e>=this.b?this.a=this.b=null:t<=this.a&&e<this.b?this.a=e:t>this.a&&e>=this.b&&(this.b=t))}.bind(this))},vn.prototype.qe=function(t){this.c.append(t)},vn.prototype.appendCues=vn.prototype.qe,vn.prototype.rc=function(t,e){this.l=t;var n=this.i.get(t);if(n)for(var r=l(n.keys()),i=r.next();!i.done;i=r.next())(i=n.get(i.value))&&(i=i.filter(function(t){return t.endTime<=e}),this.c.append(i))},vn.prototype.setSelectedClosedCaptionId=vn.prototype.rc;var _n=t.URL.createObjectURL;function Sn(t){var e=$t(t.mimeType,t.codecs),n=function(t){var e=[t.mimeType];return Qt.forEach(function(n,r){var i=t[r];i&&e.push(n+'="'+i+'"')}),e.join(";")}(t);return mn(e)||MediaSource.isTypeSupported(n)||Ye(e,t.type)}function En(t,e){t.a||(t.a=new vn(t.g)),gn(t.a,e)}function Tn(t){return!t.h||"ended"==t.h.readyState}function xn(t,e){if("text"==e)var n=t.a.a;else n=!(n=kn(t,e))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function In(t,e){return"text"==e?t.a.b:ze(kn(t,e))}function kn(t,e){try{return t.b[e].buffered}catch(t){return null}}function An(e,n,r,i,o,a){return"text"==n?function(t,e,n,r){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==r)this.g.parseInit(new Uint8Array(e));else{var t={periodStart:this.m,segmentStart:n,segmentEnd:r};t=this.g.parseMedia(new Uint8Array(e),t).filter(function(t){return t.startTime>=this.f&&t.startTime<this.h}.bind(this)),this.c.append(t),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(r,this.h)}}.bind(t))}(e.a,r,i,o):e.l[n]?function(t,e){t.f=!0,t.b=new dt,t.g=[],t.c=[];var n=new Uint8Array(e);return t.a.push(n),t.a.flush(),t.f&&t.b.reject(new pt(2,3,3018)),t.b}(e.l[n],r).then(function(t){return this.a||En(this,"text/vtt"),t.captions&&bn(this.a,t.captions,i,o,this.b.video.timestampOffset),Pn(this,n,this.ee.bind(this,n,t.data.buffer))}.bind(e)):(a&&t.muxjs&&(e.a||En(e,"text/vtt"),null==i&&null==o?e.m.init(r):e.m.b(r,function(t){t.length&&bn(e.a,t,i,o,e.b.video.timestampOffset)})),Pn(e,n,e.ee.bind(e,n,r)))}function Mn(t,e){return"text"==e?t.a?(t.m.c(),t.a.remove(0,1/0)):Promise.resolve():Pn(t,e,t.fe.bind(t,e,0,t.h.duration))}function Pn(t,e,n){if(t.v)return Promise.reject();if(n={start:n,p:new dt},t.c[e].push(n),1==t.c[e].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new pt(2,3,3017,e)):n.p.reject(new pt(2,3,3015,r)),On(t,e)}return n.p}function Rn(t,e){if(t.v)return Promise.reject();var n,r=[];for(n in t.b){var i=new dt,o={start:function(t){t.resolve()}.bind(null,i),p:i};t.c[n].push(o),r.push(i),1==t.c[n].length&&o.start()}return Promise.all(r).then(function(){try{e()}catch(e){var t=Promise.reject(new pt(2,3,3015,e))}for(var n in this.b)On(this,n);return t}.bind(t),function(t){throw t}.bind(t))}function On(t,e){t.c[e].shift();var n=t.c[e][0];if(n)try{n.start()}catch(r){n.p.reject(new pt(2,3,3015,r)),On(t,e)}}function Cn(t,e){return t=Dn(t),e=Dn(e),t.split("-")[0]==e.split("-")[0]}function Nn(t,e){t=Dn(t),e=Dn(e);var n=t.split("-"),r=e.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function Dn(t){var e=t.split("-");return t=e[0]||"",e=e[1]||"",t=t.toLowerCase(),t=Un.get(t)||t,(e=e.toUpperCase())?t+"-"+e:t}function jn(t){return t.language?Dn(t.language):t.audio&&t.audio.language?Dn(t.audio.language):t.video&&t.video.language?Dn(t.video.language):"und"}function Ln(t,e){for(var n=Dn(t),r=new Set,i=l(e),o=i.next();!o.done;o=i.next())r.add(Dn(o.value));for(o=(i=l(r)).next();!o.done;o=i.next())if((o=o.value)==n)return o;for(o=(i=l(r)).next();!o.done;o=i.next())if(Nn(o=o.value,n))return o;for(o=(i=l(r)).next();!o.done;o=i.next()){var a=o=o.value,s=n;if(a=Dn(a),s=Dn(s),a=a.split("-"),s=s.split("-"),2==a.length&&2==s.length&&a[0]==s[0])return o}for(o=(r=l(r)).next();!o.done;o=r.next())if(Nn(n,i=o.value))return i;return null}(n=wn.prototype).destroy=function(){var t=this;this.v=!0;var e,n=[];for(e in this.c){var r=this.c[e],i=r[0];for(this.c[e]=r.slice(0,1),i&&n.push(i.p.catch(Fe.ic)),i=1;i<r.length;++i)r[i].p.reject()}for(var o in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[o].destroy());return Promise.all(n).then(function(){t.i&&(t.i.release(),t.i=null),t.f&&(t.f.removeAttribute("src"),t.f.load(),t.f=null),t.h=null,t.a=null,t.g=null,t.b={},t.l={},t.m=null,t.c={}})},n.init=function(t,e){var n=this;return p(function r(){var i;return N(r,function(r){switch(r.j){case 1:return i=Ge,S(r,n.s,2);case 2:t.forEach(function(t,r){var o=$t(t.mimeType,t.codecs);r==i.qa?En(n,o):(!e&&MediaSource.isTypeSupported(o)||!Ye(o,r)||(n.l[r]=new Xe,o=$e(r,o)),o=n.h.addSourceBuffer(o),n.i.w(o,"error",n.Tf.bind(n,r)),n.i.w(o,"updateend",n.ub.bind(n,r)),n.b[r]=o,n.c[r]=[])}),E(r)}})})},n.Jc=function(t){if(t.total=Ke(this.f.buffered),t.audio=Ke(kn(this,"audio")),t.video=Ke(kn(this,"video")),t.text=[],this.a){var e=this.a.a,n=this.a.b;null!=e&&null!=n&&t.text.push({start:e,end:n})}},n.rc=function(t){var e=In(this,"video")||0;this.a.rc(t,e)},n.remove=function(t,e,n){return"text"==t?this.a.remove(e,n):Pn(this,t,this.fe.bind(this,t,e,n))},n.flush=function(t){return"text"==t?Promise.resolve():Pn(this,t,this.Ce.bind(this,t))},n.endOfStream=function(t){return Rn(this,function(){Tn(this)||(t?this.h.endOfStream(t):this.h.endOfStream())}.bind(this))},n.wa=function(t){return Rn(this,function(){this.h.duration=t}.bind(this))},n.Y=function(){return this.h.duration},n.ee=function(t,e){this.b[t].appendBuffer(e)},n.fe=function(t,e,n){n<=e?this.ub(t):this.b[t].remove(e,n)},n.oe=function(t){var e=this.b[t].appendWindowStart,n=this.b[t].appendWindowEnd;this.b[t].abort(),this.b[t].appendWindowStart=e,this.b[t].appendWindowEnd=n,this.ub(t)},n.Ce=function(t){this.f.currentTime-=.001,this.ub(t)},n.Sf=function(t,e){0>e&&(e+=.001),this.b[t].timestampOffset=e,this.ub(t)},n.Pf=function(t,e,n){this.b[t].appendWindowStart=0,this.b[t].appendWindowEnd=n,this.b[t].appendWindowStart=e,this.ub(t)},n.Tf=function(t){this.c[t][0].p.reject(new pt(2,3,3014,this.f.error?this.f.error.code:0))},n.ub=function(t){var e=this.c[t][0];e&&(e.p.resolve(),On(this,t))};var Un=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function zn(t,e,n){function r(t,e,n){return t>=e&&t<=n}var i=t.video;return!(i&&i.width&&i.height&&!(r(i.width,e.minWidth,Math.min(e.maxWidth,n.width))&&r(i.height,e.minHeight,Math.min(e.maxHeight,n.height))&&r(i.width*i.height,e.minPixels,e.maxPixels))||!r(t.bandwidth,e.minBandwidth,e.maxBandwidth))}function Bn(t,e,n){var r=!1;return t.forEach(function(t){var i=t.allowedByApplication;t.allowedByApplication=zn(t,e,n),i!=t.allowedByApplication&&(r=!0)}),r}function qn(t,e,n,r){r.variants=r.variants.filter(function(r){if(t&&t.P&&!Pe(t,r))return!1;var i=r.audio;return r=r.video,!(i&&!Sn(i)||r&&!Sn(r)||i&&e&&!Kn(i,e)||r&&n&&!Kn(r,n))}),r.textStreams=r.textStreams.filter(function(t){return mn($t(t.mimeType,t.codecs))})}function Kn(t,e){return t.mimeType==e.mimeType&&t.codecs.split(".")[0]==e.codecs.split(".")[0]}function Fn(t){var e=t.audio,n=t.video,r=e?e.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var a=[];n&&a.push(n.mimeType),e&&a.push(e.mimeType),a=a[0]||null;var s=[];e&&s.push(e.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return e&&e.roles.forEach(function(t){return u.add(t)}),n&&n.roles.forEach(function(t){return u.add(t)}),t={id:t.id,active:!1,type:"variant",bandwidth:t.bandwidth,language:t.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:a,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:t.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(t.videoId=n.id,t.originalVideoId=n.originalId,t.width=n.width||null,t.height=n.height||null,t.frameRate=n.frameRate||null,t.videoBandwidth=n.bandwidth||null),e&&(t.audioId=e.id,t.originalAudioId=e.originalId,t.channelsCount=e.channelsCount,t.audioBandwidth=e.bandwidth||null,t.label=e.label,t.audioRoles=e.roles),t}function Vn(t){return{id:t.id,active:!1,type:"text",bandwidth:0,language:t.language,label:t.label,kind:t.kind||null,width:null,height:null,frameRate:null,mimeType:t.mimeType,codecs:t.codecs||null,audioCodec:null,videoCodec:null,primary:t.primary,roles:t.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:t.originalId}}function Hn(t){return t.__shaka_id||(t.__shaka_id=Gn++),t.__shaka_id}var Gn=0;function Wn(t){return{id:Hn(t),active:!1,type:"",bandwidth:0,language:Dn(t.language),label:t.label,kind:t.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Xn(t){return t.allowedByApplication&&t.allowedByKeySystem}function Yn(t,e){for(var n=t.filter(function(t){return t.audio&&t.audio.channelsCount}),r=new Map,i=(n=l(n)).next();!i.done;i=n.next()){var o=(i=i.value).audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return 0==(n=Array.from(r.keys())).length?t:(i=n.filter(function(t){return t<=e})).length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n))}function $n(t,e,n){var r=t,i=t.filter(function(t){return t.primary});i.length&&(r=i);var o=r.length?r[0].language:"";if(r=r.filter(function(t){return t.language==o}),e){var a=Ln(Dn(e),t.map(function(t){return t.language}));a&&(r=t.filter(function(t){return Dn(t.language)==a}))}if(n){if((t=Jn(r,n)).length)return t}else if((t=r.filter(function(t){return 0==t.roles.length})).length)return t;return(t=r.map(function(t){return t.roles}).reduce(Fe.yc,[])).length?Jn(r,t[0]):r}function Jn(t,e){return t.filter(function(t){return t.roles.includes(e)})}function Qn(t,e,n){for(var r=0;r<n.length;r++)if(n[r].audio==t&&n[r].video==e)return n[r];return null}function Zn(){this.h=null,this.f=!1,this.b=new H,this.c=[],this.i=!1,this.a=this.g=null}function tr(t,e){return t&&(e=e.filter(function(e){return zn(e,t,{width:1/0,height:1/0})})),e.sort(function(t,e){return t.bandwidth-e.bandwidth})}function er(t,e){this.a=t,this.b=e}function nr(t,e){var n=new er(2,6),r=or,i=r.a,o=n.b-i.b;(0<(n.a-i.a||o)?r.c:r.b)(r.a,n,t,e)}function rr(t,e,n,r){W([n,"has been deprecated and will be removed in",e,". We are currently at version",t,". Additional information:",r].join(" "))}function ir(t,e,n,r){G([n,"has been deprecated and has been removed in",e,". We are now at version",t,". Additional information:",r].join(""))}B("shaka.abr.SimpleAbrManager",Zn),Zn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Zn.prototype.stop=Zn.prototype.stop,Zn.prototype.init=function(t){this.h=t},Zn.prototype.init=Zn.prototype.init,Zn.prototype.chooseVariant=function(){var t=tr(this.a.restrictions,this.c),e=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!t.length&&(t=[(t=tr(null,this.c))[0]]);for(var n=t[0]||null,r=0;r<t.length;++r){var i=t[r],o=(t[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;e>=i.bandwidth/this.a.bandwidthDowngradeTarget&&e<=o&&(n=i)}return this.g=Date.now(),n},Zn.prototype.chooseVariant=Zn.prototype.chooseVariant,Zn.prototype.enable=function(){this.f=!0},Zn.prototype.enable=Zn.prototype.enable,Zn.prototype.disable=function(){this.f=!1},Zn.prototype.disable=Zn.prototype.disable,Zn.prototype.segmentDownloaded=function(t,e){var n=this.b;if(!(16e3>e)){var r=8e3*e/t,i=t/1e3;n.a+=e,F(n.b,i,r),F(n.c,i,r)}if(null!=this.g&&this.f)t:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break t}else{if(!(128e3<=this.b.a))break t;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Zn.prototype.segmentDownloaded=Zn.prototype.segmentDownloaded,Zn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Zn.prototype.getBandwidthEstimate=Zn.prototype.getBandwidthEstimate,Zn.prototype.setVariants=function(t){this.c=t},Zn.prototype.setVariants=Zn.prototype.setVariants,Zn.prototype.configure=function(t){this.a=t},Zn.prototype.configure=Zn.prototype.configure,er.prototype.toString=function(){return"v"+this.a+"."+this.b};var or=null,ar="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),sr="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ur=["loop","playbackRate"],cr=["pause","play"],fr="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),lr={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},hr={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},pr=[["getConfiguration","configure"]],dr=[["isTextTrackVisible","setTextTrackVisibility"]],vr="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),yr=["attach","detach","load","unload"];function mr(t){return JSON.stringify(t,function(t,e){if("function"!=typeof e){if(e instanceof Event||e instanceof St){var n,r={};for(n in e){var i=e[n];i&&"object"==typeof i?"detail"==n&&(r[n]=i):n in Event||(r[n]=i)}return r}if(e instanceof TimeRanges)for(r={__type__:"TimeRanges",length:e.length,start:[],end:[]},n=0;n<e.length;++n)r.start.push(e.start(n)),r.end.push(e.end(n));else r=e instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(e)}:"number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:0>e?"-Infinity":"Infinity":e;return r}})}function gr(t){return JSON.parse(t,function(t,e){return"NaN"==e?NaN:"-Infinity"==e?-1/0:"Infinity"==e?1/0:e&&"object"==typeof e&&"TimeRanges"==e.__type__?function(t){return{length:t.length,start:function(e){return t.start[e]},end:function(e){return t.end[e]}}}(e):e&&"object"==typeof e&&"Uint8Array"==e.__type__?new Uint8Array(e.entries):e})}function br(t,e,n,r,i,o){this.T=t,this.f=new ft(e),this.P=n,this.l=!1,this.G=r,this.M=i,this.C=o,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Nd.bind(this),this.s=this.kf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var wr=!1,_r=null;function Sr(t){var e=_r;e.removeUpdateListener(t.m),e.removeMessageListener("urn:x-cast:com.google.shaka.v2",t.s)}function Er(t){for(var e in t.c){var n=t.c[e];delete t.c[e],n.reject(new pt(1,7,7e3))}}function Tr(t){t=mr(t),_r.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},X)}function xr(t,e,n){var r=this;Tt.call(this),this.c=t,this.b=e,this.i=this.g=this.f=this.l=this.h=null,(this.m=n)&&(this.a=new br(n,function(){return kr(r)},function(){return Ar(r)},function(t,e){return Pr(r,t,e)},function(){return Mr(r)},function(){return Ir(r)})),function(t){for(var e in t.a&&t.a.init(),t.i=new Kt,ar.forEach(function(t){this.i.w(this.c,t,this.ig.bind(this))}.bind(t)),fr.forEach(function(t){this.i.w(this.b,t,this.yf.bind(this))}.bind(t)),t.h={},t.c)Object.defineProperty(t.h,e,{configurable:!1,enumerable:!0,get:t.hg.bind(t,e),set:t.jg.bind(t,e)});for(var n in t.l={},t.b)Object.defineProperty(t.l,n,{configurable:!1,enumerable:!0,get:t.Ud.bind(t,n)});t.f=new Tt,t.f.Vb=t.h,t.g=new Tt,t.g.Vb=t.l}(this)}function Ir(t){var e={video:{},player:{},playerAfterLoad:{},manifest:t.b.bc(),startTime:null};return t.c.pause(),ur.forEach(function(t){e.video[t]=this.c[t]}.bind(t)),t.c.ended||(e.startTime=t.c.currentTime),pr.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(t)),dr.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(t)),e}function kr(t){t.dispatchEvent(new St("caststatuschanged"))}function Ar(t){t.f.dispatchEvent(new St(t.h.paused?"pause":"play"))}function Mr(t){pr.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(t));var e=t.a.get("player","getAssetUri")(),n=t.a.get("video","ended"),r=Promise.resolve(),i=t.c.autoplay,o=null;n||(o=t.a.get("video","currentTime")),e&&(t.c.autoplay=!1,r=t.b.load(e,o));var a={};ur.forEach(function(t){a[t]=this.a.get("video",t)}.bind(t)),r.then(function(){t.c&&(ur.forEach(function(t){this.c[t]=a[t]}.bind(t)),dr.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(t)),t.c.autoplay=i,e&&t.c.play())},function(e){t.b.dispatchEvent(new St("error",{detail:e}))})}function Pr(t,e,n){t.a.ga()&&("video"==e?t.f.dispatchEvent(n):"player"==e&&t.g.dispatchEvent(n))}function Rr(t,e,n,r){var i=this;Tt.call(this),this.a=t,this.b=e,this.c=new Kt,this.D={video:t,player:e},this.s=n||function(){},this.G=r||function(t){return t},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.C=new ft(function(){Cr(i)}),function(t){var e=cast.receiver.CastReceiverManager.getInstance();e.onSenderConnected=t.Qd.bind(t),e.onSenderDisconnected=t.Qd.bind(t),e.onSystemVolumeChanged=t.Be.bind(t),t.i=e.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.i.onMessage=t.ef.bind(t),t.f=e.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.f.onMessage=t.rf.bind(t),e.start(),ar.forEach(function(t){this.c.w(this.a,t,this.Wd.bind(this,"video"))}.bind(t)),fr.forEach(function(t){this.c.w(this.b,t,this.Wd.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.kd(3840,2160):t.b.kd(1920,1080),t.c.w(t.a,"loadeddata",function(){this.m=!0}.bind(t)),t.c.w(t.b,"loading",function(){this.h=!1,Or(this)}.bind(t)),t.c.w(t.a,"playing",function(){this.h=!1,Or(this)}.bind(t)),t.c.w(t.a,"pause",function(){Or(this)}.bind(t)),t.c.w(t.b,"unloading",function(){this.h=!0,Or(this)}.bind(t)),t.c.w(t.a,"ended",function(){var t=this;new ft(function(){t.a&&t.a.ended&&(t.h=!0,Or(t))}).O(5)}.bind(t))}(this)}function Or(t){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new St("caststatuschanged")),Nr(this)||Lr(this,0))}.bind(t))}function Cr(t){t.C.O(.5);var e={video:{},player:{}};if(sr.forEach(function(t){e.video[t]=this.a[t]}.bind(t)),t.b.V())for(var n in hr)0==t.g%hr[n]&&(e.player[n]=t.b[n]());for(var r in lr)0==t.g%lr[r]&&(e.player[r]=t.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(e.video.volume=n.level,e.video.muted=n.muted),t.m&&(t.g+=1),jr(t,{type:"update",update:e},t.f),Nr(t)}function Nr(t){return!(!t.l||!t.a.duration&&!t.b.V())&&(Dr(t),t.l=!1,!0)}function Dr(t){var e={contentId:t.b.bc(),streamType:t.b.V()?"LIVE":"BUFFERED",duration:t.a.duration,contentType:""};Lr(t,0,e)}function jr(t,e,n,r){t.v&&(t=mr(e),r?n.getCastChannel(r).send(t):n.broadcast(t))}function Lr(t,e,n){var r=t.a.playbackRate,i=Ur;r={mediaSessionId:0,playbackRate:r,playerState:i=t.h?i.IDLE:t.b.Oc()?i.je:t.a.paused?i.le:i.me,currentTime:t.a.currentTime,supportedMediaCommands:15,volume:{level:t.a.volume,muted:t.a.muted}},n&&(r.media=n),jr(t,{requestId:e,type:"MEDIA_STATUS",status:[r]},t.i)}(n=br.prototype).destroy=function(){return Er(this),_r&&Sr(this),this.f&&(this.f.stop(),this.f=null),this.M=this.G=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.ga=function(){return this.b},n.cd=function(){return this.D},n.init=function(){if(t.chrome&&chrome.cast&&chrome.cast.isAvailable){delete t.__onGCastApiAvailable,this.h=!0,this.f.sc();var e=new chrome.cast.SessionRequest(this.T);e=new chrome.cast.ApiConfig(e,this.Od.bind(this),this.pf.bind(this),"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),wr&&this.f.O(.02),(e=_r)&&e.status!=chrome.cast.SessionStatus.STOPPED?this.Od(e):_r=null}else t.__onGCastApiAvailable=function(t){t&&this.init()}.bind(this)},n.jd=function(t){this.i=t,this.b&&Tr({type:"appData",appData:this.i})},n.cast=function(t){return this.h?wr?this.b?Promise.reject(new pt(1,8,8002)):(this.g=new dt,chrome.cast.requestSession(this.$c.bind(this,t),this.Md.bind(this)),this.g):Promise.reject(new pt(1,8,8001)):Promise.reject(new pt(1,8,8e3))},n.Eb=function(){this.b&&(Er(this),_r&&(Sr(this),_r.stop(function(){},function(){}),_r=null))},n.get=function(t,e){if("video"==t){if(cr.includes(e))return this.Yd.bind(this,t,e)}else if("player"==t){if(hr[e]&&!this.get("player","isLive")())return function(){};if(vr.includes(e))return this.Yd.bind(this,t,e);if(yr.includes(e))return this.Ef.bind(this,t,e);if(lr[e])return this.Vd.bind(this,t,e)}return this.Vd(t,e)},n.set=function(t,e,n){this.a[t][e]=n,Tr({type:"set",targetName:t,property:e,value:n})},n.$c=function(t,e){_r=e,e.addUpdateListener(this.m),e.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Nd(),Tr({type:"init",initState:t,appData:this.i}),this.g.resolve()},n.Md=function(t){var e=8003;switch(t.code){case"cancel":e=8004;break;case"timeout":e=8005;break;case"receiver_unavailable":e=8006}this.g.reject(new pt(2,8,e,t))},n.Vd=function(t,e){return this.a[t][e]},n.Yd=function(t,e,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];Tr({type:"call",targetName:t,methodName:e,args:r})},n.Ef=function(t,e,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new dt;var o=this.v.toString();return this.v++,this.c[o]=i,Tr({type:"asyncCall",targetName:t,methodName:e,args:r,id:o}),i},n.Od=function(t){var e=this.C();this.g=new dt,this.l=!0,this.$c(e,t)},n.pf=function(t){wr="available"==t,this.f.sc()},n.Nd=function(){var t=!!_r&&"connected"==_r.status;if(this.b&&!t){for(var e in this.M(),this.a)this.a[e]={};Er(this)}this.D=(this.b=t)?_r.receiver.friendlyName:"",this.f.sc()},n.kf=function(t,e){var n=gr(e);switch(n.type){case"event":var r=n.event;this.G(n.targetName,new St(r.type,r));break;case"update":for(var i in r=n.update)for(var o in n=this.a[i]||{},r[i])n[o]=r[i][o];this.l&&(this.P(),this.l=!1);break;case"asyncComplete":if(i=n.id,n=n.error,o=this.c[i],delete this.c[i],o)if(n){for(r in i=new pt(n.severity,n.category,n.code),n)i[r]=n[r];o.reject(i)}else o.resolve()}},q(xr,Tt),B("shaka.cast.CastProxy",xr),xr.prototype.destroy=function(t){return t&&this.a&&this.a.Eb(),this.i&&(this.i.release(),this.i=null),t=[],this.b&&(t.push(this.b.destroy()),this.b=null),this.a&&(t.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(t)},xr.prototype.destroy=xr.prototype.destroy,xr.prototype.Ye=function(){return this.h},xr.prototype.getVideo=xr.prototype.Ye,xr.prototype.Re=function(){return this.l},xr.prototype.getPlayer=xr.prototype.Re,xr.prototype.se=function(){return!!this.a&&(this.a.h&&wr)},xr.prototype.canCast=xr.prototype.se,xr.prototype.ga=function(){return!!this.a&&this.a.ga()},xr.prototype.isCasting=xr.prototype.ga,xr.prototype.cd=function(){return this.a?this.a.cd():""},xr.prototype.receiverName=xr.prototype.cd,xr.prototype.cast=function(){if(!this.a)throw new pt(1,8,8007);var t=Ir(this);return this.a.cast(t).then(function(){if(this.b)return this.b.rd()}.bind(this))},xr.prototype.cast=xr.prototype.cast,xr.prototype.jd=function(t){this.a&&this.a.jd(t)},xr.prototype.setAppData=xr.prototype.jd,xr.prototype.$f=function(){if(this.a){var t=this.a;if(t.b){var e=t.C();chrome.cast.requestSession(t.$c.bind(t,e),t.Md.bind(t))}}},xr.prototype.suggestDisconnect=xr.prototype.$f,xr.prototype.ve=function(t){var e=this;return p(function n(){return N(n,function(n){switch(n.j){case 1:if(t==e.m)return n.return();if(e.m=t,!e.a){n.A(2);break}return e.a.Eb(),S(n,e.a.destroy(),3);case 3:e.a=null;case 2:e.a=new br(t,function(){return kr(e)},function(){return Ar(e)},function(t,n){return Pr(e,t,n)},function(){return Mr(e)},function(){return Ir(e)}),e.a.init(),E(n)}})})},xr.prototype.changeReceiverId=xr.prototype.ve,xr.prototype.Eb=function(){this.a&&this.a.Eb()},xr.prototype.forceDisconnect=xr.prototype.Eb,(n=xr.prototype).hg=function(t){if("addEventListener"==t)return this.f.addEventListener.bind(this.f);if("removeEventListener"==t)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var e=this.c[t];if("function"!=typeof e)return e}return this.a&&this.a.ga()?this.a.get("video",t):("function"==typeof(t=this.c[t])&&(t=t.bind(this.c)),t)},n.jg=function(t,e){this.a&&this.a.ga()?this.a.set("video",t,e):this.c[t]=e},n.ig=function(t){this.a&&this.a.ga()||this.f.dispatchEvent(new St(t.type,t))},n.Ud=function(t){if("addEventListener"==t)return this.g.addEventListener.bind(this.g);if("removeEventListener"==t)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==t)return function(){return this.h}.bind(this);if("getSharedConfiguration"==t)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==t)return this.b.Fb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("getManifestUri"==t)return nr("getManifestUri",'Please use "getAssetUri" instead.'),this.Ud("getAssetUri");if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&lr[t]||!this.a||!this.a.ga()?this.b[t].bind(this.b):this.a.get("player",t)},n.yf=function(t){this.a&&this.a.ga()||this.g.dispatchEvent(t)},q(Rr,Tt),B("shaka.cast.CastReceiver",Rr),Rr.prototype.isConnected=function(){return this.v},Rr.prototype.isConnected=Rr.prototype.isConnected,Rr.prototype.bf=function(){return this.h},Rr.prototype.isIdle=Rr.prototype.bf,Rr.prototype.destroy=function(){var t=this;return p(function e(){var n;return N(e,function(e){switch(e.j){case 1:return t.c&&(t.c.release(),t.c=null),n=[],t.b&&(n.push(t.b.destroy()),t.b=null),t.C&&(t.C.stop(),t.C=null),t.a=null,t.D=null,t.s=null,t.v=!1,t.h=!0,t.f=null,t.i=null,S(e,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),E(e)}})})},Rr.prototype.destroy=Rr.prototype.destroy,(n=Rr.prototype).Qd=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Or(this)},n.Wd=function(t,e){this.b&&(Cr(this),jr(this,{type:"event",targetName:t,event:e},this.f))},n.Be=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&jr(this,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},this.f),jr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.rf=function(t){var e=gr(t.data);switch(e.type){case"init":this.g=0,this.m=!1,this.l=!0,function(t,e,n){for(var r in e.player)t.b[r](e.player[r]);t.s(n),n=Promise.resolve();var i=t.a.autoplay;e.manifest&&(t.a.autoplay=!1,n=t.b.load(e.manifest,e.startTime)),n.then(function(){if(t.b){for(var n in e.video)t.a[n]=e.video[n];for(var r in e.playerAfterLoad)t.b[r](e.playerAfterLoad[r]);t.a.autoplay=i,e.manifest&&(t.a.play(),Lr(t,0))}},function(e){t.b.dispatchEvent(new St("error",{detail:e}))})}(this,e.initState,e.appData),Cr(this);break;case"appData":this.s(e.appData);break;case"set":var n=e.targetName,r=e.property;if(e=e.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(e);break}if("muted"==r){i.setSystemVolumeMuted(e);break}}this.D[n][r]=e;break;case"call":(n=this.D[e.targetName])[e.methodName].apply(n,e.args);break;case"asyncCall":n=e.targetName,r=e.methodName,"player"==n&&"load"==r&&(this.g=0,this.m=!1),i=e.id,t=t.senderId;var o=this.D[n];e=o[r].apply(o,e.args),"player"==n&&"load"==r&&(e=e.then(function(){this.l=!0}.bind(this))),e.then(this.be.bind(this,t,i,null),this.be.bind(this,t,i))}},n.ef=function(t){var e=gr(t.data);switch(e.type){case"PLAY":this.a.play(),Lr(this,0);break;case"PAUSE":this.a.pause(),Lr(this,0);break;case"SEEK":t=e.currentTime;var n=e.resumeState;null!=t&&(this.a.currentTime=Number(t)),n&&"PLAYBACK_START"==n?(this.a.play(),Lr(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Lr(this,0));break;case"STOP":this.b.rd().then(function(){this.b&&Lr(this,0)}.bind(this));break;case"GET_STATUS":Lr(this,Number(e.requestId));break;case"VOLUME":t=(n=e.volume).level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=t&&(this.a.volume=Number(t)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Lr(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,t=e.media,n=e.currentTime,r=this.G(t.contentId),i=e.autoplay||!0,this.s(t.customData),i&&(this.a.autoplay=!0),this.b.load(r,n).then(function(){this.b&&Dr(this)}.bind(this)).catch(function(t){var n="LOAD_FAILED";7==t.category&&7e3==t.code&&(n="LOAD_CANCELLED"),jr(this,{requestId:Number(e.requestId),type:n},this.i)}.bind(this));break;default:jr(this,{requestId:Number(e.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.be=function(t,e,n){this.b&&jr(this,{type:"asyncComplete",id:e,error:n},this.f,t)};var Ur={IDLE:"IDLE",me:"PLAYING",je:"BUFFERING",le:"PAUSED"};function zr(t,e){this.K=t,this.b=e==Br,this.a=0}B("shaka.util.DataViewReader",zr);var Br=1;function qr(){throw new pt(2,3,3e3)}function Kr(){this.c=[],this.b=[],this.a=!1}function Fr(t){for(;t.reader.sa()&&!t.parser.a;)t.parser.mc(t.start,t.reader,t.partialOkay)}function Vr(t){for(var e=t.reader.F();0<e&&!t.parser.a;--e)t.parser.mc(t.start,t.reader,t.partialOkay)}function Hr(t){return function(e){t(e.reader.Xa(e.reader.K.byteLength-e.reader.ba()))}}function Gr(t){for(var e=0,n=0;n<t.length;n++)e=e<<8|t.charCodeAt(n);return e}function Wr(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function Xr(t){this.f=[],this.b=[],this.a=[],(new Kr).fa("pssh",this.c.bind(this)).parse(t.buffer)}zr.Endianness={lg:0,mg:Br},zr.prototype.sa=function(){return this.a<this.K.byteLength},zr.prototype.hasMoreData=zr.prototype.sa,zr.prototype.ba=function(){return this.a},zr.prototype.getPosition=zr.prototype.ba,zr.prototype.Ie=function(){return this.K.byteLength},zr.prototype.getLength=zr.prototype.Ie,zr.prototype.ka=function(){try{var t=this.K.getUint8(this.a);return this.a+=1,t}catch(t){qr()}},zr.prototype.readUint8=zr.prototype.ka,zr.prototype.Mb=function(){try{var t=this.K.getUint16(this.a,this.b);return this.a+=2,t}catch(t){qr()}},zr.prototype.readUint16=zr.prototype.Mb,zr.prototype.F=function(){try{var t=this.K.getUint32(this.a,this.b);return this.a+=4,t}catch(t){qr()}},zr.prototype.readUint32=zr.prototype.F,zr.prototype.Xd=function(){try{var t=this.K.getInt32(this.a,this.b);return this.a+=4,t}catch(t){qr()}},zr.prototype.readInt32=zr.prototype.Xd,zr.prototype.yb=function(){try{if(this.b)var t=this.K.getUint32(this.a,!0),e=this.K.getUint32(this.a+4,!0);else e=this.K.getUint32(this.a,!1),t=this.K.getUint32(this.a+4,!1)}catch(t){qr()}if(2097151<e)throw new pt(2,3,3001);return this.a+=8,e*Math.pow(2,32)+t},zr.prototype.readUint64=zr.prototype.yb,zr.prototype.Xa=function(t){this.a+t>this.K.byteLength&&qr();var e=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,t);return this.a+=t,new Uint8Array(e)},zr.prototype.readBytes=zr.prototype.Xa,zr.prototype.L=function(t){this.a+t>this.K.byteLength&&qr(),this.a+=t},zr.prototype.skip=zr.prototype.L,zr.prototype.$d=function(t){this.a<t&&qr(),this.a-=t},zr.prototype.rewind=zr.prototype.$d,zr.prototype.seek=function(t){(0>t||t>this.K.byteLength)&&qr(),this.a=t},zr.prototype.seek=zr.prototype.seek,zr.prototype.bd=function(){for(var t=this.a;this.sa()&&0!=this.K.getUint8(this.a);)this.a+=1;return t=new Uint8Array(this.K.buffer,this.K.byteOffset+t,this.a-t),this.a+=1,ie(t)},zr.prototype.readTerminatedString=zr.prototype.bd,B("shaka.util.Mp4Parser",Kr),Kr.prototype.H=function(t,e){var n=Gr(t);return this.c[n]=0,this.b[n]=e,this},Kr.prototype.box=Kr.prototype.H,Kr.prototype.fa=function(t,e){var n=Gr(t);return this.c[n]=1,this.b[n]=e,this},Kr.prototype.fullBox=Kr.prototype.fa,Kr.prototype.stop=function(){this.a=!0},Kr.prototype.stop=Kr.prototype.stop,Kr.prototype.parse=function(t,e){var n=new Uint8Array(t);for(n=new zr(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.sa()&&!this.a;)this.mc(0,n,e)},Kr.prototype.parse=Kr.prototype.parse,Kr.prototype.mc=function(t,e,n){var r=e.ba(),i=e.F(),o=e.F();switch(i){case 0:i=e.K.byteLength-r;break;case 1:i=e.yb()}var a=this.b[o];if(a){var s=null,u=null;1==this.c[o]&&(s=(u=e.F())>>>24,u&=16777215),o=r+i,n&&o>e.K.byteLength&&(o=e.K.byteLength),o-=e.ba(),e=0<o?e.Xa(o):new Uint8Array(0),a({parser:this,partialOkay:n||!1,version:s,flags:u,reader:e=new zr(new DataView(e.buffer,e.byteOffset,e.byteLength),0),size:i,start:r+t})}else e.L(Math.min(r+i-e.ba(),e.K.byteLength-e.ba()))},Kr.prototype.parseNext=Kr.prototype.mc,Kr.children=Fr,Kr.sampleDescription=Vr,Kr.allData=Hr,Kr.typeToString=Wr,Xr.prototype.c=function(t){if(!(1<t.version)){var e=de(t.reader.Xa(16)),n=[];if(0<t.version)for(var r=t.reader.F(),i=0;i<r;++i){var o=de(t.reader.Xa(16));n.push(o)}r=t.reader.F(),t.reader.L(r),this.b.push.apply(this.b,n),this.f.push(e),this.a.push({start:t.start,end:t.start+t.size-1})}};var Yr={ac:function(t,e){var n=Yr.R(t,e);return 1!=n.length?null:n[0]},Gc:function(t,e,n){return 1!=(t=Yr.zd(t,e,n)).length?null:t[0]},R:function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return t instanceof Element&&t.tagName==e})},zd:function(t,e,n){return Array.prototype.filter.call(t.childNodes,function(t){return t instanceof Element&&t.localName==n&&t.namespaceURI==e})},getAttributeNS:function(t,e,n){return t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null},cc:function(t){return Array.prototype.every.call(t.childNodes,function(t){return t.nodeType==Node.TEXT_NODE||t.nodeType==Node.CDATA_SECTION_NODE})?t.textContent.trim():null},J:function(t,e,n,r){r=void 0===r?null:r;var i=null;return null!=(t=t.getAttribute(e))&&(i=n(t)),null==i?r:i},vf:function(t){return t?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),t=Date.parse(t),isNaN(t)?null:Math.floor(t/1e3)):null},Ba:function(t){return t&&(t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t))?(t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(t)?t:null):null},oc:function(t){var e=/([0-9]+)-([0-9]+)/.exec(t);return e?(t=Number(e[1]),isFinite(t)?(e=Number(e[2]),isFinite(e)?{start:t,end:e}:null):null):null},parseInt:function(t){return 0===(t=Number(t))%1?t:null},nc:function(t){return 0===(t=Number(t))%1&&0<t?t:null},vb:function(t){return 0===(t=Number(t))%1&&0<=t?t:null},parseFloat:function(t){return t=Number(t),isNaN(t)?null:t},Ae:function(t){var e;return t=(e=t.match(/^(\d+)\/(\d+)$/))?Number(e[1])/Number(e[2]):Number(t),isNaN(t)?null:t},Td:function(t,e){var n=new DOMParser;try{var r=n.parseFromString(t,"text/xml")}catch(t){}if(r&&r.documentElement.tagName==e)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},Sd:function(t,e){try{var n=ie(t);return Yr.Td(n,e)}catch(t){}}},$r=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Jr(t,e,n){var r=function(t){for(var e=[],n=(t=l(t)).next();!n.done;n=t.next())(n=ti(n.value))&&e.push(n);return e}(t),i=null;t=[];var o=[],a=new Set(r.map(function(t){return t.keyId}));if(a.delete(null),1<a.size)throw new pt(2,4,4010);if(n||(o=r.filter(function(t){return"urn:mpeg:dash:mp4protection:2011"!=t.ae||(i=t.init||i,!1)})).length&&(0==(t=function(t,e,n){for(var r=[],i=(n=l(n)).next();!i.done;i=n.next()){i=i.value;var o=$r.get(i.ae);if(o){var a;if(a=Yr.Gc(i.node,"urn:microsoft:playready","pro")){a=he(a.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=a.length,c=s.length+16+u,f=new ArrayBuffer(c),h=new Uint8Array(f);f=new DataView(f);var p=0;f.setUint32(p,c),p+=4,f.setUint32(p,1886614376),p+=4,f.setUint32(p,0),p+=4,h.set(s,p),p+=s.length,f.setUint32(p,u),p+=4,h.set(a,p),a=[{initData:h,initDataType:"cenc",keyId:i.keyId}]}else a=null;a=He(o,i.init||t||a),(o=Zr.get(o))&&(a.licenseServerUri=o(i)),r.push(a)}else for(i=l(i=e(i.node)||[]),o=i.next();!o.done;o=i.next())r.push(o.value)}return r}(i,e,o)).length&&(t=[He("",i)])),r.length&&(n||!o.length))for(t=[],n=(e=l($r.values())).next();!n.done;n=e.next())"org.w3.clearkey"!=(n=n.value)&&t.push(He(n,i));if(a=Array.from(a)[0]||null)for(n=(e=l(t)).next();!n.done;n=e.next())for(r=(n=l(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=a;return{wd:a,pg:i,drmInfos:t,Ad:!0}}var Qr,Zr=(new Map).set("com.widevine.alpha",function(t){return(t=Yr.Gc(t.node,"urn:microsoft","laurl"))&&t.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",function(t){return(t=Yr.Gc(t.node,"urn:microsoft:playready","pro"))&&(t=function(t){var e=0,n=new DataView(t).getUint32(e,!0);if(n!==t.byteLength)return[];e+=6,n=[];for(var r=new DataView(t);e<t.byteLength-1;){var i=r.getUint16(e,!0);e+=2;var o=r.getUint16(e,!0);e+=2;var a=new Uint8Array(t,e,o);n.push({type:i,value:a}),e+=o}return n}((t=he(t.textContent)).buffer).filter(function(t){return 1===t.type})[0])?(t=oe(t.value,!0),(t=Yr.Td(t,"WRMHEADER"))?function(t){return(t=t.querySelector("DATA > LA_URL"))?t.textContent:""}(t):""):""});function ti(t){var e=t.getAttribute("schemeIdUri"),n=Yr.getAttributeNS(t,"urn:mpeg:cenc:2013","default_KID"),r=Yr.zd(t,"urn:mpeg:cenc:2013","pssh").map(Yr.cc);if(!e)return null;if(e=e.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new pt(2,4,4009);var i=[];try{i=r.map(function(t){return{initDataType:"cenc",initData:he(t),keyId:null}})}catch(t){throw new pt(2,4,4007)}return{node:t,ae:e,keyId:n,init:0<i.length?i:null}}function ei(e,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,n,r,i){if("$$"==e)return"$";var o=a[n];if(null==o)return e;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(o=Math.round(o)),i){case void 0:case"d":case"i":case"u":e=o.toString();break;case"o":e=o.toString(8);break;case"x":e=o.toString(16);break;case"X":e=o.toString(16).toUpperCase();break;default:e=o.toString()}return r=t.parseInt(r,10)||1,Array(Math.max(0,r-e.length)+1).join("0")+e})}function ni(t,e){var n=ri(t,e,"timescale"),r=1;n&&(r=Yr.nc(n)||1),n=ri(t,e,"duration"),(n=Yr.nc(n||""))&&(n/=r);var i=ri(t,e,"startNumber"),o=Number(ri(t,e,"presentationTimeOffset"))||0,a=Yr.vb(i||"");null!=i&&null!=a||(a=1);var s=ii(t,e,"SegmentTimeline");if(i=null,s){i=r;var u=t.S.duration||1/0;s=Yr.R(s,"S");for(var c=[],f=0,l=0;l<s.length;++l){var h=s[l],p=Yr.J(h,"t",Yr.vb),d=Yr.J(h,"d",Yr.vb);if(h=Yr.J(h,"r",Yr.parseInt),null!=p&&(p-=o),!d)break;if(p=null!=p?p:f,0>(h=h||0))if(l+1<s.length){if(null==(h=Yr.J(s[l+1],"t",Yr.vb)))break;if(p>=h)break;h=Math.ceil((h-p)/d)-1}else{if(1/0==u)break;if(p/i>=u)break;h=Math.ceil((u*i-p)/d)-1}0<c.length&&p!=f&&(c[c.length-1].end=p/i);for(var v=0;v<=h;++v)f=p+d,c.push({start:p/i,end:f/i,eg:p}),p=f}i=c}return{timescale:r,Z:n,Za:a,la:o/r||0,sd:o,N:i}}function ri(t,e,n){return[e(t.B),e(t.ca),e(t.ja)].filter(Fe.Ga).map(function(t){return t.getAttribute(n)}).reduce(function(t,e){return t||e})}function ii(t,e,n){return[e(t.B),e(t.ca),e(t.ja)].filter(Fe.Ga).map(function(t){return Yr.ac(t,n)}).reduce(function(t,e){return t||e})}function oi(t,e,n,r,i,o){if(o=void 0===o?0:o,Yr.getAttributeNS(t,"http://www.w3.org/1999/xlink","href")){var a=function(t,e,n,r,i,o){for(var a=Yr.getAttributeNS(t,"http://www.w3.org/1999/xlink","href"),s=Yr.getAttributeNS(t,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<t.attributes.length;u++){var c=t.attributes[u];"http://www.w3.org/1999/xlink"==c.namespaceURI&&(t.removeAttributeNS(c.namespaceURI,c.localName),--u)}if(5<=o)return yt(new pt(2,4,4028));if("onLoad"!=s)return yt(new pt(2,4,4027));var f=Ve([r],[a]);return i.request(0,Dt(f,e)).U(function(r){if(!(r=Yr.Sd(r.data,t.tagName)))return yt(new pt(2,4,4001,a));for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),t.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,c=r.getAttribute(u);t.setAttribute(u,c)}return oi(t,e,n,f[0],i,o+1)})}(t,e,n,r,i,o);return n&&(a=a.U(void 0,function(){return oi(t,e,n,r,i,o)})),a}a=[];for(var s=0;s<t.childNodes.length;s++){var u=t.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Yr.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(t.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&a.push(oi(u,e,n,r,i,o)))}return wt(a).U(function(){return t})}function ai(t,e,n){this.c=t,this.b=e,this.a=n}function si(t,e,n,r,i,o){this.position=t,this.startTime=e,this.endTime=n,this.c=r,this.b=i,this.a=o}function ui(t,e,n,r){var i,o=(new Kr).fa("sidx",function(t){i=function(t,e,n,r){var i=[];r.reader.L(4);var o=r.reader.F();if(0==o)throw new pt(2,3,3005);if(0==r.version)var a=r.reader.F(),s=r.reader.F();else a=r.reader.yb(),s=r.reader.yb();r.reader.L(2);var u=r.reader.Mb();for(t=t+r.size+s,s=0;s<u;s++){var c=r.reader.F(),f=(2147483648&c)>>>31;c&=2147483647;var l=r.reader.F();if(r.reader.L(4),1==f)throw new pt(2,3,3006);i.push(new si(i.length,a/o-e,(a+l)/o-e,function(){return n},t,t+c-1)),a+=l,t+=c}return r.parser.stop(),i}(e,r,n,t)});if(t&&o.parse(t),i)return i;throw new pt(2,3,3004)}function ci(t){this.a=t}function fi(t,e){for(;t.a.length&&t.a[t.a.length-1].startTime>=e;)t.a.pop();for(;t.a.length&&0>=t.a[0].endTime;)t.a.shift();if(0!=t.a.length){var n=t.a[t.a.length-1];t.a[t.a.length-1]=new si(n.position,n.startTime,e,n.c,n.b,n.a)}}function li(t){this.b=t,this.a=new zr(t,0),Qr||(Qr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function hi(t){var e=pi(t);if(7<e.length)throw new pt(2,3,3002);for(var n=0,r=0;r<e.length;r++)n=256*n+e[r];e=n,n=pi(t);t:{for(r=0;r<Qr.length;r++)if(ve(n,Qr[r])){r=!0;break t}r=!1}if(r)n=t.b.byteLength-t.a.ba();else{if(8==n.length&&224&n[1])throw new pt(2,3,3001);r=n[0]&(1<<8-n.length)-1;for(var i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=t.a.ba()+n<=t.b.byteLength?n:t.b.byteLength-t.a.ba(),r=new DataView(t.b.buffer,t.b.byteOffset+t.a.ba(),n),t.a.L(n),new di(e,r)}function pi(t){var e,n=t.a.ka();for(e=1;8>=e&&!(n&1<<8-e);e++);if(8<e)throw new pt(2,3,3002);var r=new Uint8Array(e);for(r[0]=n,n=1;n<e;n++)r[n]=t.a.ka();return r}function di(t,e){this.id=t,this.a=e}function vi(t){if(8<t.a.byteLength)throw new pt(2,3,3002);if(8==t.a.byteLength&&224&t.a.getUint8(0))throw new pt(2,3,3001);for(var e=0,n=0;n<t.a.byteLength;n++){e=256*e+t.a.getUint8(n)}return e}function yi(){}function mi(t){var e=new li(t.a);if(179!=(t=hi(e)).id)throw new pt(2,3,3013);if(t=vi(t),183!=(e=hi(e)).id)throw new pt(2,3,3012);e=new li(e.a);for(var n=0;e.sa();){var r=hi(e);if(241==r.id){n=vi(r);break}}return{fg:t,Df:n}}function gi(t,e){var n=ii(t,e,"Initialization");if(!n)return null;var r=t.B.oa,i=n.getAttribute("sourceURL");i&&(r=Ve(t.B.oa,[i])),i=0;var o=null;return(n=Yr.J(n,"range",Yr.oc))&&(i=n.start,o=n.end),new ai(function(){return r},i,o)}function bi(t,e,n,r,i,o,a,s){var u=t.presentationTimeline,c=!t.kb||!t.S.Qc,f=t.S.start,l=t.S.duration,h=e,p=null;return{createSegmentIndex:function(){var t=[h(r,i,o),"webm"==a?h(n.c(),n.b,n.a):null];return h=null,Promise.all(t).then(function(t){var e=t[0];t=t[1]||null,e="mp4"==a?ui(e,i,r,s):(new yi).parse(e,t,r,s),u.sb(e,f),p=new ci(e),c&&fi(p,l)})},findSegmentPosition:function(t){return p.find(t)},getSegmentReference:function(t){return p.get(t)}}}function wi(t){return t.Ob}function _i(t,e){var n=gi(t,Si),r=function(t){return[t.B.Ja,t.ca.Ja,t.ja.Ja].filter(Fe.Ga).map(function(t){return Yr.R(t,"SegmentURL")}).reduce(function(t,e){return 0<t.length?t:e}).map(function(e){e.getAttribute("indexRange")&&!t.Fd&&(t.Fd=!0);var n=e.getAttribute("media");return e=Yr.J(e,"mediaRange",Yr.oc,{start:0,end:null}),{cf:n,start:e.start,end:e.end}})}(t),i=ni(t,Si),o=i.Za;0==o&&(o=1);var a=0;if(i.Z?a=i.Z*(o-1):i.N&&0<i.N.length&&(a=i.N[0].start),!(r={Z:i.Z,startTime:a,Za:o,la:i.la,N:i.N,qb:r}).Z&&!r.N&&1<r.qb.length)throw new pt(2,4,4002);if(!r.Z&&!t.S.duration&&!r.N&&1==r.qb.length)throw new pt(2,4,4002);if(r.N&&0==r.N.length)throw new pt(2,4,4002);return o=i=null,t.ja.id&&t.B.id&&(i=e[o=t.ja.id+","+t.B.id]),a=function(t,e,n,r){var i=r.qb.length;r.N&&r.N.length!=r.qb.length&&(i=Math.min(r.N.length,r.qb.length));for(var o=[],a=r.startTime,s=0;s<i;s++){var u=r.qb[s],c=Ve(n,[u.cf]),f=void 0;f=null!=r.Z?a+r.Z:r.N?r.N[s].end:a+t,o.push(new si(s+e,a,f,function(t){return t}.bind(null,c),u.start,u.end)),a=f}return o}(t.S.duration,r.Za,t.B.oa,r),i?(i.Tc(a),o=t.presentationTimeline.Hb(),i.Dc(o-t.S.start)):(t.presentationTimeline.sb(a,t.S.start),i=new ci(a),o&&t.kb&&(e[o]=i)),t.kb&&t.S.Qc||fi(i,t.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,la:r.la}}function Si(t){return t.Ja}function Ei(t,e,n,r){var i=function(t){var e=ri(t,Ti,"initialization");if(!e)return null;var n=t.B.id,r=t.bandwidth||null,i=t.B.oa;return new ai(function(){var t=ei(e,n,null,r,null);return Ve(i,[t])},0,null)}(t),o=ni(t,Ti),a=ri(t,Ti,"media"),s=ri(t,Ti,"index");if(a=(o={Z:o.Z,timescale:o.timescale,Za:o.Za,la:o.la,sd:o.sd,N:o.N,Sc:a,Jb:s}).Jb?1:0,a+=o.N?1:0,0==(a+=o.Z?1:0))throw new pt(2,4,4002);if(1!=a&&(o.Jb&&(o.N=null),o.Z=null),!o.Jb&&!o.Sc)throw new pt(2,4,4002);if(o.Jb){if("mp4"!=(n=t.B.mimeType.split("/")[1])&&"webm"!=n)throw new pt(2,4,4006);if("webm"==n&&!i)throw new pt(2,4,4005);r=ei(o.Jb,t.B.id,null,t.bandwidth||null,null),t=bi(t,e,i,r=Ve(t.B.oa,[r]),0,null,n,o.la)}else o.Z?(r||(t.presentationTimeline.Vc(o.Z),t.presentationTimeline.Wc(t.S.start)),t=function(t,e){var n=t.S.duration,r=e.Z,i=e.Za,o=e.timescale,a=e.Sc,s=t.bandwidth||null,u=t.B.id,c=t.B.oa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0>t||n&&t>=n?null:Math.floor(t/r)},getSegmentReference:function(t){var e=t*r,f=e+r;return n&&(f=Math.min(f,n)),0>f||n&&e>=n?null:new si(t,e,f,function(){var n=ei(a,u,t+i,s,e*o);return Ve(c,[n])},0,null)}}}(t,o)):(a=e=null,t.ja.id&&t.B.id&&(e=n[a=t.ja.id+","+t.B.id]),s=function(t,e){for(var n=[],r=0;r<e.N.length;r++){var i=r+e.Za;n.push(new si(i,e.N[r].start,e.N[r].end,function(t,e,n,r,i,o){return t=ei(t,e,i,n,o),Ve(r,[t]).map(function(t){return t.toString()})}.bind(null,e.Sc,t.B.id,t.bandwidth||null,t.B.oa,i,e.N[r].eg+e.sd),0,null))}return n}(t,o),r=!t.kb||!t.S.Qc,e?(r&&fi(new ci(s),t.S.duration),e.Tc(s),n=t.presentationTimeline.Hb(),e.Dc(n-t.S.start)):(t.presentationTimeline.sb(s,t.S.start),e=new ci(s),a&&t.kb&&(n[a]=e)),r&&fi(e,t.S.duration),t={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e)});return{createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:i,la:o.la}}function Ti(t){return t.Qb}B("shaka.media.InitSegmentReference",ai),ai.prototype.Ac=function(){return this.c()},ai.prototype.createUris=ai.prototype.Ac,ai.prototype.Lc=function(){return this.b},ai.prototype.getStartByte=ai.prototype.Lc,ai.prototype.Kc=function(){return this.a},ai.prototype.getEndByte=ai.prototype.Kc,B("shaka.media.SegmentReference",si),si.prototype.ba=function(){return this.position},si.prototype.getPosition=si.prototype.ba,si.prototype.Mc=function(){return this.startTime},si.prototype.getStartTime=si.prototype.Mc,si.prototype.Ge=function(){return this.endTime},si.prototype.getEndTime=si.prototype.Ge,si.prototype.Ac=function(){return this.c()},si.prototype.createUris=si.prototype.Ac,si.prototype.Lc=function(){return this.b},si.prototype.getStartByte=si.prototype.Lc,si.prototype.Kc=function(){return this.a},si.prototype.getEndByte=si.prototype.Kc,B("shaka.media.SegmentIndex",ci),ci.prototype.destroy=function(){return this.a=null,Promise.resolve()},ci.prototype.destroy=ci.prototype.destroy,ci.prototype.find=function(t){for(var e=this.a.length-1;0<=e;--e){var n=this.a[e];if(t>=n.startTime&&t<n.endTime)return n.position}return this.a.length&&t<this.a[0].startTime?this.a[0].position:null},ci.prototype.find=ci.prototype.find,ci.prototype.get=function(t){return 0==this.a.length?null:0>(t-=this.a[0].position)||t>=this.a.length?null:this.a[t]},ci.prototype.get=ci.prototype.get,ci.prototype.offset=function(t){for(var e=0;e<this.a.length;++e)this.a[e].startTime+=t,this.a[e].endTime+=t},ci.prototype.offset=ci.prototype.offset,ci.prototype.Tc=function(t){for(var e=[],n=0,r=0;n<this.a.length&&r<t.length;){var i=this.a[n],o=t[r];i.startTime<o.startTime?(e.push(i),n++):(i.startTime>o.startTime?0==n&&e.push(o):(.1<Math.abs(i.endTime-o.endTime)?e.push(new si(i.position,o.startTime,o.endTime,o.c,o.b,o.a)):e.push(i),n++),r++)}for(;n<this.a.length;)e.push(this.a[n++]);if(e.length)for(n=e[e.length-1].position+1;r<t.length;)i=new si(n++,(i=t[r++]).startTime,i.endTime,i.c,i.b,i.a),e.push(i);else e=t;this.a=e},ci.prototype.merge=ci.prototype.Tc,ci.prototype.Dc=function(t){for(var e=0;e<this.a.length;++e)if(this.a[e].endTime>t)return void this.a.splice(0,e);this.a=[]},ci.prototype.evict=ci.prototype.Dc,li.prototype.sa=function(){return this.a.sa()},yi.prototype.parse=function(t,e,n,r){var i;if(440786851!=hi(e=new li(new DataView(e))).id)throw new pt(2,3,3008);var o=hi(e);if(408125543!=o.id)throw new pt(2,3,3009);for(e=o.a.byteOffset,o=new li(o.a),i=null;o.sa();){var a=hi(o);if(357149030==a.id){i=a;break}}if(!i)throw new pt(2,3,3010);for(o=new li(i.a),i=1e6,a=null;o.sa();){var s=hi(o);if(2807729==s.id)i=vi(s);else if(17545==s.id)if(4==(a=s).a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new pt(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new pt(2,3,3011);if(i=a*(o=i/1e9),475249515!=(t=hi(new li(new DataView(t)))).id)throw new pt(2,3,3007);return function(t,e,n,r,i,o){function a(){return i}var s=[];t=new li(t.a);for(var u=null,c=null;t.sa();){var f=hi(t);if(187==f.id){var l=mi(f);l&&(f=n*l.fg,l=e+l.Df,null!=u&&s.push(new si(s.length,u-o,f-o,a,c,l-1)),u=f,c=l)}}return null!=u&&s.push(new si(s.length,u-o,r-o,a,c,null)),s}(t,e,o,i,n,r)};var xi={wb:{},Lb:{},ed:function(t,e){xi.Lb[t]=e}};function Ii(t,e,n){this.f=t,this.pc=e,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function ki(t,e,n,r){return t=Dt(t,r),0==e&&null==n||(t.headers.Range=n?"bytes="+e+"-"+n:"bytes="+e+"-"),t}function Ai(){var t=this;this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new K(5),this.i=new ft(function(){!function(t){p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return n=0,T(e,2),S(e,Mi(t),4);case 4:n=e.o,I(e,3);break;case 2:r=k(e),t.a&&(r.severity=1,t.a.onError(r));case 3:if(!t.a)return e.return();Ci(t,n),E(e)}})})}(t)}),this.g=new Mt}function Mi(t){var e=Date.now(),n=t.a.networkingEngine.request(0,Dt(t.f,t.b.retryParameters));return Pt(t.g,n),n.promise.then(function(e){if(t.a)return e.uri&&!t.f.includes(e.uri)&&t.f.unshift(e.uri),function(t,e,n){if(!(e=Yr.Sd(e,"MPD")))throw new pt(2,4,4001,n);return e=oi(e,t.b.retryParameters,t.b.dash.xlinkFailGracefully,n,t.a.networkingEngine),Pt(t.g,e),e.promise.then(function(e){return function(t,e,n){return p(function r(){var i,o,a,s,u,c,f,l,h,p,d,v,y,m,g,b,w,_,T,x,I,k,A;return N(r,function(r){switch(r.j){case 1:s=Fe,c=[n],0<(f=(u=Yr).R(e,"Location").map(u.cc).filter(s.Ga)).length&&(l=Ve(c,f),c=t.f=l),h=u.R(e,"BaseURL").map(u.cc),p=Ve(c,h),d=t.b.dash.ignoreMinBufferTime,v=0,d||(v=u.J(e,"minBufferTime",u.Ba)),t.s=u.J(e,"minimumUpdatePeriod",u.Ba,-1),y=u.J(e,"availabilityStartTime",u.vf),m=u.J(e,"timeShiftBufferDepth",u.Ba),g=u.J(e,"suggestedPresentationDelay",u.Ba),b=u.J(e,"maxSegmentDuration",u.Ba),w=e.getAttribute("type")||"static",t.c?_=t.c.presentationTimeline:(T=Math.max(t.b.dash.defaultPresentationDelay,1.5*v),_=new Ii(y,null!=g?g:T,t.b.dash.autoCorrectDrift));for(var M={kb:"static"!=w,presentationTimeline:_,ja:null,S:null,ca:null,B:null,bandwidth:0,Fd:!1},P=p,R=Yr.J(e,"mediaPresentationDuration",Yr.Ba),O=[],C=0,N=Yr.R(e,"Period"),D=0;D<N.length;D++){var j=N[D];C=Yr.J(j,"start",Yr.Ba,C);var L=Yr.J(j,"duration",Yr.Ba),U=null;if(D!=N.length-1){var z=Yr.J(N[D+1],"start",Yr.Ba);null!=z&&(U=z-C)}else null!=R&&(U=R-C);if(null==U&&(U=L),j=Pi(t,M,P,{start:C,duration:U,node:j,Qc:null==U||D==N.length-1}),O.push(j),L=M.ja.id,t.l.includes(L)||(t.l.push(L),t.c&&(t.a.filterNewPeriod(j),t.c.periods.push(j))),null==U){C=null;break}C+=U}if(null==t.c&&t.a.filterAllPeriods(O),null!=R?(i=O,o=R,a=!1):(i=O,o=C,a=!0),x=o,I=i,_.Rb("static"==w),"static"!=w&&a||_.wa(x||1/0),_.V()&&!isNaN(t.b.availabilityWindowOverride)&&(m=t.b.availabilityWindowOverride),null==m&&(m=1/0),_.md(m),_.Vc(b||1),t.c){r.A(0);break}if(t.c={presentationTimeline:_,periods:I,offlineSessionIds:[],minBufferTime:v||0},!_.he()){r.A(0);break}return k=u.R(e,"UTCTiming"),S(r,function(t,e,n){n=n.map(function(t){return{scheme:t.getAttribute("schemeIdUri"),value:t.getAttribute("value")}});var r=t.b.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),Fe.ye(n,function(t){var n=t.scheme;switch(t=t.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Di(this,e,t,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Di(this,e,t,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(t),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return W("NTP UTCTiming scheme is not supported"),Promise.reject();default:return W("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(t)).catch(function(){return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0})}(t,p,k),4);case 4:if(A=r.o,!t.a)return r.return();_.ce(A),E(r)}})})}(t,e,n)})}(t,e.data,e.uri)}).then(function(){var n=(Date.now()-e)/1e3;return F(t.v,1,n),n})}function Pi(t,e,n,r){if(e.ja=Ni(r.node,null,n),e.S=r,e.ja.id||(e.ja.id="__shaka_period_"+r.start),Yr.R(r.node,"EventStream").forEach(t.wf.bind(t,r.start,r.duration)),n=Yr.R(r.node,"AdaptationSet").map(t.uf.bind(t,e)).filter(Fe.Ga),e.kb){e=[];for(var i=l(n),o=i.next();!o.done;o=i.next())for(var a=(o=l(o.value.Gf)).next();!a.done;a=o.next())e.push(a.value);if(e.length!=new Set(e).size)throw new pt(2,4,4018)}var s=n.filter(function(t){return!t.qd});if(n.filter(function(t){return t.qd}).forEach(function(t){var e=t.streams[0],n=t.qd;s.forEach(function(t){t.id==n&&t.streams.forEach(function(t){t.trickModeVideo=e})})}),e=Ri(s,"video"),i=Ri(s,"audio"),!e.length&&!i.length)throw new pt(2,4,4004);for(i.length||(i=[null]),e.length||(e=[null]),n=[],o=0;o<i.length;o++)for(a=0;a<e.length;a++)Oi(t,i[o],e[a],n);for(t=Ri(s,"text"),e=[],i=0;i<t.length;i++)e.push.apply(e,t[i].streams);return{startTime:r.start,textStreams:e,variants:n}}function Ri(t,e){return t.filter(function(t){return t.contentType==e})}function Oi(t,e,n,r){if(e||n)if(e&&n){var i=e.drmInfos,o=n.drmInfos;if(!i.length||!o.length||0<Re(i,o).length){o=Re(e.drmInfos,n.drmInfos);for(var a=0;a<e.streams.length;a++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(e.streams[a].bandwidth||0),i={id:t.h++,language:e.language,primary:e.Rc||n.Rc,audio:e.streams[a],video:n.streams[s],bandwidth:i,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(o=e||n,a=0;a<o.streams.length;a++)i=o.streams[a].bandwidth||0,i={id:t.h++,language:o.language||"und",primary:o.Rc,audio:e?o.streams[a]:null,video:n?o.streams[a]:null,bandwidth:i,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function Ci(t,e){0>t.s||t.i.O(Math.max(3,t.s-e,V(t.v)))}function Ni(t,e,n){e=e||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Xc:null},n=n||e.oa;var r=Yr.vb,i=Yr.Ae,o=Yr.R(t,"BaseURL").map(Yr.cc),a=t.getAttribute("contentType")||e.contentType,s=t.getAttribute("mimeType")||e.mimeType,u=t.getAttribute("codecs")||e.codecs;i=Yr.J(t,"frameRate",i)||e.frameRate;for(var c=Yr.R(t,"InbandEventStream"),f=e.emsgSchemeIdUris.slice(),h=(c=l(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),f.includes(h)||f.push(h);return c=function(t){for(var e=0;e<t.length;++e){var n=t[e],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(r=parseInt(n,10)))continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(r=parseInt(n,16)){for(t=0;r;)1&r&&++t,r>>=1;return t}}}return null}(c=Yr.R(t,"AudioChannelConfiguration"))||e.Xc,a||(a=ji(s,u)),{oa:Ve(n,o),Ob:Yr.ac(t,"SegmentBase")||e.Ob,Ja:Yr.ac(t,"SegmentList")||e.Ja,Qb:Yr.ac(t,"SegmentTemplate")||e.Qb,width:Yr.J(t,"width",r)||e.width,height:Yr.J(t,"height",r)||e.height,contentType:a,mimeType:s,codecs:u,frameRate:i,emsgSchemeIdUris:f,id:t.getAttribute("id"),Xc:c}}function Di(t,e,n,r){return(e=Dt(e=Ve(e,[n]),t.b.retryParameters)).method=r,e=t.a.networkingEngine.request(4,e),Pt(t.g,e),e.promise.then(function(t){if("HEAD"==r){if(!t.headers||!t.headers.date)return 0;t=t.headers.date}else t=ie(t.data);return t=Date.parse(t),isNaN(t)?0:t-Date.now()})}function ji(t,e){return mn($t(t,e))?"text":t.split("/")[0]}function Li(t,e,n,r){this.b=t,this.type=e,this.a=n,this.segments=r||null}function Ui(t,e,n,r){this.id=t,this.name=e,this.a=n,this.value=void 0===r?null:r}function zi(t,e){this.name=t,this.value=e}function Bi(t,e,n){return(t=t.getAttribute(e))?t.value:n||null}function qi(t,e){this.b=e,this.a=t}B("shaka.media.ManifestParser.registerParserByExtension",xi.ed),xi.Nb=function(t,e){xi.wb[t]=e},B("shaka.media.ManifestParser.registerParserByMime",xi.Nb),xi.Af=function(){var t={};if(Zt()){for(var e in xi.wb)t[e]=!0;for(var n in xi.Lb)t[n]=!0}e={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var r=(n=l(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())t[r=r.value]=Zt()?!!xi.wb[r]:te(r);for(var i in e)t[i]=Zt()?!!xi.Lb[i]:te(e[i]);return t},xi.create=function(t,e,n,r){return p(function i(){var o,a;return N(i,function(i){switch(i.j){case 1:return T(i,2),S(i,xi.He(t,e,n,r),4);case 4:return o=i.o,i.return(new o);case 2:throw(a=k(i)).severity=2,a}})})},xi.He=function(t,e,n,r){return p(function i(){var o,a,s,u,c;return N(i,function(i){switch(i.j){case 1:if(o=xi,r&&(a=o.wb[r.toLowerCase()]))return i.return(a);if((s=o.getExtension(t))&&(u=o.Lb[s]))return i.return(u);if(r){i.A(2);break}return S(i,o.Oe(t,e,n),3);case 3:if((r=i.o)&&(c=xi.wb[r]))return i.return(c);case 2:throw new pt(2,4,4e3,t)}})})},xi.Oe=function(t,e,n){return p(function r(){var i,o,a;return N(r,function(r){switch(r.j){case 1:return(i=Dt([t],n)).method="HEAD",S(r,e.request(0,i).promise,2);case 2:return o=r.o,a=o.headers["content-type"],r.return(a?a.toLowerCase():"")}})})},xi.getExtension=function(t){return 1==(t=new $(t).ia.split("/").pop().split(".")).length?"":t.pop().toLowerCase()},xi.isSupported=function(t,e){return!!Zt()&&(e in xi.wb||xi.getExtension(t)in xi.Lb)},B("shaka.media.PresentationTimeline",Ii),Ii.prototype.Y=function(){return this.g},Ii.prototype.getDuration=Ii.prototype.Y,Ii.prototype.wa=function(t){this.g=t},Ii.prototype.setDuration=Ii.prototype.wa,Ii.prototype.Te=function(){return this.f},Ii.prototype.getPresentationStartTime=Ii.prototype.Te,Ii.prototype.ce=function(t){this.l=t},Ii.prototype.setClockOffset=Ii.prototype.ce,Ii.prototype.Rb=function(t){this.m=t},Ii.prototype.setStatic=Ii.prototype.Rb,Ii.prototype.md=function(t){this.h=t},Ii.prototype.setSegmentAvailabilityDuration=Ii.prototype.md,Ii.prototype.Qf=function(t){this.pc=t},Ii.prototype.setDelay=Ii.prototype.Qf,Ii.prototype.Fe=function(){return this.pc},Ii.prototype.getDelay=Ii.prototype.Fe,Ii.prototype.sb=function(t,e){if(0!=t.length){var n=t[t.length-1].endTime+e;this.Wc(t[0].startTime+e),this.a=t.reduce(function(t,e){return Math.max(t,e.endTime-e.startTime)},this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},Ii.prototype.notifySegments=Ii.prototype.sb,Ii.prototype.Wc=function(t){this.c=null==this.c?t:Math.min(this.c,t)},Ii.prototype.notifyMinSegmentStartTime=Ii.prototype.Wc,Ii.prototype.Vc=function(t){this.a=Math.max(this.a,t)},Ii.prototype.notifyMaxSegmentDuration=Ii.prototype.Vc,Ii.prototype.offset=function(t){null!=this.c&&(this.c+=t),null!=this.b&&(this.b+=t)},Ii.prototype.offset=Ii.prototype.offset,Ii.prototype.V=function(){return 1/0==this.g&&!this.m},Ii.prototype.isLive=Ii.prototype.V,Ii.prototype.Va=function(){return 1/0!=this.g&&!this.m},Ii.prototype.isInProgress=Ii.prototype.Va,Ii.prototype.Hb=function(){if(1/0==this.h)return this.i;var t=this.nb()-this.h;return Math.max(this.i,t)},Ii.prototype.getSegmentAvailabilityStart=Ii.prototype.Hb,Ii.prototype.de=function(t){this.i=t},Ii.prototype.setUserSeekStart=Ii.prototype.de,Ii.prototype.nb=function(){return this.V()||this.Va()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},Ii.prototype.getSegmentAvailabilityEnd=Ii.prototype.nb,Ii.prototype.Gb=function(t){var e=Math.max(this.c,this.i);if(1/0==this.h)return e;var n=this.nb()-this.h;return t=Math.min(n+t,this.za()),Math.max(e,t)},Ii.prototype.getSafeSeekRangeStart=Ii.prototype.Gb,Ii.prototype.mb=function(){return this.Gb(0)},Ii.prototype.getSeekRangeStart=Ii.prototype.mb,Ii.prototype.za=function(){var t=this.V()||this.Va()?this.pc:0;return Math.max(0,this.nb()-t)},Ii.prototype.getSeekRangeEnd=Ii.prototype.za,Ii.prototype.he=function(){return null!=this.f&&null==this.b},Ii.prototype.usingPresentationStartTime=Ii.prototype.he,B("shaka.dash.DashParser",Ai),(n=Ai.prototype).configure=function(t){this.b=t},n.start=function(t,e){var n=this;return p(function r(){var i;return N(r,function(r){switch(r.j){case 1:return n.f=[t],n.a=e,S(r,Mi(n),2);case 2:if(i=r.o,n.a&&Ci(n,i),!n.a)throw new pt(2,7,7001);return r.return(n.c)}})})},n.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){Mi(this).catch(function(t){this.a&&this.a.onError(t)}.bind(this))},n.onExpirationUpdated=function(){},n.uf=function(t,e){t.ca=Ni(e,t.ja,null);var n=!1,r=Yr.R(e,"Role"),i=r.map(function(t){return t.getAttribute("value")}).filter(Fe.Ga),o=void 0,a="text"==t.ca.contentType;a&&(o="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":o=u}}var c=null,f=!1;Yr.R(e,"EssentialProperty").forEach(function(t){"http://dashif.org/guidelines/trickmode"==t.getAttribute("schemeIdUri")?c=t.getAttribute("value"):f=!0}),s=Yr.R(e,"Accessibility");var h=new Map;for(r={},u=(s=l(s)).next();!u.done;r={Db:r.Db},u=s.next()){var p=u.value;u=p.getAttribute("schemeIdUri"),p=p.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(r.Db=1,null!=p?p.split(";").forEach(function(t){return function(e){if(e.includes("=")){var n=(e=e.split("="))[0].startsWith("CC")?e[0]:"CC"+e[0];e=e[1].split(",")[0].split(":").pop()}else n="CC"+t.Db,t.Db+=2;h.set(n,Dn(e))}}(r)):h.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=p&&(i.push(p),"captions"==p&&(o="caption"))}if(f)return null;var d=Jr(r=Yr.R(e,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(r=Dn(e.getAttribute("lang")||"und"),u=e.getAttribute("label"),0==(i=(s=Yr.R(e,"Representation")).map(this.xf.bind(this,t,d,o,r,u,n,i,h)).filter(function(t){return!!t})).length){if(a)return null;throw new pt(2,4,4003)}return t.ca.contentType&&"application"!=t.ca.contentType||(t.ca.contentType=ji(i[0].mimeType,i[0].codecs),i.forEach(function(e){e.type=t.ca.contentType})),i.forEach(function(t){d.drmInfos.forEach(function(e){t.keyId&&e.keyIds.push(t.keyId)})}),a=s.map(function(t){return t.getAttribute("id")}).filter(Fe.Ga),{id:t.ca.id||"__fake__"+this.h++,contentType:t.ca.contentType,language:r,Rc:n,streams:i,drmInfos:d.drmInfos,qd:c,Gf:a}},n.xf=function(t,e,n,r,i,o,a,s,u){if(t.B=Ni(u,t.ca,null),!function(t){var e=t.Ob?1:0;return e+=t.Ja?1:0,0==(e+=t.Qb?1:0)?"text"==t.contentType||"application"==t.contentType:(1!=e&&(t.Ob&&(t.Ja=null),t.Qb=null),!0)}(t.B))return null;t.bandwidth=Yr.J(u,"bandwidth",Yr.nc)||0;var c=t.B.contentType;c="text"==c||"application"==c;try{var f=this.Hf.bind(this);if(t.B.Ob)var l=function(t,e){var n=Number(ri(t,wi,"presentationTimeOffset"))||0,r=ri(t,wi,"timescale"),i=1;r&&(i=Yr.nc(r)||1),n=n/i||0,r=gi(t,wi);var o=t.B.contentType;if(i=t.B.mimeType.split("/")[1],"text"!=o&&"mp4"!=i&&"webm"!=i)throw new pt(2,4,4006);if("webm"==i&&!r)throw new pt(2,4,4005);o=ii(t,wi,"RepresentationIndex");var a=ri(t,wi,"indexRange"),s=t.B.oa;if(a=Yr.oc(a||""),o){var u=o.getAttribute("sourceURL");u&&(s=Ve(t.B.oa,[u])),a=Yr.J(o,"range",Yr.oc,a)}if(!a)throw new pt(2,4,4002);return{createSegmentIndex:(i=bi(t,e,r,s,a.start,a.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,la:n}}(t,f);else if(t.B.Ja)l=_i(t,this.m);else if(t.B.Qb)l=Ei(t,f,this.m,!!this.c);else{var h=t.B.oa,p=t.S.duration||0;l={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0<=t&&t<p?1:null},getSegmentReference:function(t){return 1!=t?null:new si(1,0,p,function(){return h},0,null)},initSegmentReference:null,la:0}}}catch(t){if(c&&4002==t.code)return null;throw t}return u=function(t,e,n,r){var i=Jr(t,e,r);if(n.Ad)t=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,e=0==i.drmInfos.length,(0==n.drmInfos.length||t&&!e)&&(n.drmInfos=i.drmInfos),n.Ad=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(t){return i.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==n.drmInfos.length))throw new pt(2,4,4008);return i.wd||n.wd}(u=Yr.R(u,"ContentProtection"),this.b.dash.customScheme,e,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:t.B.id,createSegmentIndex:l.createSegmentIndex,findSegmentPosition:l.findSegmentPosition,getSegmentReference:l.getSegmentReference,initSegmentReference:l.initSegmentReference,presentationTimeOffset:l.la,mimeType:t.B.mimeType,codecs:t.B.codecs,frameRate:t.B.frameRate,bandwidth:t.bandwidth,width:t.B.width,height:t.B.height,kind:n,encrypted:0<e.drmInfos.length,keyId:u,language:r,label:i,type:t.ca.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.B.emsgSchemeIdUris,roles:a,channelsCount:t.B.Xc,closedCaptions:s}},n.wf=function(t,e,n){var r=Yr.vb,i=n.getAttribute("schemeIdUri")||"",o=n.getAttribute("value")||"",a=Yr.J(n,"timescale",r)||1;Yr.R(n,"Event").forEach(function(n){var s=Yr.J(n,"presentationTime",r)||0,u=Yr.J(n,"duration",r)||0;u=(s=s/a+t)+u/a,null!=e&&(s=Math.min(s,t+e),u=Math.min(u,t+e)),n={schemeIdUri:i,value:o,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.Hf=function(t,e,n){return t=ki(t,e,n,this.b.retryParameters),t=this.a.networkingEngine.request(1,t),Pt(this.g,t),t.promise.then(function(t){return t.data})},xi.ed("mpd",Ai),xi.Nb("application/dash+xml",Ai),Ui.prototype.toString=function(){var t="#"+this.name,e=this.a?this.a.map(function(t){return t.name+"="+(isNaN(Number(t.value))?'"'+t.value+'"':t.value)}):[];return this.value&&e.unshift(this.value),0<e.length&&(t+=":"+e.join(",")),t},Ui.prototype.getAttribute=function(t){var e=this.a.filter(function(e){return e.name==t});return e.length?e[0]:null};var Ki={lb:function(t,e){return t.filter(function(t){return t.name==e})},Ra:function(t,e){var n=Ki.lb(t,e);return n.length?n[0]:null},Hc:function(t,e,n){return t.filter(function(t){var r=t.getAttribute("TYPE");return t=t.getAttribute("GROUP-ID"),r.value==e&&t.value==n})},zc:function(t,e){return Ve([t],[e])[0]},Pc:function(t){return/^#(?!EXT)/m.test(t)}};function Fi(t){this.b=t,this.a=0}function Vi(t){Hi(t,/[ \t]+/gm)}function Hi(t,e){e.lastIndex=t.a;var n=e.exec(t.b);return n=null==n?null:{position:n.index,length:n[0].length,Jf:n},t.a==t.b.length||null==n||n.position!=t.a?null:(t.a+=n.length,n.Jf)}function Gi(t){return t.a==t.b.length?null:(t=Hi(t,/[^ \t\n]*/gm))?t[0]:null}function Wi(){this.a=0}function Xi(t,e,n){var r=(e=(e=ie(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new pt(2,4,4015);e=0;for(var i=1;i<r.length;i++)if(!Ki.Pc(r[i])){var o=$i(t,r[i]);if(--t.a,Ji.includes(o.name)){e=1;break}"EXT-X-STREAM-INF"==o.name&&(i+=1)}for(i=[],o=1;o<r.length;)if(Ki.Pc(r[o]))o+=1;else{var a=$i(t,r[o]);if(Qi.includes(a.name)){if(1!=e)throw new pt(2,4,4017);return new Li(n,e,i,t=Yi(t,n,r=r.splice(o,r.length-o),i))}i.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new zi("URI",r[o])),o+=1)}return new Li(n,e,i)}function Yi(t,e,n,r){var i=[],o=[];return n.forEach(function(n){if(/^(#EXT)/.test(n))n=$i(t,n),Ji.includes(n.name)?r.push(n):o.push(n);else{if(Ki.Pc(n))return[];n=Ki.zc(e,n.trim()),i.push(new qi(n,o)),o=[]}}),i}function $i(t,e){var n=t.a++,r=e.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new pt(2,4,4016,e);var i,o=r[1],a=r[2];if(r=[],a){var s;(s=Hi(a=new Fi(a),/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Hi(a,u);)r.push(new zi(s[1],s[2]||s[3]))}return new Ui(n,o,r,i)}var Ji="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Qi="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Zi(t){try{var e=Zi.parse(t);return gt({uri:t,ad:t,data:e.data,headers:{"content-type":e.contentType}})}catch(t){return yt(t)}}function to(){var t=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new Wi,this.P=0,this.h=new ft(function(){!function(t){p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return t.g?(T(e,2),S(e,t.update(),4)):e.return();case 4:n=t.P,t.h.O(n),I(e,0);break;case 2:(r=k(e)).severity=1,t.g.onError(r),t.h.O(.1),E(e)}})})}(t)}),this.f=_o,this.m=null,this.C=0,this.G=1/0,this.i=new Mt,this.M=[],this.l=new Map,this.W=!1}function eo(t,e){return p(function n(){var r,i,o,a,s,u,c,f,l,h;return N(n,function(n){switch(n.j){case 1:return r=Ki,i=So,o=e.pe,S(n,vo(t,o),2);case 2:if(a=n.o,1!=(s=Xi(t.s,a.data,a.uri)).type)throw new pt(2,4,4017);return c=(u=r.Ra(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,f=e.stream,S(n,co(t,e.tc,s,c,f.mimeType,f.codecs),3);case 3:l=n.o,e.Pb.a=l,h=l[l.length-1],r.Ra(s.a,"EXT-X-ENDLIST")&&(go(t,i.Oa),t.b.wa(h.endTime)),E(n)}})})}function no(t){t.forEach(function(t){var e=t.stream.codecs.split(",");e=e.filter(function(t){return"mp4a.40.34"!=t}),t.stream.codecs=e.join(",")})}function ro(t,e,n,r,i){return{id:t.$++,language:e?e.language:"und",primary:!!e&&e.primary||!!n&&n.primary,audio:e,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function io(t,e,n){return p(function r(){var i,o,a,s,u,c,f,l,h;return N(r,function(r){switch(r.j){case 1:if(i=ho(e,"URI"),t.a.has(i))return r.return(t.a.get(i));if(o=ho(e,"TYPE").toLowerCase(),a=Ge,"subtitles"==o&&(o=a.qa),s=Dn(Bi(e,"LANGUAGE","und")),u=Bi(e,"NAME"),c=e.getAttribute("DEFAULT"),f=e.getAttribute("AUTOSELECT"),l=Bi(e,"CHANNELS"),"audio"==o)if(l){var p=l.split("/")[0];p=parseInt(p,10)}else p=null;else p=null;return S(r,oo(t,i,n,o,s,!!c||!!f,u,p,null),2);case 2:return null==(h=r.o)?r.return(null):t.a.has(i)?r.return(t.a.get(i)):(t.D.set(e.id,h),t.a.set(i,h),r.return(h))}})})}function oo(t,e,n,r,i,o,a,s,u){return p(function c(){var f,h,d,v,y,m,g,b,w,_,E,T,x,I,k,A,M,P,R,O,C,D,j,L,U;return N(c,function(c){switch(c.j){case 1:return h=(f=Ki).zc(t.v,e),v="",S(c,vo(t,h),2);case 2:if(m=c.o,h=m.uri,1!=(d=Xi(t.s,m.data,h)).type)throw new pt(2,4,4017);g=[],d.segments.forEach(function(t){t=f.lb(t.b,"EXT-X-KEY"),g.push.apply(g,t)}),b=!1,w=[],_=null;for(var z=l(g),B=z.next();!B.done;B=z.next())if(E=B.value,"NONE"!=(T=ho(E,"METHOD"))){if(b=!0,"AES-128"==T)return t.W=!0,c.return(null);x=ho(E,"KEYFORMAT"),(k=(I=wo[x])?I(E):null)&&(k.keyIds.length&&(_=k.keyIds[0]),w.push(k))}if(b&&!w.length)throw new pt(2,4,4026);return function(t,e){var n=So,r=Ki.Ra(e.a,"EXT-X-PLAYLIST-TYPE"),i=Ki.Ra(e.a,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?go(t,n.Oa):(go(t,r?n.td:n.ke),n=po(e.a,"EXT-X-TARGETDURATION"),n=Number(n.value),t.C=Math.max(n,t.C),t.G=Math.min(n,t.G))}(t,d),v=function(t,e){if(1==e.length)return e[0];var n=lo(t,e);if(null!=n)return n;throw new pt(2,4,4025,e)}(r,n),S(c,function(t,e,n,r){return p(function i(){var o,a,s,u,c,f,l,h,p,d;return N(i,function(i){switch(i.j){case 1:return o=Ge,a=Ot,s=r.segments[0].a,u=new $(s),c=u.ia.split(".").pop(),f=mo[e],(l=f[c])?i.return(l):e==o.qa?n&&"vtt"!=n?i.return("application/mp4"):i.return("text/vtt"):((h=Dt([s],t.c.retryParameters)).method="HEAD",S(i,bo(t,h,a.ud),2));case 2:if(p=i.o,!(d=p.headers["content-type"]))throw new pt(2,4,4021,c);return i.return(d.split(";")[0])}})})}(t,r,v,d),3);case 3:return y=c.o,M=(A=f.Ra(d.a,"EXT-X-MEDIA-SEQUENCE"))?Number(A.value):0,S(c,co(t,e,d,M,y,v),4);case 4:return P=c.o,R=P[0].startTime,O=P[P.length-1].endTime,C=O-R,D=new ci(P),j=ao(d),L=void 0,"text"==r&&(L="subtitle"),U={id:t.$++,originalId:a,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:D.find.bind(D),getSegmentReference:D.get.bind(D),initSegmentReference:j,presentationTimeOffset:0,mimeType:y,codecs:v,kind:L,encrypted:b,keyId:_,language:i,label:a,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:u},c.return({stream:U,Pb:D,drmInfos:w,tc:e,pe:h,Uc:R,qg:O,duration:C})}})})}function ao(t){var e=Ki.lb(t.a,"EXT-X-MAP");if(!e.length)return null;if(1<e.length)throw new pt(2,4,4020);var n=ho(e=e[0],"URI"),r=Ki.zc(t.b,n);return t=0,n=null,(e=Bi(e,"BYTERANGE"))&&(t=e.split("@"),e=Number(t[0]),n=(t=Number(t[1]))+e-1),new ai(function(){return[r]},t,n)}function so(t,e,n,r){var i=e.b,o=e.a;e=po(i,"EXTINF").value.split(","),e=r+Number(e[0]);var a=0,s=null;return(i=Ki.Ra(i,"EXT-X-BYTERANGE"))&&(a=i.value.split("@"),i=Number(a[0]),s=(a=a[1]?Number(a[1]):t.a+1)+i-1),new si(n,r,e,function(){return[o]},a,s)}function uo(t){t.b&&(t.M.forEach(function(e){t.b.sb(e,0)}),t.M=[])}function co(t,e,n,r,i,o){return p(function a(){var s,u,c,f,l,h,d,v,y,m;return N(a,function(a){switch(a.j){case 1:return s=n.segments,u=[],c=s[0].a,f=so(null,s[0],r,0),l=ao(n),S(a,function(t,e,n,r,i,o){return p(function a(){var s,u,c,f,l,h,p,d,v;return N(a,function(a){switch(a.j){case 1:if(t.m&&(s=t.a.get(e),u=s.Pb,c=u.get(r.position)))return a.return(c.startTime);if("audio/mpeg"==i)return a.return(0);if("video/mp4"!=i&&"audio/mp4"!=i){a.A(2);break}return f=[fo(t,r)],n&&f.push(fo(t,n)),S(a,Promise.all(f),3);case 3:return l=a.o,h=l[0],p=l[1]||l[0],a.return(function(t,e){var n=0;if((new Kr).H("moov",Fr).H("trak",Fr).H("mdia",Fr).fa("mdhd",function(t){t.reader.L(0==t.version?8:16),n=t.reader.F(),t.parser.stop()}).parse(e,!0),!n)throw new pt(2,4,4030);var r=0,i=!1;if((new Kr).H("moof",Fr).H("traf",Fr).fa("tfdt",function(t){r=(0==t.version?t.reader.F():t.reader.yb())/n,i=!0,t.parser.stop()}).parse(t,!0),!i)throw new pt(2,4,4030);return r}(h.data,p.data));case 2:if("video/mp2t"!=i){a.A(4);break}return S(a,fo(t,r),5);case 5:return d=a.o,a.return(function(t){function e(){throw new pt(2,4,4030)}t=new zr(new DataView(t),0);for(var n=0,r=0;;){if(n=t.ba(),71!=(r=t.ka())&&e(),16384&t.Mb()||e(),0!=(r=(48&t.ka())>>4)&&2!=r||e(),3==r&&(r=t.ka(),t.L(r)),1==t.F()>>8)return t.L(3),0!=(n=t.ka()>>6)&&1!=n||e(),0==t.ka()&&e(),n=t.ka(),r=t.Mb(),t=t.Mb(),(1073741824*((14&n)>>1)+((65534&r)<<14|(65534&t)>>1))/9e4;t.seek(n+188),71!=(r=t.ka())&&(t.seek(n+192),r=t.ka()),71!=r&&(t.seek(n+204),r=t.ka()),71!=r&&e(),t.$d(1)}}(d.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){a.A(6);break}return S(a,fo(t,r),7);case 7:return v=a.o,a.return(function(t,e,n){return mn(t=$t(t,e))?(gn(e=new vn(null),t),e.Mc(n)):0}(i,o,v.data));case 6:if("video/webm"==i)return a.return(null);throw new pt(2,4,4030)}})})}(t,e,l,f,i,o),2);case 2:h=a.o,c.split("/").pop();for(var g=0;g<s.length;++g)d=s[g],v=u[u.length-1],y=0==g?h:v.endTime,m=so(v,d,r+g,y),u.push(m);return t.M.push(u),uo(t),a.return(u)}})})}function fo(t,e){return p(function n(){var r,i,o,a,s,u;return N(n,function(n){switch(n.j){case 1:return r=Ot,i=ki(e.c(),e.b,e.b+2048-1,t.c.retryParameters),o=ki(e.c(),e.b,e.a,t.c.retryParameters),T(n,2),S(n,bo(t,i,r.ud),4);case 4:return a=n.o,n.return(a);case 2:if(7001==(s=k(n)).code)throw s;return W("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),S(n,bo(t,o,r.ud),5);case 5:return u=n.o,n.return(u)}})})}function lo(t,e){for(var n=yo[t],r=0;r<n.length;r++)for(var i=0;i<e.length;i++)if(n[r].test(e[i].trim()))return e[i].trim();return"text"==t?"":null}function ho(t,e){var n=t.getAttribute(e);if(!n)throw new pt(2,4,4023,e);return n.value}function po(t,e){var n=Ki.Ra(t,e);if(!n)throw new pt(2,4,4024,e);return n}function vo(t,e){return bo(t,Dt([e],t.c.retryParameters),Ot.ng)}B("shaka.net.DataUriPlugin",Zi),Zi.parse=function(e){var n=e.split(":");if(2>n.length||"data"!=n[0])throw new pt(2,1,1004,e);if(2>(n=n.slice(1).join(":").split(",")).length)throw new pt(2,1,1004,e);var r=n[0];n=t.decodeURIComponent(n.slice(1).join(","));var i=null;if(1<(r=r.split(";")).length&&(i=r[1]),"base64"==i)e=he(n).buffer;else{if(i)throw new pt(2,1,1005,e);e=se(n)}return{data:e,contentType:r[0]}},Nt("data",Zi),B("shaka.hls.HlsParser",to),(n=to.prototype).configure=function(t){this.c=t},n.start=function(t,e){var n=this;return p(function r(){var i,o;return N(r,function(r){switch(r.j){case 1:return n.g=e,S(r,vo(n,t),2);case 2:return i=r.o,n.v=i.uri,S(r,function(t,e){return p(function n(){var r,i,o,a,s,u,c,f,h,d,v;return N(n,function(n){switch(n.j){case 1:if(0!=(r=Xi(t.s,e,t.v)).type)throw new pt(2,4,4022);return S(n,function(t,e){return p(function n(){var r,i,o,a,s,u,c,f,h,d,v,y;return N(n,function(n){switch(n.j){case 1:return r=Ki,i=Fe,o=e.a,a=r.lb(e.a,"EXT-X-MEDIA"),s=a.filter(function(t){return"SUBTITLES"==ho(t,"TYPE")}.bind(t)),u=s.map(function(t){var e=this;return p(function n(){var r;return N(n,function(n){switch(n.j){case 1:return T(n,2),S(n,function(t,e){return p(function n(){var r;return N(n,function(n){switch(n.j){case 1:return ho(e,"TYPE"),S(n,io(t,e,[]),2);case 2:return r=n.o,n.return(r.stream)}})})}(e,t),4);case 4:return n.return(n.o);case 2:if(r=k(n),e.c.hls.ignoreTextStreamFailures)return n.return(null);throw r}})})}.bind(t)),c=a.filter(function(t){return"CLOSED-CAPTIONS"==ho(t,"TYPE")}),function(t,e){for(var n=l(e),r=n.next();!r.done;r=n.next()){ho(r=r.value,"TYPE");var i=Bi(r,"LANGUAGE")||"und";i=Dn(i);var o=ho(r,"GROUP-ID");r=ho(r,"INSTREAM-ID"),t.l.get(o)||t.l.set(o,new Map),t.l.get(o).set(r,i)}}(t,c),S(n,Promise.all(u),2);case 2:return f=n.o,h=r.lb(o,"EXT-X-STREAM-INF"),d=h.map(function(t){return function(t,e,n){return p(function r(){var i,o,a,s,u,c,f,h,d,v,y,m,g,b,w,_,E,T,x,I,k,A,M,P,R,O,C;return N(r,function(r){switch(r.j){case 1:return i=Ge,o=Ki,a=Bi(e,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(t){for(var e=new Set,n=[],r=(t=l(t)).next();!r.done;r=t.next()){var i=Jt(r=r.value)[0];e.has(i)||(n.push(r),e.add(i))}return n}(a.split(/\s*,\s*/)),u=e.getAttribute("RESOLUTION"),f=c=null,h=Bi(e,"FRAME-RATE"),d=Number(ho(e,"BANDWIDTH")),u&&(v=u.value.split("x"),c=v[0],f=v[1]),y=(y=(y=o.lb(n.a,"EXT-X-MEDIA")).filter(function(t){return"CLOSED-CAPTIONS"!=ho(t,"TYPE")})).filter(function(t){var e=Bi(t,"URI")||"";return"SUBTITLES"==(Bi(t,"TYPE")||"")||""!=e}),m=Bi(e,"AUDIO"),g=Bi(e,"VIDEO"),m?y=o.Hc(y,"AUDIO",m):g&&(y=o.Hc(y,"VIDEO",g)),(b=lo(i.qa,s))&&((w=Bi(e,"SUBTITLES"))&&((_=o.Hc(y,"SUBTITLES",w)).length&&(E=t.D.get(_[0].id))&&(E.stream.codecs=b)),kt(s,b)),T=y.map(function(t){return io(this,t,s)}.bind(t)),x=[],I=[],S(r,Promise.all(T),2);case 2:if(A=(A=r.o).filter(function(t){return null!=t}),m?x=A:g&&(I=A),P=!1,x.length||I.length?x.length?(O=ho(e,"URI"),C=x[0].tc,O==C?(M=i.Ab,P=!0):M=i.Na):M=i.Ab:1==s.length?(R=lo(i.Na,s),M=u||h||R?i.Na:i.Ab):(M=i.Na,s=[s.join(",")]),P){r.A(3);break}return S(r,function(t,e,n,r){return p(function i(){var o,a,s,u,c;return N(i,function(i){switch(i.j){case 1:return o=Ge,a=ho(e,"URI"),t.a.has(a)?i.return(t.a.get(a)):(s=Bi(e,"CLOSED-CAPTIONS"),u=null,r==o.Na&&s&&"NONE"!=s&&(u=t.l.get(s)),S(i,oo(t,a,n,r,"und",!1,null,null,u),2));case 2:return null==(c=i.o)?i.return(null):t.a.has(a)?i.return(t.a.get(a)):(t.a.set(a,c),i.return(c))}})})}(t,e,s,M),4);case 4:k=r.o;case 3:if(k)k.stream.type==i.Ab?x=[k]:I=[k];else if(null===k)return r.return([]);return I&&no(I),x&&no(x),r.return(function(t,e,n,r,i,o,a){n.forEach(function(t){(t=t.stream)&&(t.width=Number(i)||void 0,t.height=Number(o)||void 0,t.frameRate=Number(a)||void 0)}.bind(t)),e.length||(e=[null]),n.length||(n=[null]);for(var s=[],u=(e=l(e)).next();!u.done;u=e.next()){u=u.value;for(var c=l(n),f=c.next();!f.done;f=c.next()){var h=f.value;f=u?u.stream:null;var p=h?h.stream:null,d=u?u.drmInfos:null,v=h?h.drmInfos:null;h=(h?h.tc:"")+" - "+(u?u.tc:"");var y=void 0;if(f&&p){if(d.length&&v.length&&!(0<Re(d,v).length))continue;y=Re(d,v)}else f?y=d:p&&(y=v);t.T.has(h)||(f=ro(t,f,p,r,y),s.push(f),t.T.add(h))}}return s}(t,x,I,d,c,f,h))}})})}(this,t,e)}.bind(t)),S(n,Promise.all(d),3);case 3:return v=n.o,y=(y=v.reduce(i.yc,[])).filter(function(t){return null!=t}),n.return({startTime:0,variants:y,textStreams:f.filter(function(t){return null!=t})})}})})}(t,r),2);case 2:if(i=n.o,!t.g)throw new pt(2,7,7001);if(t.W&&0==i.variants.length)throw new pt(2,4,4034);t.g.filterAllPeriods([i]),o=1/0,a=0,s=1/0;for(var y=l(t.a.values()),m=y.next();!m.done;m=y.next())u=m.value,o=Math.min(o,u.Uc),a=Math.max(a,u.Uc),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(t.f!=So.Oa?(t.b=new Ii(0,3*t.C),t.b.Rb(!1)):(t.b=new Ii(null,0),t.b.Rb(!0)),uo(t),t.f!=So.Oa){for(t.P=t.G,c=So,t.f==c.td&&(f=t.b.pc,isNaN(t.c.availabilityWindowOverride)||(f=t.c.availabilityWindowOverride),t.b.md(f)),h=0;95443.7176888889<=a;)h+=95443.7176888889,a-=95443.7176888889;if(h)for(y=l(t.a.values()),m=y.next();!m.done;m=y.next())95443.7176888889>(d=m.value).Uc&&(d.stream.presentationTimeOffset=-h,d.Pb.offset(h))}else for(t.b.wa(s),t.b.offset(-o),y=l(t.a.values()),m=y.next();!m.done;m=y.next())(v=m.value).stream.presentationTimeOffset=o,v.Pb.offset(-o),fi(v.Pb,s);t.m={presentationTimeline:t.b,periods:[i],offlineSessionIds:[],minBufferTime:0},E(n)}})})}(n,i.data),3);case 3:return 0<(o=n.P)&&n.h.O(o),r.return(n.m)}})})},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var t=[];return this.i&&(t.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(t)},n.update=function(){if(this.f!=So.Oa){for(var t=[],e=l(this.a.values()),n=e.next();!n.done;n=e.next())t.push(eo(this,n.value));return Promise.all(t)}},n.onExpirationUpdated=function(){};var yo={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},mo={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function go(t,e){t.f=e,t.b&&t.b.Rb(t.f==So.Oa),t.f!=So.Oa||t.h.stop()}function bo(t,e,n){if(!t.i)throw new pt(2,7,7001);return e=t.g.networkingEngine.request(n,e),Pt(t.i,e),e.promise}var wo={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(t){var e=ho(t,"METHOD");return nr("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(e)?(e=ho(t,"URI"),e=Zi.parse(e),e=He("com.widevine.alpha",[{initDataType:"cenc",initData:e=new Uint8Array(e.data)}]),(t=Bi(t,"KEYID"))&&(e.keyIds=[t.substr(2).toLowerCase()]),e):null}},_o="VOD",So={Oa:_o,ke:"EVENT",td:"LIVE"};function Eo(){this.a=new Map}function To(t,e,n){xo(t,e).text=n}function xo(t,e){return t.a.has(e)||t.a.set(e,new Io),t.a.get(e)}function Io(){this.text=this.variant=null}function ko(t,e){this.a=t,this.b=new Set([t]);for(var n=l(e=e||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function Ao(t,e){var n;if(!(n=!!t.audio!=!!e.audio||!!t.video!=!!e.video||t.language!=e.language)&&(n=t.audio&&e.audio)){n=t.audio;var r=e.audio;n=!(n.channelsCount==r.channelsCount&&Mo(n,r)&&Po(n.roles,r.roles))}return!n&&(n=t.video&&e.video)&&(n=!(Mo(n=t.video,r=e.video)&&Po(n.roles,r.roles))),!n}function Mo(t,e){if(t.mimeType!=e.mimeType)return!1;var n=t.codecs.split(",").map(function(t){return Jt(t)[0]}),r=e.codecs.split(",").map(function(t){return Jt(t)[0]});if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function Po(t,e){var n=new Set(t),r=new Set(e);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=l(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Ro(t){this.a=t,this.b=new Oo(t.language,"",t.audio&&t.audio.channelsCount?t.audio.channelsCount:0)}function Oo(t,e,n){this.c=t,this.b=e,this.a=n}function Co(t,e){this.a=Do,this.b=(new Map).set(Do,e).set(No,t)}xi.ed("m3u8",to),xi.Nb("application/x-mpegurl",to),xi.Nb("application/vnd.apple.mpegurl",to),ko.prototype.add=function(t){return!!Ao(this.a,t)&&(this.b.add(t),!0)},ko.prototype.values=function(){return this.b.values()},Ro.prototype.create=function(t){var e=this,n=t.filter(function(t){return Ao(e.a,t)});return n.length?new ko(n[0],n):this.b.create(t)},Oo.prototype.create=function(t){var e=[];e=function(t,e){var n=Ln(Dn(e),t.map(function(t){return jn(t)}));return n?t.filter(function(t){return n==jn(t)}):[]}(t,this.c);var n=t.filter(function(t){return t.primary});for(e=e.length?e:n.length?n:t,this.b&&((t=function(t,e){return t.filter(function(t){var n=t.audio;return t=t.video,n&&0<=n.roles.indexOf(e)||t&&0<=t.roles.indexOf(e)})}(e,this.b)).length&&(e=t)),this.a&&((t=Yn(e,this.a)).length&&(e=t)),t=new ko(e[0]),n=(e=l(e)).next();!n.done;n=e.next())n=n.value,Ao(t.a,n)&&t.add(n);return t};var No=0,Do=1;function jo(t,e){this.f=t,this.g=Uo(t),this.b=t.a.currentTime,this.c=Date.now()/1e3,this.h=e,this.a=function(){}}function Lo(t){this.a=t}function Uo(t){if(t.a.paused||0==t.a.playbackRate||null==t.a.buffered)var e=!1;else t:{e=t.a.buffered,t=t.a.currentTime;for(var n=0;n<e.length;n++){var r=e.start(n),i=e.end(n);if(!(t<r||t>i-.5)){e=!0;break t}}e=!1}return e}function zo(t,e,n,r,i){var o=this;this.a=t,this.v=e,this.s=n,this.l=i,this.f=new Kt,this.i=!1,this.m=t.readyState,this.c=!1,this.b=r,this.h=!1,this.f.w(t,"waiting",function(){return Bo(o)}),this.g=new ft(function(){Bo(o)}).La(.25)}function Bo(t){if(0!=t.a.readyState){if(t.a.seeking){if(!t.i)return}else t.i=!1;if(!t.a.paused){t.a.readyState!=t.m&&(t.c=!1,t.m=t.a.readyState);var e=t.s.smallGapLimit,n=t.a.currentTime,r=t.a.buffered;t:{if(r&&r.length&&!(1==r.length&&1e-6>r.end(0)-r.start(0)))for(var i=ee("Edge/")||ee("Trident/")||ee("Tizen")||ee("CrKey")?.5:.1,o=0;o<r.length;o++)if(r.start(o)>n&&(0==o||r.end(o-1)-n<=i)){i=o;break t}i=null}if(null==i)t.b&&(r=Uo(n=(t=t.b).f),n=n.a.currentTime,i=Date.now()/1e3,t.b==n&&t.g==r||(t.c=i,t.b=n,t.g=r),(n=i-t.c)>=t.h&&r&&t.a(t.b,n));else if(0!=i||t.h){o=r.start(i);var a=t.v.za();if(!(o>=a)){e=(a=o-n)<=e;var s=!1;.001>a||(e||t.c||(t.c=!0,(n=new St("largegap",{currentTime:n,gapSize:a})).cancelable=!0,t.l(n),t.s.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!e&&!s)||(0!=i&&r.end(i-1),t.a.currentTime=o)}}}}}function qo(t){var e=this;this.c=t,this.a=new Set,this.b=new ft(function(){Ko(e,!1)}).La(.25)}function Ko(t,e){for(var n=l(t.a),r=n.next();!r.done;r=n.next())r.value.g(t.c.currentTime,e)}function Fo(t){for(var e=[],n=(t=l(t)).next();!n.done;n=t.next())for(var r=(n=l(n.value.variants)).next();!r.done;r=n.next())e.push(r.value);return e}function Vo(t,e){for(var n=null,r=l(t),i=r.next();!i.done;i=r.next())e>=(i=i.value).startTime&&(n=i);return n}function Ho(t){this.c=t,this.a=null,this.b=function(){}}function Go(t){var e=this;this.a=t,this.f=!1,this.c=this.a.ec(),this.b=new ft(function(){e.a.Id(.25*e.c)})}function Wo(t){t.b.stop();var e=t.f?0:t.c;if(0<=e)try{return void(t.a.ec()!=e&&t.a.ld(e))}catch(t){}t.b.La(.25),0!=t.a.ec()&&t.a.ld(0)}function Xo(t,e,n){this.a=t,this.f=e,this.g=n,this.h=!1,this.b=new Kt,this.c=new Zo(t),0<t.readyState?Jo(this,n):$o(this,n)}function Yo(t){return t.h?t.a.currentTime:t.g}function $o(t,e){t.g=e,t.b.ea(t.a,"loadedmetadata"),t.b.da(t.a,"loadedmetadata",function(){Jo(t,e)})}function Jo(t,e){.001>Math.abs(t.a.currentTime-e)?Qo(t):(t.b.da(t.a,"seeking",function(){Qo(t)}),ta(t.c,0==t.a.currentTime?e:t.a.currentTime))}function Qo(t){t.h=!0,t.b.w(t.a,"seeking",function(){return t.f()})}function Zo(t){var e=this;this.b=t,this.h=10,this.g=this.f=this.c=0,this.a=new ft(function(){0>=e.c?e.a.stop():e.b.currentTime!=e.f?e.a.stop():(e.b.currentTime=e.g,e.c--)})}function ta(t,e){t.f=t.b.currentTime,t.g=e,t.c=t.h,t.b.currentTime=e,t.a.La(.1)}function ea(t){function e(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",function(){n.f=!0}),n.a.currentTime=n.c)}var n=this;this.a=t,this.f=!1,this.c=null,this.b=new Kt,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",e):e()}function na(t,e,n,r,i,o){var a=this;this.b=t,this.a=e.presentationTimeline,this.C=e.minBufferTime||0,this.g=n,this.v=i,this.l=null,this.f=new zo(t,e.presentationTimeline,n,function(t,e){if(!e.stallEnabled)return null;var n=e.stallSkip,r=new jo(new Lo(t),e.stallThreshold);return function(t,e){t.a=e}(r,function(){t.currentTime+=n}),r}(t,n),o),this.c=new Xo(t,function(){var t=a.f;t.i=!0,t.h=!1,t.c=!1;var e=Yo(a.c);return t=ia(a,e),.001<Math.abs(t-e)&&(e=(new Date).getTime()/1e3,!a.l||a.l<e-1)?(a.l=e,0<(e=a.c).a.readyState?ta(e.c,t):$o(e,t),t=void 0):(a.v(),t=void 0),t},function(t,e){return null==e?e=1/0>t.a.Y()?t.a.mb():t.a.za():0>e&&(e=t.a.za()+e),ra(t,oa(t,e))}(this,r)),this.i=new ft(function(){if(0!=a.b.readyState&&!a.b.paused){var t=a.b.currentTime,e=a.a.mb(),n=a.a.za();3>n-e&&(e=n-3),t<e&&(t=ia(a,t),a.b.currentTime=t)}}).La(.25)}function ra(t,e){var n=t.a.Y();return e>=n?n-t.g.durationBackoff:e}function ia(t,e){var n=Be.bind(null,t.b.buffered),r=Math.max(t.C,t.g.rebufferingGoal),i=t.g.safeSeekOffset,o=t.a.mb(),a=t.a.za(),s=t.a.Y();3>a-o&&(o=a-3);var u=t.a.Gb(r),c=t.a.Gb(i);return r=t.a.Gb(r+i),e>=s?ra(t,e):e>a?a:e<o?n(c)?c:r:e>=u||n(e)?e:r}function oa(t,e){var n=t.a.mb();return e<n?n:e>(n=t.a.za())?n:e}function aa(){this.b=function(){},this.a=new Set}function sa(t){var e=this;this.h=t,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{bb:null,ab:ca,Ua:function(t,n){return e.a(t,n)}},{bb:ua,ab:ca,Ua:function(t,n){return e.a(t,n)}},{bb:fa,ab:ca,Ua:function(t,n){return e.a(t,n)}},{bb:ca,ab:ua,Ua:function(t,n){return e.b(t,n)}},{bb:ca,ab:fa,Ua:function(t,n){return e.b(t,n)}},{bb:ua,ab:fa,Ua:function(t,n){return e.c(t,n)}},{bb:fa,ab:ua,Ua:function(t,n){return e.c(t,n)}}]}jo.prototype.release=function(){this.f=null,this.a=function(){}},zo.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},zo.prototype.Zc=function(){this.h=!0,Bo(this)},qo.prototype.release=function(){this.b.stop();for(var t=l(this.a),e=t.next();!e.done;e=t.next())e.value.release();this.a.clear()},Ho.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ho.prototype.g=function(t){var e=this.a,n=this.c.periods;e!=(t=Vo(n,t)||n[0])&&this.b(t),this.a=t},Go.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Go.prototype.set=function(t){this.c=t,Wo(this)},Xo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Zo.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},ea.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},ea.prototype.m=function(t){this.c=this.f?this.c:t},ea.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},ea.prototype.s=function(){},na.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},na.prototype.m=function(t){var e=this.c;0<e.a.readyState?ta(e.c,t):$o(e,t)},na.prototype.h=function(){var t=Yo(this.c);return 0<this.b.readyState&&!this.b.paused?oa(this,t):t},na.prototype.s=function(){this.f.Zc()},aa.prototype.release=function(){this.b=function(){},this.a.clear()},sa.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},sa.prototype.g=function(t,e){for(var n=l(this.h.a),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.f.get(r),o=t<r.startTime?ua:t>r.endTime?fa:ca;this.f.set(r,o);for(var a=l(this.i),s=a.next();!s.done;s=a.next())(s=s.value).bb==i&&s.ab==o&&s.Ua(r,e)}};var ua=1,ca=2,fa=3;function la(t,e){this.a=e,this.c=t,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.G=null,this.D=this.f=this.m=!1,this.C=0}function ha(t){return da(t,"audio")}function pa(t){return da(t,"video")}function da(t,e){var n=t.b.get(e);return n?n.Ia||n.stream:null}function va(t,e){return p(function n(){var r,i,o,a,s,u,c,f,l;return N(n,function(n){switch(n.j){case 1:return r=Ge,S(n,Mn(t.a.I,r.qa),2);case 2:return t.C++,t.D=!1,i=t.C,o=t.a.I,a=new Map,s=new Set,a.set(r.qa,e),s.add(e),S(n,o.init(a,!1),3);case 3:return t.f?n.return():S(n,Ea(t,s),4);case 4:if(t.f)return n.return();u=t.a.I.g.isTextVisible()||t.g.alwaysStreamText,t.C!=i||t.b.has(r.qa)||t.D||!u||(c=t.a.Sa(),f=Pa(t,c),l=_a(e,f,0),t.b.set(r.qa,l),Na(t,l,0)),E(n)}})})}function ya(t,e){var n=t.b.get("video");if(n){var r=n.stream;if(r)if(e){var i=r.trickModeVideo;i&&!n.Ia&&(ga(t,i,!1,0,!1),n.Ia=r)}else(r=n.Ia)&&(n.Ia=null,ga(t,r,!0,0,!1))}}function ma(t,e,n,r){e.video&&ga(t,e.video,n,r,!1),e.audio&&ga(t,e.audio,n,r,!1)}function ga(t,e,n,r,i){var o=t.b.get(e.type);if(!o&&"text"==e.type&&t.g.ignoreTextStreamFailures)va(t,e);else if(o){var a=Ra(t,e),s=Array.from(t.b.values()).every(function(t){return t.pa==o.pa});n&&a!=o.pa&&s?t.b.forEach(function(e){ba(t,e)}):(o.Ia&&(e.trickModeVideo?(o.Ia=e,e=e.trickModeVideo):o.Ia=null),(s=t.h[a])&&s.zb&&(s=t.i.get(e.id))&&s.zb&&(o.stream!=e||i)&&("text"==e.type&&En(t.a.I,$t(e.mimeType,e.codecs)),o.stream=e,o.hc=!0,function(t,e,n){if(!e.Kb)return!1;var r=t.a.Sa(),i=In(t.a.I,e.type);if(null==(n=(n=Ia(t,e,r,i,n))&&n.a?n.a-n.b:null))return!1;var o=e.stream.initSegmentReference;return o&&(n+=(o.a?o.a-o.b:null)||0),o=t.a.getBandwidthEstimate(),8*n/o<i-r-Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal)||e.Kb.b.a>n}(t,o,a)&&o.Kb.abort(),n&&(o.Pa?o.uc=!0:o.Ha?(o.Ma=!0,o.Zb=r,o.uc=!0):(Da(o),Ca(t,o,!0,r).catch(function(e){t.a&&t.a.onError(e)})))))}}function ba(t,e){e.Pa||e.Ma||(e.Ha?(e.Ma=!0,e.Zb=0):null==xn(t.a.I,e.type)?null==e.Da&&Na(t,e,0):(Da(e),Ca(t,e,!1,0).catch(function(e){t.a&&t.a.onError(e)})))}function wa(t,e,n,r,i){return p(function o(){var a,s,u,c,f,l,h;return N(o,function(o){switch(o.j){case 1:return a=t.a.Sa(),s=Pa(t,a),u=Ge,c=new Map,f=new Set,e&&(c.set(u.Ab,e),f.add(e)),n&&(c.set(u.Na,n),f.add(n)),r&&(c.set(u.qa,r),f.add(r)),l=t.a.I,h=t.g.forceTransmuxTS,S(o,l.init(c,h),2);case 2:return t.f?o.return():(function(t){var e=t.c.presentationTimeline.Y();1/0>e?t.a.I.wa(e):t.a.I.wa(Math.pow(2,32))}(t),S(o,Ea(t,f),3));case 3:if(t.f)return o.return();c.forEach(function(e,n){if(!t.b.has(n)){var r=_a(e,s,i);t.b.set(n,r),Na(t,r,0)}}),E(o)}})})}function _a(t,e,n){return{stream:t,type:t.type,pb:null,Aa:null,Ia:null,hc:!0,pa:e,endOfStream:!1,Ha:!1,Da:null,Ma:!1,Zb:0,uc:!1,Pa:!1,dd:!1,Ib:!1,Zd:n||0,Kb:null}}function Sa(t,e){var n=t.h[e];if(n)return n.promise;n={promise:new dt,zb:!1},t.h[e]=n;for(var r=new Set,i=l(t.c.periods[e].variants),o=i.next();!o.done;o=i.next())(o=o.value).video&&r.add(o.video),o.video&&o.video.trickModeVideo&&r.add(o.video.trickModeVideo),o.audio&&r.add(o.audio);for(o=(i=l(t.c.periods[e].textStreams)).next();!o.done;o=i.next())r.add(o.value);return t.v=t.v.then(function(){if(!this.f)return Ea(this,r)}.bind(t)).then(function(){this.f||(this.h[e].promise.resolve(),this.h[e].zb=!0)}.bind(t)).catch(function(t){this.f||(this.h[e].promise.catch(function(){}),this.h[e].promise.reject(),delete this.h[e],this.a.onError(t))}.bind(t)),n.promise}function Ea(t,e){return p(function n(){var r,i,o,a,s,u,c;return N(n,function(n){switch(n.j){case 1:r=[];for(var f=l(e),h=f.next();!h.done;h=f.next())i=h.value,(o=t.i.get(i.id))?r.push(o.promise):(t.i.set(i.id,{promise:new dt,zb:!1}),r.push(i.createSegmentIndex()));return T(n,2),S(n,Promise.all(r),4);case 4:if(t.f)return n.return();I(n,3);break;case 2:if(a=k(n),t.f)return n.return();for(h=(n=l(e)).next();!h.done;h=n.next())s=h.value,t.i.get(s.id).promise.catch(function(){}),t.i.get(s.id).promise.reject(),t.i.delete(s.id);throw a;case 3:for(h=(f=l(e)).next();!h.done;h=f.next())u=h.value,(c=t.i.get(u.id)).zb||(c.promise.resolve(),c.zb=!0);E(n)}})})}function Ta(t,e){if(!t.f&&!e.Ha&&null!=e.Da&&!e.Pa)if(e.Da=null,e.Ma)Ca(t,e,e.uc,e.Zb);else{try{var n=function(t,e){if(Aa(e))return t.a.I.rc(e.stream.originalId||""),null;var n=t.a.Sa(),r=xa(t,e,n),i=Ra(t,e.stream),o=Pa(t,r),a=function(t,e,n){return"text"==e?null==(t=t.a).b||t.b<n?0:t.b-Math.max(n,t.a):qe(t=kn(t,e),n)}(t.a.I,e.type,n),s=Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal,t.g.bufferingGoal)*t.l;if(r>=t.c.presentationTimeline.Y())return e.endOfStream=!0,"video"==e.type&&(r=t.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(e.endOfStream=!1,e.pa=o,o!=i)return null;if(a>=s)return.5;if(o=In(t.a.I,e.type),!(o=Ia(t,e,n,o,i)))return 1;var u=1/0;return Array.from(t.b.values()).forEach(function(e){Aa(e)||(e=xa(t,e,n),u=Math.min(u,e))}),r>=u+t.c.presentationTimeline.a?1:(e.Zd=0,function(t,e,n,r,i){var o=t.c.periods[r],a=e.stream,s=t.c.presentationTimeline.Y(),u=t.c.periods[r+1];r=function(t,e,n,r,i){return e.hc?(n=function(t,e,n,r,i){return"text"==e?(t.a.m=n,(t=t.a).f=r,t.h=i,Promise.resolve()):Promise.all([Pn(t,e,t.oe.bind(t,e)),Pn(t,e,t.Sf.bind(t,e,n)),Pn(t,e,t.Pf.bind(t,e,r,i))])}(t.a.I,e.type,t.c.periods[n].startTime-e.stream.presentationTimeOffset,r,i),e.stream.initSegmentReference?(t=Oa(t,e,e.stream.initSegmentReference).then(function(t){if(!this.f)return An(this.a.I,e.type,t,null,null,e.stream.closedCaptions&&0<e.stream.closedCaptions.size)}.bind(t)).catch(function(t){return e.hc=!0,Promise.reject(t)}),Promise.all([n,t])):n):Promise.resolve()}(t,e,r,Math.max(0,o.startTime-.1),u?u.startTime+.01:s),e.Ha=!0,e.hc=!1,s=Oa(t,e,i),Promise.all([r,s]).then(function(t){if(!this.f&&!this.m)return function(t,e,n,r,i,o,a){var s=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Kr).fa("emsg",t.M.bind(t,r,o,i.emsgSchemeIdUris)).parse(a),function(t,e,n){var r=Math.max(t.g.bufferBehind,t.c.presentationTimeline.a),i=xn(t.a.I,e.type);return null==i?Promise.resolve():0>=(n=n-i-r)?Promise.resolve():t.a.I.remove(e.type,i,i+n).then(function(){}.bind(t))}(t,e,n).then(function(){if(!this.f)return An(this.a.I,e.type,a,o.startTime+r.startTime,o.endTime+r.startTime,s)}.bind(t)).then(function(){if(!this.f)return e.pb=i,e.Aa=o,Promise.resolve()}.bind(t))}(this,e,n,o,a,i,t[1])}.bind(t)).then(function(){this.f||this.m||(e.Ha=!1,e.dd=!1,e.Ma||this.a.Zc(),Na(this,e,0),function(t,e){if(!t.s){var n=Array.from(t.b.values());if(1==n.length&&"text"==n[0].type||(t.s=n.every(function(t){return"text"==t.type||!t.Ma&&!t.Pa&&t.Aa})),t.s){for(n=Ra(t,e),t.h[n]||Sa(t,n).then(function(){this.f||this.a.Kd()}.bind(t)).catch(Fe.ic),n=0;n<t.c.periods.length;++n)Sa(t,n).catch(Fe.ic);t.a.sf&&t.a.sf()}}}(this,a))}.bind(t)).catch(function(t){this.f||this.m||(e.Ha=!1,"text"==e.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==t.code?(e.Ha=!1,e.Da=null,Na(this,e,0)):3017==t.code?function(t,e,n){if(!Array.from(t.b.values()).some(function(t){return t!=e&&t.dd})){var r=Math.round(100*t.l);if(20<r)t.l-=.2;else{if(!(4<r))return e.Ib=!0,t.m=!0,void t.a.onError(n);t.l-=.04}e.dd=!0}Na(t,e,4)}(this,e,t):(e.Ib=!0,t.severity=2,ja(this,t)))}.bind(t))}(t,e,n,i,o),null)}(t,e);null!=n&&(Na(t,e,n),e.Ib=!1)}catch(e){return void ja(t,e)}n=Array.from(t.b.values()),function(t,e){var n=Ra(t,e.stream);if(e.pa!=n){var r=e.pa,i=Array.from(t.b.values());i.every(function(t){return t.pa==r||Aa(t)})&&i.every(Ma)&&Sa(t,r).then(function(){if(!this.f&&i.every(function(t){var e=Ma(t),n=Ra(this,t.stream);return!!Aa(t)||e&&t.pa==r&&n!=r}.bind(this))){var t=this.c.periods[r],e=this.a.Ld(t),n=new Map;e.variant&&e.variant.video&&n.set("video",e.variant.video),e.variant&&e.variant.audio&&n.set("audio",e.variant.audio),e.text&&n.set("text",e.text);var o=l(this.b.keys());for(e=o.next();!e.done;e=o.next())if(e=e.value,!n.has(e)&&"text"!=e)return void this.a.onError(new pt(2,5,5005));for(o=l(Array.from(n.keys())),e=o.next();!e.done;e=o.next())if(e=e.value,!this.b.has(e)){if("text"!=e)return void this.a.onError(new pt(2,5,5005));wa(this,null,null,n.get("text"),t.startTime),n.delete(e)}for(t=l(Array.from(this.b.keys())),e=t.next();!e.done;e=t.next())e=e.value,(o=n.get(e))?(ga(this,o,!1,0,!1),Na(this,this.b.get(e),0)):this.b.delete(e);this.a.Kd()}}.bind(t)).catch(Fe.ic)}}(t,e),t.s&&n.every(function(t){return t.endOfStream})&&t.a.I.endOfStream().then(function(){if(!this.f){var t=this.a.I.Y();0!=t&&t<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(t)}}.bind(t))}}function xa(t,e,n){return e.pb&&e.Aa?(n=Ra(t,e.pb),t.c.periods[n].startTime+e.Aa.endTime):Math.max(n,e.Zd)}function Ia(t,e,n,r,i){if(e.Aa&&e.stream==e.pb)return ka(t,e,i,e.Aa.position+1);if(e.Aa?(n=Ra(t,e.pb),n=e.stream.findSegmentPosition(Math.max(0,t.c.periods[n].startTime+e.Aa.endTime-t.c.periods[i].startTime))):n=e.stream.findSegmentPosition(Math.max(0,(r||n)-t.c.periods[i].startTime)),null==n)return null;var o=null;return null==r&&(o=ka(t,e,i,Math.max(0,n-1))),o||ka(t,e,i,n)}function ka(t,e,n,r){return n=t.c.periods[n],(e=e.stream.getSegmentReference(r))?(t=(r=t.c.presentationTimeline).Hb(),r=r.nb(),n.startTime+e.endTime<t||n.startTime+e.startTime>r?null:e):null}function Aa(t){return"text"==t.type&&"application/cea-608"==t.stream.mimeType}function Ma(t){return!t.Ha&&null==t.Da&&!t.Ma&&!t.Pa}function Pa(t,e){var n=Vo(t.c.periods,e+We);return n?t.c.periods.indexOf(n):0}function Ra(t,e){for(var n=t.c.periods,r=0;r<n.length;r++){for(var i=n[r],o=new Set,a=l(i.variants),s=a.next();!s.done;s=a.next())(s=s.value).audio&&o.add(s.audio),s.video&&o.add(s.video),s.video&&s.video.trickModeVideo&&o.add(s.video.trickModeVideo);for(a=(i=l(i.textStreams)).next();!a.done;a=i.next())o.add(a.value);if(o.has(e))return r}return-1}function Oa(t,e,n){return n=ki(n.c(),n.b,n.a,t.g.retryParameters),t=t.a.rb.request(1,n),e.Kb=t,t.promise.then(function(t){return e.Kb=null,t.data})}function Ca(t,e,n,r){return p(function i(){var o,a,s;return N(i,function(i){switch(i.j){case 1:return e.Ma=!1,e.uc=!1,e.Zb=0,e.Pa=!0,r?(a=t.a.Sa(),s=t.a.I.Y(),o=t.a.I.remove(e.type,a+r,s)):o=Mn(t.a.I,e.type).then(function(){if(!this.f&&n)return this.a.I.flush(e.type)}.bind(t)),S(i,o,2);case 2:if(t.f)return i.return();e.pb=null,e.Aa=null,e.Pa=!1,e.endOfStream=!1,Na(t,e,0),E(i)}})})}function Na(t,e,n){e.Da=new ct(function(){return p(function n(){var r;return N(n,function(n){switch(n.j){case 1:return T(n,2),S(n,Ta(t,e),4);case 4:I(n,0);break;case 2:r=k(n),t.a&&t.a.onError(r),E(n)}})})}).O(n)}function Da(t){null!=t.Da&&(t.Da.stop(),t.Da=null)}function ja(t,e){ht(t.G).then(function(){this.f||(this.a.onError(e),e.handled||this.g.failureCallback(e))}.bind(t))}function La(t,e,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,ad:r,data:e,headers:t,fromCache:!!t["x-shaka-from-cache"]};i=null;try{i=ae(e)}catch(t){}throw new pt(401==n||403==n?2:1,1,1001,r,n,i,t,o)}function Ua(t,e,n,r){var i=new Ua.b;Xt(e.headers).forEach(function(t,e){i.append(e,t)});var o=new Ua.a,a={vd:!1,ge:!1};if(t=new vt(t=Ua.l(t,n,{body:e.body||void 0,headers:i,method:e.method,signal:o.signal,credentials:e.allowCrossSiteCredentials?"include":void 0},a,r),function(){return a.vd=!0,o.abort(),Promise.resolve()}),e=e.retryParameters.timeout){var s=new ft(function(){a.ge=!0,o.abort()});s.O(e/1e3),t.finally(function(){s.stop()})}return t}function za(t,e,n,r){var i=new za.f,o=Date.now(),a=0;return new vt(new Promise(function(s,u){for(var c in i.open(e.method,t,!0),i.responseType="arraybuffer",i.timeout=e.retryParameters.timeout,i.withCredentials=e.allowCrossSiteCredentials,i.onabort=function(){u(new pt(1,1,7001,t,n))},i.onload=function(e){for(var r=(e=e.target).getAllResponseHeaders().trim().split("\r\n"),i={},o=(r=l(r)).next();!o.done;o=r.next())i[(o=o.value.split(": "))[0].toLowerCase()]=o.slice(1).join(": ");try{var a=La(i,e.response,e.status,t,e.responseURL,n);s(a)}catch(t){u(t)}},i.onerror=function(e){u(new pt(1,1,1002,t,e,n))},i.ontimeout=function(){u(new pt(1,1,1003,t,n))},i.onprogress=function(t){var e=Date.now();(100<e-o||t.lengthComputable&&t.loaded==t.total)&&(r(e-o,t.loaded-a,t.total-t.loaded),a=t.loaded,o=e)},e.headers)i.setRequestHeader(c.toLowerCase(),e.headers[c]);i.send(e.body)}),function(){return i.abort(),Promise.resolve()})}function Ba(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function qa(t,e){this.g=t,this.b=new Map,this.c=!1,this.f=e,this.a=new Ba}function Ka(t,e,n,r,i){var o=function(t,e){t.b+=e;var n=t.g;return t.g++,t.c.set(n,e),n}(t.a,r);r=t.b.get(e)||Promise.resolve(),t.b.set(e,r.then(function(){return p(function e(){var r;return N(e,function(e){switch(e.j){case 1:return S(e,function(t,e){return p(function n(){var r,i;return N(n,function(n){switch(n.j){case 1:return r=t.g.request(1,e),S(n,r.promise,2);case 2:return i=n.o,n.return(i.data)}})})}(t,n),2);case 2:if(r=e.o,t.c)throw new pt(2,9,7001);t.a.close(o,r.byteLength);var a=t.a;return t.f(0==a.b?0:a.f/a.b,t.a.a),e.return(i(r))}})})}))}function Fa(t,e){var n=this;this.c=t,this.b=t.objectStore(e),this.a=new dt,t.onabort=function(t){t.preventDefault(),n.a.reject()},t.onerror=function(t){t.preventDefault(),n.a.reject()},t.oncomplete=function(){n.a.resolve()}}function Va(t,e){return new Promise(function(n,r){var i=t.b.openCursor();i.onerror=r,i.onsuccess=function(t){if(!(t=t.target.result))return n();e(t.key,t.value,t),t.continue()}})}function Ha(t){this.b=t,this.a=[]}function Ga(t,e){return Xa(t,e,"readonly")}function Wa(t,e){return Xa(t,e,"readwrite")}function Xa(t,e,n){var r=new Fa(n=t.b.transaction([e],n),e);return t.a.push(r),r.promise().then(function(){kt(t.a,r)},function(){kt(t.a,r)}),r}function Ya(t){this.a=new Ha(t)}function $a(){this.a=new Map}function Ja(t,e,n){if(!(t=t.a.get(e)))throw new pt(2,9,9013,"Could not find mechanism with name "+e);if(!(e=t.getCells().get(n)))throw new pt(2,9,9013,"Could not find cell with name "+n);return e}function Qa(t,e){Za.set(t,e)}la.prototype.destroy=function(){for(var t=l(this.b.values()),e=t.next();!e.done;e=t.next())Da(e.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},la.prototype.configure=function(t){this.g=t,this.G=new lt({maxAttempts:Math.max(t.retryParameters.maxAttempts,2),baseDelay:t.retryParameters.baseDelay,backoffFactor:t.retryParameters.backoffFactor,fuzzFactor:t.retryParameters.fuzzFactor,timeout:0},!0)},la.prototype.start=function(){var t=this;return p(function e(){var n,r,i;return N(e,function(e){switch(e.j){case 1:return n=t.a.Sa(),r=Pa(t,n),(i=t.a.Ld(t.c.periods[r])).variant||i.text?S(e,wa(t,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):e.return(new pt(2,5,5005));case 2:if(t.f)return e.return();t.a&&t.a.gf&&t.a.gf(),E(e)}})})},la.prototype.M=function(t,e,n,r){var i=r.reader.bd(),o=r.reader.bd(),a=r.reader.F(),s=r.reader.F(),u=r.reader.F(),c=r.reader.F();r=r.reader.Xa(r.reader.K.byteLength-r.reader.ba()),t=t.startTime+e.startTime+s/a,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.hf():this.a.onEvent(new St("emsg",{detail:{startTime:t,endTime:t+u/a,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:s,eventDuration:u,id:c,messageData:r}})))},B("shaka.net.HttpFetchPlugin",Ua),Ua.l=function(t,e,n,r,i){return p(function o(){var a,s,u,c,f,l,h,d,v,y,m,g;return N(o,function(o){switch(o.j){case 1:return a=Ua.g,s=Ua.c,l=f=0,h=Date.now(),T(o,2),S(o,a(t,n),4);case 4:return u=o.o,d=u.clone().body.getReader(),y=(v=u.headers.get("Content-Length"))?parseInt(v,10):0,new s({start:function(t){!function e(){return p(function n(){var r,o;return N(n,function(n){switch(n.j){case 1:return T(n,2),S(n,d.read(),4);case 4:r=n.o,I(n,3);break;case 2:return k(n),n.return();case 3:r.done||(f+=r.value.byteLength),(100<(o=Date.now())-h||r.done)&&(i(o-h,f-l,y-f),l=f,h=o),r.done?t.close():(t.enqueue(r.value),e()),E(n)}})})}()}}),S(o,u.arrayBuffer(),5);case 5:c=o.o,I(o,3);break;case 2:if(m=k(o),r.vd)throw new pt(1,1,7001,t,e);if(r.ge)throw new pt(1,1,1003,t,e);throw new pt(1,1,1002,t,m,e);case 3:return g={},u.headers.forEach(function(t,e){g[e.trim()]=t}),o.return(La(g,c,u.status,t,u.url,e))}})})},Ua.isSupported=function(){if(!t.ReadableStream)return!1;try{new ReadableStream({})}catch(t){return!1}return!(!t.fetch||!t.AbortController)},Ua.isSupported=Ua.isSupported,Ua.g=t.fetch,Ua.a=t.AbortController,Ua.c=t.ReadableStream,Ua.b=t.Headers,Ua.isSupported()&&(Nt("http",Ua,2),Nt("https",Ua,2)),B("shaka.net.HttpXHRPlugin",za),za.f=t.XMLHttpRequest,Nt("http",za,1),Nt("https",za,1),Ba.prototype.close=function(t,e){if(this.c.has(t)){var n=this.c.get(t);this.c.delete(t),this.f+=n,this.a+=e}},qa.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then(function(){},function(){})},Fa.prototype.abort=function(){try{this.c.abort()}catch(t){}return this.a.catch(function(){})},Fa.prototype.store=function(){return this.b},Fa.prototype.promise=function(){return this.a},Ha.prototype.destroy=function(){return Promise.all(this.a.map(function(t){return t.abort()}))},Ya.prototype.destroy=function(){return this.a.destroy()},Ya.prototype.getAll=function(){var t=this;return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return n=Ga(t.a,"session-ids"),r=[],S(e,Va(n,function(t,e){r.push(e)}),2);case 2:return S(e,n.promise(),3);case 3:return e.return(r)}})})},Ya.prototype.add=function(t){for(var e=Wa(this.a,"session-ids"),n=e.store(),r=(t=l(t)).next();!r.done;r=t.next())n.add(r.value);return e.promise()},Ya.prototype.remove=function(t){var e=this;return p(function n(){var r;return N(n,function(n){switch(n.j){case 1:return S(n,Va(r=Wa(e.a,"session-ids"),function(e,n,r){0<=t.indexOf(n.sessionId)&&r.delete()}),2);case 2:return S(n,r.promise(),0)}})})},$a.prototype.destroy=function(){for(var t=[],e=l(this.a.values()),n=e.next();!n.done;n=e.next())t.push(n.value.destroy());return this.a.clear(),Promise.all(t)},$a.prototype.init=function(){var t=this;Za.forEach(function(e,n){var r=e();r&&t.a.set(n,r)});for(var e=[],n=l(this.a.values()),r=n.next();!r.done;r=n.next())e.push(r.value.init());return Promise.all(e)},$a.prototype.erase=function(){var t=this;return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return n=Array.from(t.a.values()),(r=0<n.length)||Za.forEach(function(t){(t=t())&&n.push(t)}),S(e,Promise.all(n.map(function(t){return t.erase()})),2);case 2:if(!r)return S(e,Promise.all(n.map(function(t){return t.destroy()})),0);e.A(0)}})})},B("shaka.offline.StorageMuxer.register",Qa),B("shaka.offline.StorageMuxer.unregister",function(t){Za.delete(t)});var Za=new Map;function ts(t){this.a=new Ha(t)}function es(t){return Promise.reject(new pt(2,9,9011,"Cannot add new value to "+t))}function ns(t,e,n,r){var i=(t=Wa(t.a,e)).store();return n.forEach(function(t){i.delete(t).onsuccess=function(){return r(t)}}),t.promise()}function rs(t,e,n){var r=(t=Ga(t.a,e)).store(),i={},o=[];return n.forEach(function(t){r.get(t).onsuccess=function(e){void 0==(e=e.target.result)&&o.push(t),i[t]=e}}),t.promise().then(function(){return o.length?Promise.reject(new pt(2,9,9012,"Could not find values for "+o)):n.map(function(t){return i[t]})})}function is(t){return{originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:null==t.expiration?1/0:t.expiration,periods:t.periods.map(os),sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata}}function os(t){return function(t){var e=t.streams.filter(function(t){return"audio"==t.contentType}),n=t.streams.filter(function(t){return"video"==t.contentType});if(!e.every(function(t){return t.variantIds})||!n.every(function(t){return t.variantIds})){e.forEach(function(t){t.variantIds=[]}),n.forEach(function(t){t.variantIds=[]});var r=0;if(n.length&&!e.length){var i=r++;n.forEach(function(t){t.variantIds.push(i)})}if(!n.length&&e.length){var o=r++;e.forEach(function(t){t.variantIds.push(o)})}n.length&&e.length&&e.forEach(function(t){n.forEach(function(e){var n=r++;t.variantIds.push(n),e.variantIds.push(n)})})}}(t),t.streams.forEach(function(){}),{startTime:t.startTime,streams:t.streams.map(as)}}function as(t){var e=t.$e?cs(t.$e):null;return{id:t.id,originalId:null,primary:t.primary,presentationTimeOffset:t.presentationTimeOffset,contentType:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,initSegmentKey:e,encrypted:t.encrypted,keyId:t.keyId,segments:t.segments.map(ss),variantIds:t.variantIds}}function ss(t){var e=cs(t.uri);return{startTime:t.startTime,endTime:t.endTime,dataKey:e}}function us(t){return{data:t.data}}function cs(t){var e;if((e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t))||(e=/^offline:segment\/([0-9]+)$/.exec(t)))return Number(e[1]);throw new pt(2,9,9004,"Could not parse uri "+t)}function fs(t,e,n,r){this.a=new Ha(t),this.c=e,this.b=n,this.f=r}function ls(t,e,n){if(t.f)return Promise.reject(new pt(1,9,9011,"Cannot add new value to "+e));var r=(t=Wa(t.a,e)).store(),i=[];return n.forEach(function(t){r.add(t).onsuccess=function(t){i.push(t.target.result)}}),t.promise().then(function(){return i})}function hs(t,e,n,r){var i=(t=Wa(t.a,e)).store();return n.forEach(function(t){i.delete(t).onsuccess=function(){return r(t)}}),t.promise()}function ps(t,e,n){var r=(t=Ga(t.a,e)).store(),i={},o=[];return n.forEach(function(t){var e=r.get(t);e.onsuccess=function(){void 0==e.result&&o.push(t),i[t]=e.result}}),t.promise().then(function(){return o.length?Promise.reject(new pt(1,9,9012,"Could not find values for "+o)):n.map(function(t){return i[t]})})}function ds(){this.g=this.c=this.b=this.a=this.f=null}function vs(t,e,n,r){this.a=t,this.g=e,this.f=n,this.c=r,this.b=["offline:",t,"/",e,"/",n,"/",r].join("")}function ys(t){if(null==(t=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(t)))return null;var e=t[1];if("manifest"!=e&&"segment"!=e)return null;var n=t[2];if(!n)return null;var r=t[3];return r&&null!=e?new vs(e,n,r,Number(t[4])):null}function ms(t,e){this.b=t,this.a=e}function gs(t,e,n){var r=e.streams.filter(function(t){return"audio"==t.contentType}),i=e.streams.filter(function(t){return"video"==t.contentType});return r=function(t,e,n){for(var r=new Set,i=l(e),o=i.next();!o.done;o=i.next()){var a=l(o.value.variantIds);for(o=a.next();!o.done;o=a.next())r.add(o.value)}for(i=l(n),o=i.next();!o.done;o=i.next())for(a=l(o.value.variantIds),o=a.next();!o.done;o=a.next())r.add(o.value);for(i=new Map,r=l(r),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(e=l(e),r=e.next();!r.done;r=e.next())for(r=r.value,o=bs(t,r),a=l(r.variantIds),r=a.next();!r.done;r=a.next())(r=i.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=l(n),e=n.next();!e.done;e=n.next())for(r=e.value,e=bs(t,r),o=l(r.variantIds),r=o.next();!r.done;r=o.next())(r=i.get(r.value)).primary=r.primary||e.primary,r.video=e;return i}(t,r,i),i=e.streams.filter(function(t){return"text"==t.contentType}).map(function(e){return bs(t,e)}),e.streams.forEach(function(r){r=r.segments.map(function(e,n){return ws(t,n,e)}),n.sb(r,e.startTime)}),{startTime:e.startTime,variants:Array.from(r.values()),textStreams:i}}function bs(t,e){var n=e.segments.map(function(e,n){return ws(t,n,e)}),r=new ci(n);return n={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(t){return r.find(t)},getSegmentReference:function(t){return r.get(t)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=e.initSegmentKey&&(n.initSegmentReference=function(t,e){var n=new vs("segment",t.b,t.a,e);return new ai(function(){return[n.toString()]},0,null)}(t,e.initSegmentKey)),n}function ws(t,e,n){var r=new vs("segment",t.b,t.a,n.dataKey);return new si(e,n.startTime,n.endTime,function(){return[r.toString()]},0,null)}function _s(){this.a=null}function Ss(t){var e=ys(t);return e&&"manifest"==e.a?Ss.h(t):e&&"segment"==e.a?Ss.i(e.key(),e):yt(new pt(2,1,9004,t))}function Es(t,e,n){return p(function r(){var i,o,a,s,u,c;return N(r,function(r){switch(r.j){case 1:i=[];for(var f=[],h=l(n),d=h.next();!d.done;d=h.next()){d=d.value;for(var v=!1,y=l(f),m=y.next();!m.done;m=y.next())if(Ts((m=m.value).info,d)){m.sessionIds.push(d.sessionId),v=!0;break}v||f.push({info:d,sessionIds:[d.sessionId]})}o=l(f),a=o.next();case 2:if(a.done){r.A(4);break}return s=a.value,u=function(t,e,n){return p(function r(){var i,o;return N(r,function(r){switch(r.j){case 1:return i=new me({rb:e,onError:function(){},kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),T(r,2),i.configure(t),S(r,function(t,e,n,r,i,o){var a=new Map;return a.set(e,{audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:e,drmInfos:[{keySystem:e,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),xe(t,a)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(r,3);break;case 2:return k(r),S(r,i.destroy(),5);case 5:return r.return([]);case 3:return T(r,6),S(r,we(i),8);case 8:I(r,7);break;case 6:return k(r),S(r,i.destroy(),9);case 9:return r.return([]);case 7:return o=[],S(r,Promise.all(n.sessionIds.map(function(t){return p(function e(){return N(e,function(e){switch(e.j){case 1:return T(e,2),S(e,function(t,e){return p(function n(){var r,i,o;return N(n,function(n){switch(n.j){case 1:return S(n,Ie(t,e),2);case 2:return(r=n.o)?(i=[],(o=t.b.get(r))&&(o.xa=new dt,i.push(o.xa)),i.push(r.remove()),S(n,Promise.all(i),0)):n.return()}})})}(i,t),4);case 4:o.push(t),I(e,0);break;case 2:k(e),E(e)}})})})),10);case 10:return S(r,i.destroy(),11);case 11:return r.return(o)}})})}(t,e,s),S(r,u,5);case 5:c=r.o,i=i.concat(c),a=o.next(),r.A(2);break;case 4:return r.return(i)}})})}function Ts(t,e){function n(t,e){return t.robustness==e.robustness&&t.contentType==e.contentType}return t.keySystem==e.keySystem&&t.licenseUri==e.licenseUri&&At(t.audioCapabilities,e.audioCapabilities,n)&&At(t.videoCapabilities,e.videoCapabilities,n)}function xs(t,e){var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},r=this;this.g=e,this.c=t,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then(function(){return t=r,p(function e(){return N(e,function(e){switch(e.j){case 1:if(t.l){if(0==t.f.length||t.a&&!t.a.Ta)var n=!1;else{t.a&&(t.a.ta.Wa(),t.a=null);var r=(n=t.f.shift()).create(t.i);r?(n.ta.tb(),t.a={node:r.node,payload:r.payload,Ta:r.Ta,ta:n.ta}):n.ta.lc(),n=!0}return n?n=Promise.resolve():t.a?n=function(t){return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return t.c=t.g.Pe(t.c,t.i,t.a.node,t.a.payload),T(e,2),t.b=t.g.ze(t.c,t.i,t.a.payload),S(e,t.b.promise,4);case 4:t.b=null,t.c==t.a.node&&(t.a.ta.jc(),t.a=null),I(e,0);break;case 2:return 7001==(n=k(e)).code?t.a.ta.Wa():t.a.ta.onError(n),t.a=null,t.b=null,r=t,S(e,t.g.handleError(t.i,n),5);case 5:r.c=e.o,E(e)}})})}(t):(t.g.ff(t.c),t.h=new dt,n=t.h),S(e,n,1)}e.A(0)}})});var t})}function Is(t,e){var n={tb:function(){},jc:function(){},Wa:function(){},onError:function(){},lc:function(){},sg:function(){}};return t.f.push({create:e,ta:n}),t.b&&t.b.abort(),ks(t),n}function ks(t){t.h&&(t.h.resolve(),t.h=null)}function As(t){this.a=null;for(var e=0;e<t.textTracks.length;++e){var n=t.textTracks[e];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=t.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Ms(t){if(t.startTime>=t.endTime)return null;var e=new VTTCue(t.startTime,t.endTime,t.payload);e.lineAlign=t.lineAlign,e.positionAlign=t.positionAlign,e.size=t.size;try{e.align=t.textAlign}catch(t){}return"center"==t.textAlign&&"center"!=e.align&&(e.align="middle"),"vertical-lr"==t.writingMode?e.vertical="lr":"vertical-rl"==t.writingMode&&(e.vertical="rl"),1==t.lineInterpretation&&(e.snapToLines=!1),null!=t.line&&(e.line=t.line),null!=t.position&&(e.position=t.position),e}function Ps(t,e){var n=t.mode;t.mode="showing"==n?"showing":"hidden";for(var r=t.cues,i=r.length-1;0<=i;i--){var o=r[i];o&&e(o)&&t.removeCue(o)}t.mode=n}function Rs(t,e,n,r,i){var o,a=i in r,s=!0;for(o in e){var u=i+"."+o,c=a?r[i]:n[o];a||o in n?void 0===e[o]?void 0===c||a?delete t[o]:t[o]=xt(c):c.constructor==Object&&e[o]&&e[o].constructor==Object?(t[o]||(t[o]=xt(c)),u=Rs(t[o],e[o],c,r,u),s=s&&u):typeof e[o]!=typeof c||null==e[o]||e[o].constructor!=c.constructor?s=!1:t[o]=e[o]:s=!1}return s}function Os(t,e){for(var n={},r=n,i=0,o=0;!(0>(i=t.indexOf(".",i)));)0!=i&&"\\"==t[i-1]||(r[o=t.substring(o,i).replace(/\\\./g,".")]={},r=r[o],o=i+1),i+=1;return r[t.substring(o).replace(/\\\./g,".")]=e,n}function Cs(){}function Ns(){var t=5e5,e=1/0;navigator.connection&&(t=1e6*navigator.connection.downlink,navigator.connection.saveData&&(e=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(t){return t},fairPlayTransform:!0},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,dash:{customScheme:function(t){if(t)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};ee("Web0S")&&(i.stallEnabled=!1);var o={trackSelectionCallback:function(t){return t},progressCallback:function(){},usePersistentLicense:!0},a={drm:n,manifest:r,streaming:i,offline:o,abrFactory:Zn,abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return o.trackSelectionCallback=function(t){return function(t,e){var n=t.filter(function(t){return"variant"==t.type}),r=[],i=Ln(e,n.map(function(t){return t.language}));i&&(r=n.filter(function(t){return Dn(t.language)==i})),0==r.length&&(r=n.filter(function(t){return t.primary})),0==r.length&&(n.map(function(t){return t.language}),r=n);var o=r.filter(function(t){return t.height&&480>=t.height});if(o.length&&(o.sort(function(t,e){return e.height-t.height}),r=o.filter(function(t){return t.height==o[0].height})),n=[],r.length){var a=Math.floor(r.length/2);r.sort(function(t,e){return t.bandwidth-e.bandwidth}),n.push(r[a])}for(r=l(t),a=r.next();!a.done;a=r.next())"text"==(a=a.value).type&&n.push(a);return n}(t,a.preferredAudioLanguage)},a}function Ds(t,e,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Rs(t,e,n||Ns(),r,"")}function js(){this.a=null,this.b=[]}function Ls(t,e){if(null==t.a)t.a={timestamp:Date.now()/1e3,state:e,duration:0};else{var n=Date.now()/1e3;t.a.duration=n-t.a.timestamp,t.a.state!=e&&(t.b.push(t.a),t.a={timestamp:n,state:e,duration:0})}}function Us(t,e){var n=0;t.a&&t.a.state==e&&(n+=t.a.duration);for(var r=l(t.b),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==e?i.duration:0;return n}function zs(){this.b=this.c=null,this.a=[]}function Bs(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new js,this.c=new zs}function qs(e,n){var r=this;Tt.call(this),this.h=Tu,this.a=null,this.eb=!1,this.i=new Kt,this.vc=this.l=this.Bb=this.c=this.m=this.f=this.Sb=this.P=this.Tb=this.W=this.gb=this.s=this.D=this.g=this.G=null,this.Hd=1e9,this.Wb=new Set,this.ib=!0,this.Ea=null,this.Dd=!1,this.Bd=0,this.na=null,this.$=new Eo,this.b=$s(this),this.Xb={width:1/0,height:1/0},this.v=null,this.Ub=new Oo(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ma=this.b.preferredTextLanguage,this.cb=this.b.preferredTextRole,n&&n(this),this.G=function(t){return new Rt(function(e,n){t.l&&t.l.segmentDownloaded(e,n)})}(this),this.i.w(t,"online",function(){r.gd()}),this.C={name:"detach"},this.M={name:"attach"},this.Fa={name:"unload"},this.Ec={name:"manifest-parser"},this.Cc={name:"manifest"},this.fb={name:"media-source"},this.wc={name:"drm-engine"},this.T={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.hb={name:"src-equals"};var i=new Map;i.set(this.M,function(t,e){return bt(function(t,e,n){return null==e.u&&(e.u=n.u,t.i.w(e.u,"error",function(){var e=lu(t);e&&t.Ka(e)})),t.a=e.u,Promise.resolve()}(r,t,e))}),i.set(this.C,function(t){return t.u&&(r.i.ea(t.u,"error"),t.u=null),r.a=null,bt(t=Promise.resolve())}),i.set(this.Fa,function(t){return bt(Hs(r,t))}),i.set(this.fb,function(e){return bt(e=function(e,n){return p(function r(){var i,o,a,s;return N(r,function(r){switch(r.j){case 1:return i=t.muxjs?new Le:new Ue,o=e.b.textDisplayFactory,a=new o,e.xc=o,s=new wn(n.u,i,a),S(r,s.s,2);case 2:e.D=s,E(r)}})})}(r,e))}),i.set(this.Ec,function(t,e){return bt(function(t,e,n){return p(function r(){var i,o,a;return N(r,function(r){switch(r.j){case 1:if(e.ya=n.ya,e.mimeType=n.mimeType,e.uri=n.uri,i=e.uri,o=t.G,t.Bb=i,e.ya){t.m=e.ya(),r.A(2);break}return a=t,S(r,xi.create(i,o,t.b.manifest.retryParameters,e.mimeType),3);case 3:a.m=r.o;case 2:t.m.configure(t.b.manifest),E(r)}})})}(r,t,e))}),i.set(this.Cc,function(t){return function(t,e){var n=e.uri,r=t.G;t.Sb=new aa,function(t,e){t.b=e}(t.Sb,function(e){fu(t,"timelineregionadded",e)});var i={networkingEngine:r,filterNewPeriod:function(e){return t.Fc(e)},filterAllPeriods:function(e){return Js(t,e)},onTimelineRegionAdded:function(e){var n=t.Sb;t:{for(var r=l(n.a),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==e.schemeIdUri&&i.startTime==e.startTime&&i.endTime==e.endTime){r=i;break t}r=null}null==r&&(n.a.add(e),n.b(e))},onEvent:function(e){return t.dispatchEvent(e)},onError:function(e){return t.Ka(e)}};return new vt(Promise.resolve().then(function(){return p(function e(){var r;return N(e,function(e){switch(e.j){case 1:return r=t,S(e,t.m.start(n,i),2);case 2:if(r.c=e.o,t.dispatchEvent(new St("manifestparsed")),0==t.c.periods.length)throw new pt(2,4,4014);!function(t){function e(t){return t.video&&t.audio||t.video&&t.video.codecs.includes(",")}t.some(function(t){return t.variants.some(e)})&&t.forEach(function(t){t.variants=t.variants.filter(e)})}(t.c.periods),E(e)}})})}),function(){return t.m.stop()})}(r,t)}),i.set(this.wc,function(){return bt(function(t){return p(function e(){return N(e,function(e){switch(e.j){case 1:return t.g=new me({rb:t.G,onError:function(e){t.Ka(e)},kc:function(e){hu(t,e)},onExpirationUpdated:function(e,n){pu(t,e,n)},onEvent:function(e){t.dispatchEvent(e)}}),t.g.configure(t.b.drm),S(e,ge(t.g,Fo(t.c.periods),t.c.offlineSessionIds),2);case 2:Js(t,t.c.periods),E(e)}})})}(r))}),i.set(this.T,function(t,e){return bt(function(t,e,n){return p(function r(){var i,o,a,s,u,c,f,h,p;return N(r,function(r){switch(r.j){case 1:return e.startTime=n.startTime,i=e.u,o=e.uri,t.Bb=o,t.v=new Bs,a=function(){return eu(t)},s=function(){var e=t.a.playbackRate;0!=e&&t.W.set(e)},t.i.w(i,"playing",a),t.i.w(i,"pause",a),t.i.w(i,"ended",a),t.i.w(i,"ratechange",s),u=t.b.abrFactory,t.l&&t.vc==u||(t.vc=u,t.l=new u,t.l.configure(t.b.abr)),function(t,e){for(var n=0;n<e.length;n++){for(var r=e[n],i=new Map,o=l(r.variants),a=o.next();!a.done;a=o.next())if((a=a.value).video&&a.video.closedCaptions)for(var s=l((a=a.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!i.has(u)){var c={id:t.Hd++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:a.closedCaptions.get(u),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,channelsCount:null,closedCaptions:null};i.set(u,c)}for(i=l(i.values()),o=i.next();!o.done;o=i.next())r.textStreams.push(o.value)}}(t,t.c.periods),t.Ub=new Oo(t.b.preferredAudioLanguage,t.b.preferredVariantRole,t.b.preferredAudioChannelCount),t.ma=t.b.preferredTextLanguage,function(t,e,n){0<e&&(t.V()||t.de(e)),n<t.Y()&&(t.V()||t.wa(n))}(t.c.presentationTimeline,t.b.playRangeStart,t.b.playRangeEnd),S(r,t.g.Cb(i),2);case 2:return t.l.init(function(e,n,r){n=void 0!==n&&n,r=void 0===r?0:r;t:{for(var i=l(t.c.periods),o=i.next();!o.done;o=i.next())if((o=o.value).variants.includes(e)){i=o;break t}i=null}Xs(t,i,e,!0),t.f&&(ma(t.f,e,n,r),iu(t))}),t.s=function(t,e){return new na(t.a,t.c,t.b.streaming,e,function(){t.gb&&Ko(t.gb,!0),t.f&&function(t){function e(e){var i=t.a.I;return e="text"==e?null!=(e=i.a).a&&null!=e.b&&n>=e.a&&n<e.b:Be(e=kn(i,e),n,r)}var n=t.a.Sa(),r=t.g.smallGapLimit,i=Pa(t,n);if(Wt(t.b.values(),function(t){return t.pa==i}))for(var o=l(t.b.keys()),a=o.next();!a.done;a=o.next())e(a=a.value)||ba(t,t.b.get(a));else Wt(t.b.keys(),e)||t.b.forEach(function(e){ba(t,e)})}(t.f)},function(e){return t.dispatchEvent(e)})}(t,e.startTime),t.gb=function(t){var e=new Ho(t.c);!function(t,e){t.b=e}(e,function(){ou(t)});var n=new sa(t.Sb);!function(t,e,n,r){t.a=e,t.b=n,t.c=r}(n,function(e){fu(t,"timelineregionenter",e)},function(e){fu(t,"timelineregionexit",e)},function(e,n){n||(fu(t,"timelineregionenter",e),fu(t,"timelineregionexit",e))});var r=new qo(t.a);return r.a.add(e),r.a.add(n),r}(t),t.W=new Go({ec:function(){return e.u.playbackRate},ld:function(t){e.u.playbackRate=t},Id:function(t){e.u.currentTime+=t}}),c=Math.max(t.c.minBufferTime,t.b.streaming.rebufferingGoal),Gs(t,c),t.f=function(t){return new la(t.c,{Sa:function(){return t.s.h()},getBandwidthEstimate:function(){return t.l.getBandwidthEstimate()},I:t.D,rb:t.G,Ld:t.df.bind(t),Kd:t.te.bind(t),onError:t.Ka.bind(t),onEvent:function(e){return t.dispatchEvent(e)},hf:t.jf.bind(t),Zc:t.qf.bind(t)})}(t),t.f.configure(t.b.streaming),function(t){function e(t){var e="";t.video&&(e=Jt(t.video.codecs)[0]);var n="";return t.audio&&(n=Jt(t.audio.codecs)[0]),e+"-"+n}var n=t.c.periods.reduce(function(t,e){return t.concat(e.variants)},[]);n=Yn(n,t.b.preferredAudioChannelCount);var r=new Et;n.forEach(function(t){var n=e(t);r.push(n,t)});var i=null,o=1/0;r.forEach(function(t,e){var n=0,r=0;e.forEach(function(t){n+=t.bandwidth||0,++r});var a=n/r;a<o&&(i=t,o=a)}),t.c.periods.forEach(function(t){t.variants=t.variants.filter(function(t){return e(t)==i})})}(t),t.h=xu,t.dispatchEvent(new St("streaming")),S(r,t.f.start(),3);case 3:t.b.streaming.startAtSegmentBoundary&&(f=t.s.h(),h=function(t,e){function n(t,e){if(!t)return null;var n=t.findSegmentPosition(e-o.startTime);return null==n?null:(n=t.getSegmentReference(n))?n.startTime+o.startTime:null}var r=ha(t.f),i=pa(t.f),o=gu(t);return r=n(r,e),null!=(i=n(i,e))&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:e}(t,f),t.s.m(h)),t.c.periods.forEach(t.Fc.bind(t)),ou(t),iu(t),(p=gu(t)||t.c.periods[0]).variants.some(function(t){return t.primary}),nu(t,p.variants),t.i.da(i,"loadeddata",function(){t.v.b=Date.now()/1e3-n.od}),E(r)}})})}(r,t,e))}),i.set(this.Ic,function(t){return bt(t=function(t,e){return p(function n(){var r,i;return N(n,function(n){switch(n.j){case 1:return r=Ge,t.g=new me({rb:t.G,onError:function(e){t.Ka(e)},kc:function(e){hu(t,e)},onExpirationUpdated:function(e,n){pu(t,e,n)},onEvent:function(e){t.dispatchEvent(e)}}),t.g.configure(t.b.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:r.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},S(n,ge(t.g,[i],[]),2);case 2:return S(n,t.g.Cb(e.u),0)}})})}(r,t))}),i.set(this.hb,function(t,e){return function(t,e,n){function r(){return eu(t)}if(e.uri=n.uri,e.startTime=n.startTime,t.Bb=e.uri,t.v=new Bs,t.s=new ea(e.u),null!=e.startTime&&t.s.m(e.startTime),t.W=new Go({ec:function(){return e.u.playbackRate},ld:function(t){e.u.playbackRate=t},Id:function(t){e.u.currentTime+=t}}),Gs(t,t.b.streaming.rebufferingGoal),t.i.w(e.u,"playing",r),t.i.w(e.u,"pause",r),t.i.w(e.u,"ended",r),t.i.da(e.u,"loadeddata",function(){t.v.b=Date.now()/1e3-n.od}),t.a.audioTracks&&(t.i.w(t.a.audioTracks,"addtrack",function(){return ou(t)}),t.i.w(t.a.audioTracks,"removetrack",function(){return ou(t)})),t.a.textTracks){var i=t.a.textTracks;t.i.w(i,"addtrack",function(){return ou(t)}),t.i.w(i,"removetrack",function(){return ou(t)})}e.u.src=e.uri,t.h=Iu,t.dispatchEvent(new St("streaming"));var o=new dt;return t.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?o.resolve():t.a.error?o.reject(lu(t)):(t.i.da(t.a,"loadeddata",function(){o.resolve()}),t.i.da(t.a,"error",function(){o.reject(lu(t))})),new vt(o,function(){return o.reject(new pt(2,7,7001)),Promise.resolve()})}(r,t,e)}),this.jb=new xs(this.C,{Pe:function(t,e,n,i){var o=null;return t==r.C&&(o=n==r.C?r.C:r.M),t==r.M&&(o=n==r.C||e.u!=i.u?r.C:n==r.M?r.M:n==r.fb||n==r.T?r.fb:n==r.hb?r.Ic:null),t==r.fb&&(o=n==r.T&&e.u==i.u?r.Ec:r.Fa),t==r.Ec&&(o=_u(r.T,r.Cc,r.Fa,n,e,i)),t==r.Cc&&(o=_u(r.T,r.wc,r.Fa,n,e,i)),t==r.wc&&(o=_u(r.T,r.T,r.Fa,n,e,i)),t==r.Ic&&(o=n==r.hb&&e.u==i.u?r.hb:r.Fa),t!=r.T&&t!=r.hb||(o=r.Fa),t==r.Fa&&(o=i.u&&e.u==i.u?r.M:r.C),o},ze:function(t,e,n){return r.dispatchEvent(new St("onstatechange",{state:t.name})),i.get(t)(e,n)},handleError:function(t){return p(function e(){return N(e,function(e){switch(e.j){case 1:return S(e,Hs(r,t),2);case 2:return e.return(t.u?r.M:r.C)}})})},ff:function(t){r.dispatchEvent(new St("onstateidle",{state:t.name}))}}),e&&this.Cb(e,!0)}(n=ts.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return es("segment")},n.removeSegments=function(t,e){return ns(this,"segment",t,e)},n.getSegments=function(t){return rs(this,"segment",t).then(function(t){return t.map(us)})},n.addManifests=function(){return es("manifest")},n.updateManifestExpiration=function(t,e){var n=Wa(this.a,"manifest"),r=n.store(),i=new dt;return r.get(t).onsuccess=function(n){(n=n.target.result)?(n.expiration=e,r.put(n),i.resolve()):i.reject(new pt(2,9,9012,"Could not find values for "+t))},n.promise().then(function(){return i})},n.removeManifests=function(t,e){return ns(this,"manifest",t,e)},n.getManifests=function(t){return rs(this,"manifest",t).then(function(t){return t.map(is)})},n.getAllManifests=function(){var t=this;return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return n=Ga(t.a,"manifest"),r=new Map,S(e,Va(n,function(t,e){r.set(t,is(e))}),2);case 2:return S(e,n.promise(),3);case 3:return e.return(r)}})})},(n=fs.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(t){return ls(this,this.c,t)},n.removeSegments=function(t,e){return hs(this,this.c,t,e)},n.getSegments=function(t){return ps(this,this.c,t)},n.addManifests=function(t){return ls(this,this.b,t)},n.updateManifestExpiration=function(t,e){var n=Wa(this.a,this.b),r=n.store();return r.get(t).onsuccess=function(n){(n=n.target.result)&&(n.expiration=e,r.put(n,t))},n.promise()},n.removeManifests=function(t,e){return hs(this,this.b,t,e)},n.getManifests=function(t){return ps(this,this.b,t)},n.getAllManifests=function(){var t=this;return p(function e(){var n,r;return N(e,function(e){switch(e.j){case 1:return n=Ga(t.a,t.b),r=new Map,S(e,Va(n,function(t,e){r.set(t,e)}),2);case 2:return S(e,n.promise(),3);case 3:return e.return(r)}})})},(n=ds.prototype).init=function(){var e=this,n=new dt,r=t.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(t){t=t.target.result,e.f=t;var r=t.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new ts(t):null,e.a=r,r=(r=t.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new fs(t,"segment-v2","manifest-v2",!0):null,e.b=r,r=(r=t.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new fs(t,"segment-v3","manifest-v3",!1):null,e.c=r,t=t.objectStoreNames.contains("session-ids")?new Ya(t):null,e.g=t,n.resolve()},r.onupgradeneeded=function(t){t=t.target.result;for(var e=l(["segment-v3","manifest-v3","session-ids"]),n=e.next();!n.done;n=e.next())n=n.value,t.objectStoreNames.contains(n)||t.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(t){n.reject(new pt(2,9,9001,r.error)),t.preventDefault()},n},n.destroy=function(){var t=this;return p(function e(){return N(e,function(e){switch(e.j){case 1:if(!t.a){e.A(2);break}return S(e,t.a.destroy(),2);case 2:if(!t.b){e.A(4);break}return S(e,t.b.destroy(),4);case 4:if(!t.c){e.A(6);break}return S(e,t.c.destroy(),6);case 6:if(!t.g){e.A(8);break}return S(e,t.g.destroy(),8);case 8:t.f&&t.f.close(),E(e)}})})},n.getCells=function(){var t=new Map;return this.a&&t.set("v1",this.a),this.b&&t.set("v2",this.b),this.c&&t.set("v3",this.c),t},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var e=this;return p(function n(){return N(n,function(n){switch(n.j){case 1:if(!e.a){n.A(2);break}return S(n,e.a.destroy(),2);case 2:if(!e.b){n.A(4);break}return S(n,e.b.destroy(),4);case 4:if(!e.c){n.A(6);break}return S(n,e.c.destroy(),6);case 6:return e.f&&e.f.close(),S(n,function(){var e=new dt,n=t.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){e.resolve()},n.onerror=function(t){e.reject(new pt(2,9,9001,n.error)),t.preventDefault()},e}(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,S(n,e.init(),0)}})})},Qa("idb",function(){return t.indexedDB?new ds:null}),vs.prototype.ua=function(){return this.g},vs.prototype.aa=function(){return this.f},vs.prototype.key=function(){return this.c},vs.prototype.toString=function(){return this.b},(n=_s.prototype).configure=function(){},n.start=function(t){var e=this;return p(function n(){var r,i,o,a,s;return N(n,function(n){switch(n.j){case 1:return r=ys(t),e.a=r,null==r||"manifest"!=r.a?n.return(Promise.reject(new pt(2,1,9004,r))):(i=new $a,x(n,2),S(n,i.init(),4));case 4:return S(n,Ja(i,r.ua(),r.aa()),5);case 5:return S(n,n.o.getManifests([r.key()]),6);case 6:return o=n.o,a=o[0],s=new ms(r.ua(),r.aa()),n.return(function(t,e){var n=new Ii(null,0);n.wa(e.duration);var r=e.periods.map(function(e){return gs(t,e,n)}),i=e.drmInfo?[e.drmInfo]:[];return e.drmInfo&&r.forEach(function(t){t.variants.forEach(function(t){t.drmInfos=i})}),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:r}}(s,a));case 2:return A(n),S(n,i.destroy(),7);case 7:M(n,0)}})})},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(t,e){var n=this;return p(function r(){var i,o,a,s,u,c,f;return N(r,function(r){switch(r.j){case 1:return i=n.a,o=new $a,T(r,2,3),S(r,o.init(),5);case 5:return S(r,Ja(o,i.ua(),i.aa()),6);case 6:return S(r,(a=r.o).getManifests([i.key()]),7);case 7:if(s=r.o,u=s[0],c=u.sessionIds.includes(t),f=void 0==u.expiration||u.expiration>e,!c||!f){r.A(3);break}return S(r,a.updateManifestExpiration(i.key(),e),3);case 3:return A(r),S(r,o.destroy(),10);case 10:M(r,0);break;case 2:k(r),r.A(3)}})})},xi.Nb("application/x-offline-manifest",_s),B("shaka.offline.OfflineScheme",Ss),Ss.h=function(t){return gt(t={uri:t,ad:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},Ss.i=function(t,e){var n=new $a;return gt(void 0).U(function(){return n.init()}).U(function(){return Ja(n,e.ua(),e.aa())}).U(function(t){return t.getSegments([e.key()])}).U(function(t){return{uri:e,ad:e,data:t[0].data,headers:{}}}).finally(function(){return n.destroy()})},Nt("offline",Ss),xs.prototype.destroy=function(){var t=this;return p(function e(){return N(e,function(e){switch(e.j){case 1:return t.l=!1,t.b&&t.b.abort(),ks(t),S(e,t.m,2);case 2:t.a&&t.a.ta.Wa();for(var n=l(t.f),r=n.next();!r.done;r=n.next())r.value.ta.Wa();t.a=null,t.f=[],t.g=null,E(e)}})})},B("shaka.text.SimpleTextDisplayer",As),As.prototype.remove=function(t,e){return!!this.a&&(Ps(this.a,function(n){return n.startTime<e&&n.endTime>t}),!0)},As.prototype.remove=As.prototype.remove,As.prototype.append=function(t){for(var e=Ms,n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}n.slice().sort(function(t,e){return t.startTime!=e.startTime?t.startTime-e.startTime:t.endTime!=e.endTime?t.endTime-e.startTime:n.indexOf(e)-n.indexOf(t)}).forEach(function(t){this.a.addCue(t)}.bind(this))},As.prototype.append=As.prototype.append,As.prototype.destroy=function(){return this.a&&Ps(this.a,function(){return!0}),this.a=null,Promise.resolve()},As.prototype.destroy=As.prototype.destroy,As.prototype.isTextVisible=function(){return"showing"==this.a.mode},As.prototype.isTextVisible=As.prototype.isTextVisible,As.prototype.setTextVisibility=function(t){this.a.mode=t?"showing":"hidden"},As.prototype.setTextVisibility=As.prototype.setTextVisibility,B("shaka.util.ConfigUtils.mergeConfigObjects",Rs),B("shaka.util.ConfigUtils.convertToConfigObject",Os),B("shaka.util.PlayerConfiguration",Cs),Cs.mergeConfigObjects=Ds,q(qs,Tt),B("shaka.Player",qs),qs.prototype.destroy=function(){var t=this;return p(function e(){var n;return N(e,function(e){switch(e.j){case 1:return t.h==Eu?e.return():(t.h=Eu,n=Is(t.jb,function(){return{node:t.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}}),S(e,new Promise(function(t){n.tb=function(){},n.jc=function(){t()},n.Wa=function(){t()},n.onError=function(){t()},n.lc=function(){t()}}),2));case 2:return S(e,t.jb.destroy(),3);case 3:if(t.i&&(t.i.release(),t.i=null),t.vc=null,t.l=null,t.b=null,!t.G){e.A(0);break}return S(e,t.G.destroy(),5);case 5:t.G=null,E(e)}})})},qs.prototype.destroy=qs.prototype.destroy,qs.version="v2.5.5";var Ks=["2","5"];or=new function(t){this.a=t,this.c=rr,this.b=ir}(new er(Number(Ks[0]),Number(Ks[1])));var Fs=["output-restricted","internal-error"],Vs={};function Hs(t,e){return p(function n(){return N(n,function(n){switch(n.j){case 1:if(t.h!=Eu&&(t.h=Tu),t.dispatchEvent(new St("unloading")),e.ya=null,e.mimeType=null,e.startTime=null,e.uri=null,e.u&&(t.i.ea(e.u,"loadeddata"),t.i.ea(e.u,"playing"),t.i.ea(e.u,"pause"),t.i.ea(e.u,"ended"),t.i.ea(e.u,"ratechange")),t.gb&&(t.gb.release(),t.gb=null),t.Tb&&(t.Tb.stop(),t.Tb=null),!t.m){n.A(2);break}return S(n,t.m.stop(),3);case 3:t.m=null;case 2:if(!t.l){n.A(4);break}return S(n,t.l.stop(),4);case 4:if(!t.f){n.A(6);break}return S(n,t.f.destroy(),7);case 7:t.f=null;case 6:if(t.s&&(t.s.release(),t.s=null),!t.D){n.A(8);break}return S(n,t.D.destroy(),9);case 9:t.D=null;case 8:if(e.u&&e.u.src&&(e.u.removeAttribute("src"),e.u.load()),!t.g){n.A(10);break}return S(n,t.g.destroy(),11);case 11:t.g=null;case 10:t.$.a.clear(),t.Bb=null,t.P=null,t.Wb.clear(),t.c=null,t.v=null,t.xc=null,t.ib=!0,tu(t),E(n)}})})}function Gs(t,e){t.P=new Co(e,Math.min(.5,e/2)),t.P.a=No,tu(t),t.Tb=new ft(function(){switch(t.h){case Iu:var e=!!t.a.ended||ze(t.a.buffered)>=t.a.duration-.1;break;case xu:t:if(t.a.ended||Tn(t.D))e=!0;else{if(t.c.presentationTimeline.V()){var n=t.c.presentationTimeline.nb();if(ze(t.a.buffered)>=n){e=!0;break t}}e=!1}break;default:e=!1}var r=qe(t.a.buffered,t.a.currentTime),i=e,o=(n=t.P).b.get(n.a);e=n.a,r=i||r>=o?Do:No,n.a=r,e!=r&&tu(t)}).La(.25)}function Ws(t){if(t.m&&t.m.configure(t.b.manifest),t.g&&t.g.configure(t.b.drm),t.f){t.f.configure(t.b.streaming);try{t.c.periods.forEach(t.Fc.bind(t))}catch(e){t.Ka(e)}var e=ha(t.f),n=pa(t.f),r=gu(t);e=Qn(e,n,r.variants),t.l&&e&&e.allowedByApplication&&e.allowedByKeySystem?nu(t,r.variants):ru(t,r)}if(t.D&&(r=t.b.textDisplayFactory,t.xc!=r)){e=new r;var i=(n=t.D).g;n.g=e,i&&(e.setTextVisibility(i.isTextVisible()),i.destroy()),n.a&&(n.a.c=e),t.xc=r,t.f&&((e=(r=t.f).b.get("text"))&&ga(r,e.stream,!0,0,!0))}t.l&&(t.l.configure(t.b.abr),t.b.abr.enabled&&!t.ib?t.l.enable():t.l.disable(),cu(t))}function Xs(t,e,n,r){xo(t.$,e).variant=n,(t=t.v.c).c!=n&&(t.c=n,t.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function Ys(t,e,n,r){To(t.$,e,n),(t=t.v.c).b!=n&&(t.b=n,t.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function $s(t){var e=Ns();return e.streaming.failureCallback=function(e){t.V()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,t.gd())},e.textDisplayFactory=function(){return new As(t.a)},e}function Js(t,e){var n=t.f?ha(t.f):null,r=t.f?pa(t.f):null;if(e.forEach(qn.bind(null,t.g,n,r)),0==(n=function(t,e){var n=0;return t.forEach(function(t){n+=e(t)?1:0}),n}(e,function(t){return t.variants.some(Xn)})))throw new pt(2,4,4032);if(n<e.length)throw new pt(2,4,4011);e.forEach(function(t){Bn(t.variants,this.b.restrictions,this.Xb)&&this.f&&gu(this)==t&&ou(this),du(this,t.variants)}.bind(t))}function Qs(t,e,n,r){n=void 0!==n&&n,r=void 0===r?0:r,t.ib?(t.Ea=e,t.Dd=n,t.Bd=r):(ma(t.f,e,n,r),au(t))}function Zs(t,e){t.ib?t.na=e:(ga(t.f,e,!0,0,!1),su(t))}function tu(t){var e=t.Oc();if(t.v&&t.P&&t.s){var n=t.W;n.f=e,Wo(n),eu(t)}t.dispatchEvent(new St("buffering",{buffering:e}))}function eu(t){if(t.v&&t.P){var e=t.v.a;t.P.a==No?Ls(e,"buffering"):t.a.paused?Ls(e,"paused"):t.a.ended?Ls(e,"ended"):Ls(e,"playing")}}function nu(t,e){try{du(t,e)}catch(e){return t.Ka(e),null}var n=e.filter(function(t){return Xn(t)});return n=t.Ub.create(n),t.l.setVariants(Array.from(n.values())),t.l.chooseVariant()}function ru(t,e){var n=nu(t,e.variants);n&&(Xs(t,e,n,!0),Qs(t,n,!0)),(n=$n(e.textStreams,t.ma,t.cb)[0]||null)&&(t.b.streaming.alwaysStreamText||t.gc())&&(Ys(t,e,n,!0),Zs(t,n)),iu(t)}function iu(t){vu(t,new St("adaptation"))}function ou(t){vu(t,new St("trackschanged"))}function au(t){vu(t,new St("variantchanged"))}function su(t){vu(t,new St("textchanged"))}function uu(t){vu(t,new St("texttrackvisibility"))}function cu(t){vu(t,new St("abrstatuschanged",{rg:t.b.abr.enabled}))}function fu(t,e,n){t.dispatchEvent(new St(e,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function lu(t){if(!t.a.error)return null;var e=t.a.error.code;if(1==e)return null;var n=t.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pt(2,3,3016,e,n,t.a.error.message)}function hu(t,e){if(t.f){var n=gu(t),r=!1,i=Object.keys(e),o=1==i.length&&"00"==i[0];i.length&&n.variants.forEach(function(t){(function(t){var e=[];return t.audio&&e.push(t.audio),t.video&&e.push(t.video),e})(t).forEach(function(n){var i=t.allowedByKeySystem;n.keyId&&(n=e[o?"00":n.keyId],t.allowedByKeySystem=!!n&&!Fs.includes(n)),i!=t.allowedByKeySystem&&(r=!0)})}),(i=Qn(i=ha(t.f),pa(t.f),n.variants))&&!i.allowedByKeySystem&&ru(t,n),r&&(ou(t),nu(t,n.variants))}}function pu(t,e,n){t.m&&t.m.onExpirationUpdated&&t.m.onExpirationUpdated(e,n),t.dispatchEvent(new St("expirationupdated"))}function du(t,e){var n=t.g?Yt(t.g.T):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,o=!1,a=[],s=[],u=l(e),c=u.next();!c.done;c=u.next()){var f=[];(c=c.value).audio&&f.push(c.audio),c.video&&f.push(c.video);for(var h=(f=l(f)).next();!h.done;h=f.next())if((h=h.value).keyId){var p=n[r?"00":h.keyId];p?Fs.includes(p)&&(s.includes(p)||s.push(p)):a.includes(h.keyId)||a.push(h.keyId)}c.allowedByApplication?c.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw new pt(2,4,4012,{hasAppRestrictions:o,missingKeys:a,restrictedKeyStatuses:s})}function vu(t,e){p(function n(){return N(n,function(n){switch(n.j){case 1:return S(n,Promise.resolve(),2);case 2:t.h!=Eu&&t.dispatchEvent(e),E(n)}})})}function yu(t){for(var e=new Set,n=(t=l(t)).next();!n.done;n=t.next())(n=n.value).language?e.add(Dn(n.language)):e.add("und");return e}function mu(t){for(var e=new Map,n=(t=l(t)).next();!n.done;n=t.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=Dn(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),e.has(n)||e.set(n,new Set),i=(r=l(i)).next();!i.done;i=r.next())i=i.value,e.get(n).add(i)}var o=[];return e.forEach(function(t,e){for(var n=l(t),r=n.next();!r.done;r=n.next())o.push({language:e,role:r.value})}),o}function gu(t){for(var e=t.s.h(),n=null,r=(t=l(t.c.periods)).next();!r.done;r=t.next())(r=r.value).startTime<=e&&(n=r);return n}function bu(t){var e=gu(t);return xo(t.$,e).variant}function wu(){return new pt(2,7,7e3)}function _u(t,e,n,r,i,o){return r==t&&i.u==o.u&&i.uri==o.uri&&i.mimeType==o.mimeType&&i.ya==o.ya?e:n}function Su(t){return new Promise(function(e,n){t.Wa=function(){return n(wu())},t.jc=function(){return e()},t.onError=function(t){return n(t)},t.lc=function(){return n(wu())}})}qs.registerSupportPlugin=function(t,e){Vs[t]=e},qs.isBrowserSupported=function(){return!!(t.Promise&&t.Uint8Array&&Array.prototype.forEach&&t.MediaKeys&&t.navigator&&t.navigator.requestMediaKeySystemAccess&&t.MediaKeySystemAccess&&t.MediaKeySystemAccess.prototype.getConfiguration)&&(!!Zt()||te("application/x-mpegurl"))},qs.probeSupport=function(){return Me().then(function(t){for(var e=xi.Af(),n={},r=l('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){n[i=i.value]=Zt()?!!mn(i)||(MediaSource.isTypeSupported(i)||Ye(i)):te(i);var o=i.split(";")[0];n[o]=n[o]||n[i]}for(var a in t={manifest:e,media:n,drm:t},Vs)t[a]=Vs[a]();return t})},qs.prototype.Cb=function(t,e){if(e=void 0===e||e,this.h==Eu)return Promise.reject(wu());var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};n.u=t,Zt()||(e=!1);var r=e?this.fb:this.M,i=Is(this.jb,function(){return{node:r,payload:n,Ta:!1}});return i.tb=function(){},Su(i)},qs.prototype.attach=qs.prototype.Cb,qs.prototype.detach=function(){var t=this;if(this.h==Eu)return Promise.reject(wu());var e=Is(this.jb,function(){return{node:t.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}});return e.tb=function(){},Su(e)},qs.prototype.detach=qs.prototype.detach,qs.prototype.rd=function(t){var e=this;if(t=void 0===t||t,this.h==Eu)return Promise.reject(wu());Zt()||(t=!1);var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},r=Is(this.jb,function(r){var i=r.u&&t?e.fb:r.u?e.M:e.C;return n.u=r.u,{node:i,payload:n,Ta:!1}});return r.tb=function(){},Su(r)},qs.prototype.unload=qs.prototype.rd,qs.prototype.load=function(t,e,n){if(this.h==Eu)return Promise.reject(wu());this.dispatchEvent(new St("loading"));var r={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};r.uri=t,r.od=Date.now()/1e3,n&&"string"!=typeof n&&(nr("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.ya=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==e&&(r.startTime=e);var i=function(t){if(t.ya)return!1;if(!Zt())return!0;var e=t.mimeType;return t=t.uri||"",e||(e={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[xi.getExtension(t)]),!!e&&!!te(e)&&(!xi.isSupported(t,e)||!!navigator.vendor&&navigator.vendor.includes("Apple"))}(r)?this.hb:this.T,o=Is(this.jb,function(t){return null==t.u?null:(r.u=t.u,{node:i,payload:r,Ta:!0})});return o.tb=function(){},new Promise(function(t,e){o.lc=function(){return e(new pt(2,7,7002))},o.jc=function(){return t()},o.Wa=function(){return e(wu())},o.onError=function(t){return e(t)}})},qs.prototype.load=qs.prototype.load,qs.prototype.configure=function(t,e){2==arguments.length&&"string"==typeof t&&(t=Os(t,e));var n=Ds(this.b,t,$s(this));return Ws(this),n},qs.prototype.configure=qs.prototype.configure,qs.prototype.getConfiguration=function(){var t=$s(this);return Ds(t,this.b,$s(this)),t},qs.prototype.getConfiguration=qs.prototype.getConfiguration,qs.prototype.If=function(){for(var t in this.b)delete this.b[t];Ds(this.b,$s(this),$s(this)),Ws(this)},qs.prototype.resetConfiguration=qs.prototype.If,qs.prototype.Je=function(){return this.h},qs.prototype.getLoadMode=qs.prototype.Je,qs.prototype.Ne=function(){return this.a},qs.prototype.getMediaElement=qs.prototype.Ne,qs.prototype.Fb=function(){return this.G},qs.prototype.getNetworkingEngine=qs.prototype.Fb,qs.prototype.bc=function(){return this.Bb},qs.prototype.getAssetUri=qs.prototype.bc,qs.prototype.Me=function(){return nr("getManifestUri",'Please use "getAssetUri" instead.'),this.bc()},qs.prototype.getManifestUri=qs.prototype.Me,qs.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},qs.prototype.isLive=qs.prototype.V,qs.prototype.Va=function(){return!!this.c&&this.c.presentationTimeline.Va()},qs.prototype.isInProgress=qs.prototype.Va,qs.prototype.af=function(){if(this.c){if(!this.c.periods.length)return!1;var t=this.c.periods[0].variants;return!!t.length&&!t[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},qs.prototype.isAudioOnly=qs.prototype.af,qs.prototype.Kf=function(){if(this.c){var t=this.c.presentationTimeline;return{start:t.mb(),end:t.za()}}return this.a&&this.a.src&&(t=this.a.seekable).length?{start:t.start(0),end:t.end(t.length-1)}:{start:0,end:0}},qs.prototype.seekRange=qs.prototype.Kf,qs.prototype.keySystem=function(){return this.g?this.g.keySystem():""},qs.prototype.keySystem=qs.prototype.keySystem,qs.prototype.drmInfo=function(){return this.g?this.g.a:null},qs.prototype.drmInfo=qs.prototype.drmInfo,qs.prototype.dc=function(){return this.g?this.g.dc():1/0},qs.prototype.getExpiration=qs.prototype.dc,qs.prototype.Oc=function(){return!!this.P&&this.P.a==No},qs.prototype.isBuffering=qs.prototype.Oc,qs.prototype.Qe=function(){if(this.W){var t=this.W;t=t.f?0:t.c}else t=0;return t},qs.prototype.getPlaybackRate=qs.prototype.Qe,qs.prototype.bg=function(t){0==t?W("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(t),this.h==xu&&ya(this.f,1<Math.abs(t)))},qs.prototype.trickPlay=qs.prototype.bg,qs.prototype.ue=function(){this.h==Iu&&this.W.set(1),this.h==xu&&(this.W.set(1),ya(this.f,!1))},qs.prototype.cancelTrickPlay=qs.prototype.ue,qs.prototype.Nc=function(){if(this.c&&this.s){for(var t=bu(this),e=[],n=l(function(t){return null==(t=gu(t))?[]:t.variants.filter(function(t){return Xn(t)})}(this)),r=n.next();!r.done;r=n.next()){var i=Fn(r=r.value);i.active=r==t,e.push(i)}return e}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(t){var e=Wn(t);return e.active=t.enabled,e.type="variant",e.originalAudioId=t.id,"main"==t.kind?(e.primary=!0,e.roles=["main"],e.audioRoles=["main"]):e.audioRoles=[],e}):[]},qs.prototype.getVariantTracks=qs.prototype.Nc,qs.prototype.ob=function(){if(this.c&&this.s){for(var t=function(t){var e=gu(t);if(null==e)return null;if(!xo(t.$,e).text){var n=$n(e.textStreams,t.ma,t.cb);n.length&&To(t.$,e,n[0])}return xo(t.$,e).text}(this),e=[],n=l(function(t){var e=gu(t);return null==e?[]:e.textStreams.filter(function(e){return!t.Wb.has(e)})}(this)),r=n.next();!r.done;r=n.next()){var i=Vn(r=r.value);i.active=r==t,e.push(i)}return e}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map(function(t){var e=Wn(t);return e.active="disabled"!=t.mode,e.type="text",e.originalTextId=t.id,"captions"==t.kind&&(e.mimeType="application/cea-608"),e}):[]},qs.prototype.getTextTracks=qs.prototype.ob,qs.prototype.hd=function(t){if(this.c&&this.f){var e=gu(this),n=e.textStreams.find(function(e){return e.id==t.id});n&&(Ys(this,e,n,!1),Zs(this,n),this.ma=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(e=l(e=Array.from(this.a.textTracks))).next();!n.done;n=e.next())Hn(n=n.value)==t.id?n.mode=this.eb?"showing":"hidden":n.mode="disabled";su(this)}},qs.prototype.selectTextTrack=qs.prototype.hd,qs.prototype.Mf=function(){nr("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var t=this.ob().filter(function(t){return"application/cea-608"==t.mimeType});0<t.length&&this.hd(t[0])},qs.prototype.selectEmbeddedTextTrack=qs.prototype.Mf,qs.prototype.gg=function(){nr("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var t=this.ob().filter(function(t){return t.active})[0];return!!t&&"application/cea-608"==t.mimeType},qs.prototype.usingEmbeddedTextTrack=qs.prototype.gg,qs.prototype.Of=function(t,e,n){if(n=void 0===n?0:n,this.c&&this.f){var r=gu(this);this.b.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find(function(e){return e.id==t.id});i&&Xn(i)&&(Xs(this,r,i,!1),Qs(this,i,e,n),this.Ub=new Ro(i),nu(this,r.variants))}else if(this.a&&this.a.audioTracks){for(n=(e=l(e=Array.from(this.a.audioTracks))).next();!n.done;n=e.next())Hn(n=n.value)==t.id&&(n.enabled=!0);au(this)}},qs.prototype.selectVariantTrack=qs.prototype.Of,qs.prototype.Ee=function(){return mu(this.Nc())},qs.prototype.getAudioLanguagesAndRoles=qs.prototype.Ee,qs.prototype.Xe=function(){return mu(this.ob())},qs.prototype.getTextLanguagesAndRoles=qs.prototype.Xe,qs.prototype.De=function(){return Array.from(yu(this.Nc()))},qs.prototype.getAudioLanguages=qs.prototype.De,qs.prototype.We=function(){return Array.from(yu(this.ob()))},qs.prototype.getTextLanguages=qs.prototype.We,qs.prototype.Lf=function(t,e){if(this.c&&this.s){var n=gu(this);this.Ub=new Oo(t,e||"",0),ru(this,n)}else if(this.a&&this.a.audioTracks){for(var r=(n=l(n=Array.from(this.a.audioTracks))).next();!r.done;r=n.next())(r=r.value).language==t&&(r.enabled=!0);au(this)}},qs.prototype.selectAudioLanguage=qs.prototype.Lf,qs.prototype.Nf=function(t,e){if(this.c&&this.s){var n=gu(this);this.ma=t,this.cb=e||"";var r=$n(n.textStreams,this.ma,this.cb)[0]||null;r&&(Ys(this,n,r,!1),(this.b.streaming.alwaysStreamText||this.gc())&&Zs(this,r))}else(n=this.ob().filter(function(e){return e.language==t})[0])&&this.hd(n)},qs.prototype.selectTextLanguage=qs.prototype.Nf,qs.prototype.gc=function(){var t=this.eb;return this.c?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some(function(t){return"showing"==t.mode}):t},qs.prototype.isTextTrackVisible=qs.prototype.gc,qs.prototype.Rf=function(t){var e=this;return p(function n(){var r,i,o,a;return N(n,function(n){switch(n.j){case 1:if(e.eb==(r=t))return n.return();if(e.eb=r,e.h!=xu){if(e.a&&e.a.src&&e.a.textTracks)for(var s=l(Array.from(e.a.textTracks)),u=s.next();!u.done;u=s.next())"disabled"!=(i=u.value).mode&&(i.mode=t?"showing":"hidden");n.A(2);break}if(e.D.g.setTextVisibility(t),e.b.streaming.alwaysStreamText){n.A(2);break}if(!t){(s=e.f).D=!0,(u=s.b.get("text"))&&(Da(u),s.b.delete("text")),n.A(2);break}if(o=gu(e),!(0<(a=$n(o.textStreams,e.ma,e.cb)).length)){n.A(2);break}return S(n,va(e.f,a[0]),2);case 2:uu(e),E(n)}})})},qs.prototype.setTextTrackVisibility=qs.prototype.Rf,qs.prototype.Se=function(){if(!this.V())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var t=this.a.getStartDate();return isNaN(t.getTime())?null:new Date(t.getTime()+1e3*this.a.currentTime)}return null},qs.prototype.getPlayheadTimeAsDate=qs.prototype.Se,qs.prototype.Ue=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var t=this.a.getStartDate();return isNaN(t.getTime())?null:t}return null},qs.prototype.getPresentationStartTimeAsDate=qs.prototype.Ue,qs.prototype.Jc=function(){var t={total:[],audio:[],video:[],text:[]};return this.h==Iu&&(t.total=Ke(this.a.buffered)),this.h==xu&&this.D.Jc(t),t},qs.prototype.getBufferedInfo=qs.prototype.Jc,qs.prototype.getStats=function(){if(this.h!=xu&&this.h!=Iu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};eu(this);var t=this.a;if(t.getVideoPlaybackQuality){t=t.getVideoPlaybackQuality();var e=this.v,n=Number(t.totalVideoFrames);e.i=Number(t.droppedVideoFrames),e.h=n}this.h==xu&&((t=bu(this))&&(this.v.l=t.bandwidth),t&&t.video&&(e=this.v,n=t.video.height||NaN,e.m=t.video.width||NaN,e.g=n),t=this.l.getBandwidthEstimate(),this.v.f=t);var r=this.v;t=r.m,e=r.g,n=r.l;for(var i=r.h,o=r.i,a=r.f,s=r.b,u=Us(r.a,"playing"),c=Us(r.a,"paused"),f=Us(r.a,"buffering"),h=function(t){function e(t){return{timestamp:t.timestamp,state:t.state,duration:t.duration}}for(var n=[],r=l(t.b),i=r.next();!i.done;i=r.next())n.push(e(i.value));return t.a&&n.push(e(t.a)),n}(r.a),p=[],d=(r=l(r.c.a)).next();!d.done;d=r.next())d=d.value,p.push({timestamp:d.timestamp,id:d.id,type:d.type,fromAdaptation:d.fromAdaptation,bandwidth:d.bandwidth});return{width:t,height:e,streamBandwidth:n,decodedFrames:i,droppedFrames:o,estimatedBandwidth:a,loadLatency:s,playTime:u,pauseTime:c,bufferingTime:f,stateHistory:h,switchHistory:p}},qs.prototype.getStats=qs.prototype.getStats,qs.prototype.addTextTrack=function(t,e,n,r,i,o){var a=this;return p(function s(){var u,c,f,l,h,p,d,v,y;return N(s,function(s){switch(s.j){case 1:if(a.h==Iu)throw Error("State error!");if(a.h!=xu)throw Error("State error!");if(u=gu(a),c=Ge,f=a.c.periods.indexOf(u),h=(l=f+1)>=a.c.periods.length?a.c.presentationTimeline.Y():a.c.periods[l].startTime,1/0==(p=h-u.startTime))throw new pt(1,4,4033);return d=new si(1,0,p,function(){return[t]},0,null),v={id:a.Hd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1==t?d:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:e,label:o||null,type:c.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},a.Wb.add(v),u.textStreams.push(v),S(s,va(a.f,v),2);case 2:return(y=da(a.f,"text"))&&To(a.$,u,y),a.Wb.delete(v),ru(a,u),ou(a),s.return(Vn(v))}})})},qs.prototype.addTextTrack=qs.prototype.addTextTrack,qs.prototype.kd=function(t,e){this.Xb.width=t,this.Xb.height=e},qs.prototype.setMaxHardwareResolution=qs.prototype.kd,qs.prototype.gd=function(){if(this.h==xu){var t=this.f;if(t.f)t=!1;else if(t.m)t=!1;else{for(var e=l(t.b.values()),n=e.next();!n.done;n=e.next())(n=n.value).Ib&&(n.Ib=!1,Na(t,n,.1));t=!0}}else t=!1;return t},qs.prototype.retryStreaming=qs.prototype.gd,qs.prototype.Ke=function(){return this.c},qs.prototype.getManifest=qs.prototype.Ke,qs.prototype.Le=function(){return this.m?this.m.constructor:null},qs.prototype.getManifestParserFactory=qs.prototype.Le,(n=qs.prototype).Fc=function(t){var e=this.f?ha(this.f):null,n=this.f?pa(this.f):null;if(qn(this.g,e,n,t),!(e=t.variants).some(Xn))throw new pt(2,4,4011);if(du(this,t.variants),Bn(e,this.b.restrictions,this.Xb)&&this.f&&gu(this)==t&&ou(this),t=this.g?this.g.a:null)for(n=(e=l(e)).next();!n.done;n=e.next())for(var r=(n=l(n.value.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t.keySystem)for(var i=(r=l(r.initData||[])).next();!i.done;i=r.next())i=i.value,Se(this.g,i.initDataType,i.initData)},n.df=function(t){try{this.ib=!0,this.l.disable(),cu(this);var e=nu(this,t.variants),n=$n(t.textStreams,this.ma,this.cb)[0]||null;this.Ea&&(t.variants.includes(this.Ea)&&(e=this.Ea),this.Ea=null),this.na&&(t.textStreams.includes(this.na)&&(n=this.na),this.na=null),e&&Xs(this,t,e,!0),n&&Ys(this,t,n,!0);var r=this.f,i=r.b.get("video");if(i)var o=r.c.periods[i.pa];else{var a=r.b.get("audio");o=a?r.c.periods[a.pa]:null}var s=e?e.audio:null;if(!o&&n){var u;if(u=s){t=n;var c=Dn(this.b.preferredTextLanguage),f=Dn(s.language),l=Dn(t.language);u=Cn(l,c)&&!Cn(f,l)}u&&(this.eb=!0),this.eb&&this.D.g.setTextVisibility(!0),uu(this)}return this.b.streaming.alwaysStreamText||this.gc()?{variant:e,text:n}:{variant:e,text:null}}catch(t){return this.Ka(t),{variant:null,text:null}}},n.te=function(){this.ib=!1,this.b.abr.enabled&&(this.l.enable(),cu(this)),this.Ea&&(ma(this.f,this.Ea,this.Dd,this.Bd),au(this),this.Ea=null),this.na&&(ga(this.f,this.na,!0,0,!1),su(this),this.na=null)},n.jf=function(){this.m&&this.m.update&&this.m.update()},n.qf=function(){this.s&&this.s.s()},n.Ka=function(t){if(this.h!=Eu){var e=new St("error",{detail:t});this.dispatchEvent(e),e.defaultPrevented&&(t.handled=!0)}};var Eu=0,Tu=1,xu=2,Iu=3;function ku(t,e){var n=gs(new ms(t.ua(),t.aa()),e.periods[0],new Ii(null,0)),r=e.appMetadata||{};return n=Au(n),{offlineUri:t.toString(),originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration,tracks:n,appMetadata:r}}function Au(t){for(var e=[],n=function(t){return t.filter(function(t){return Xn(t)})}(t.variants),r=(n=l(n)).next();!r.done;r=n.next())e.push(Fn(r.value));for(n=(t=l(t.textStreams)).next();!n.done;n=t.next())e.push(Vn(n.value));return e}function Mu(){this.a={}}function Pu(t,e){var n=t.a[e];return null==n&&(n=0),n}function Ru(t){this.a=!1,this.b=new dt,this.c=t}function Ou(t){var e=new Nu;t.periods.forEach(function(t,n){var r=ju(t.variants);if(0==n)for(var i=(r=l(r.a)).next();!i.done;i=r.next())e.add(i.value);else!function(t,e){t.a=t.a.filter(function(t){return Du(e,t)})}(e,r)});for(var n=(t=l(t.periods)).next();!n.done;n=t.next())(n=n.value).variants=n.variants.filter(function(t){return Du(e,new Cu(t))})}function Cu(t){var e=t.audio;t=t.video,this.b=e?e.mimeType:null,this.a=e?e.codecs.split(".")[0]:null,this.f=t?t.mimeType:null,this.c=t?t.codecs.split(".")[0]:null}function Nu(){this.a=[]}function Du(t,e){return t.a.some(function(t){return e.b==t.b&&e.a==t.a&&e.f==t.f&&e.c==t.c})}function ju(t){for(var e=new Nu,n=(t=l(t)).next();!n.done;n=t.next())e.add(new Cu(n.value));return e}function Lu(t){var e=this;if(t&&t.constructor!=qs)throw new pt(2,9,9008);this.b=this.a=null,t?(this.a=t.b,this.b=t.Fb()):(this.a=Ns(),this.b=new Rt),this.f=!1,this.c=[],this.g=[];var n=!t;this.h=new Ru(function(){return p(function t(){var r;return N(t,function(t){switch(t.j){case 1:return r=function(){},S(t,Promise.all(e.g.map(function(t){return t.then(r,r)})),2);case 2:if(!n){t.A(3);break}return S(t,e.b.destroy(),3);case 3:e.a=null,e.b=null,E(t)}})})})}function Uu(){if(Zt())t:{for(var t=l(Za.values()),e=t.next();!e.done;e=t.next())if(e=(e=e.value)()){e.destroy(),t=!0;break t}t=!1}else t=!1;return t}function zu(t,e){for(var n=[],r=l(t.periods),i=r.next();!i.done;i=r.next())for(var o=(i=l(i.value.streams)).next();!o.done;o=i.next())o=o.value,e&&"video"==o.contentType?n.push({contentType:$t(o.mimeType,o.codecs),robustness:t.drmInfo.videoRobustness}):e||"audio"!=o.contentType||n.push({contentType:$t(o.mimeType,o.codecs),robustness:t.drmInfo.audioRobustness});return n}function Bu(t,e,n){return p(function r(){return N(r,function(r){switch(r.j){case 1:return S(r,function(t,e,n,r){return p(function i(){var o,a,s;return N(i,function(i){switch(i.j){case 1:return r.drmInfo?(o=function(t){var e=Array.from(t.a.keys());if(!e.length)throw new pt(2,9,9e3,"No supported storage mechanisms found");return t.a.get(e[0]).getEmeSessionCell()}(n),a=r.sessionIds.map(function(t){return{sessionId:t,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:zu(r,!1),videoCapabilities:zu(r,!0)}}),S(i,Es(e,t,a),2)):i.return();case 2:return s=i.o,S(i,o.remove(s),3);case 3:return S(i,o.add(a.filter(function(t){return-1==s.indexOf(t.sessionId)})),0)}})})}(t.b,t.a.drm,n,e),0)}})})}function qu(t,e,n,r){function i(){s+=1,t.a.offline.progressCallback(u,s/a)}var o=function(t){var e=[];return t.periods.forEach(function(t){t.streams.forEach(function(t){null!=t.initSegmentKey&&e.push(t.initSegmentKey),t.segments.forEach(function(t){e.push(t.dataKey)})})}),e}(r),a=o.length+1,s=0,u=ku(n,r);return Promise.all([e.removeSegments(o,i),e.removeManifests([n.key()],i)])}function Ku(t,e,n,r,i,o){var a={id:o.id,originalId:o.originalId,primary:o.primary,presentationTimeOffset:o.presentationTimeOffset||0,contentType:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,initSegmentKey:null,encrypted:o.encrypted,keyId:o.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Hb();var s=o.id;return function(t,e,n){for(var r=null==(e=t.findSegmentPosition(e))?null:t.getSegmentReference(e);r;)n(r),r=t.getSegmentReference(++e)}(o,i,function(i){var u=ki(i.c(),i.b,i.a,t.a.streaming.retryParameters);Ka(e,s,u,function(t,e,n){return n=n.endTime-n.startTime,Pu(t,e)*n}(r,o.id,i),function(e){return n.addSegments([{data:e}]).then(function(e){t.c.push(e[0]),a.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:e[0]})})})}),(i=o.initSegmentReference)&&(i=ki(i.c(),i.b,i.a,t.a.streaming.retryParameters),Ka(e,s,i,.5*Pu(r,o.id),function(e){return n.addSegments([{data:e}]).then(function(e){t.c.push(e[0]),a.initSegmentKey=e[0]})})),a}function Fu(t){if(t.h.a)throw new pt(2,9,7001)}function Vu(){if(!Uu())throw new pt(2,9,9e3)}function Hu(t,e){return p(function n(){return N(n,function(n){switch(n.j){case 1:return t.g.push(e),x(n,2),S(n,e,4);case 4:return n.return(n.o);case 2:A(n),kt(t.g,e),M(n,0)}})})}function Gu(t){for(var e=new Set,n=(t=l(t.periods)).next();!n.done;n=t.next()){for(var r=l((n=n.value).textStreams),i=r.next();!i.done;i=r.next())e.add(i.value);for(r=(n=l(n.variants)).next();!r.done;r=n.next())(r=r.value).audio&&e.add(r.audio),r.video&&e.add(r.video)}return e}function Wu(t){t.variants.map(function(t){return t.video});var e=new Set(t.variants.map(function(t){return t.audio}));t=t.textStreams;for(var n=l(e),r=n.next();!r.done;r=n.next())for(var i=(r=l(e)).next();!i.done;i=r.next());for(n=(e=l(t)).next();!n.done;n=e.next())for(r=(n=l(t)).next();!r.done;r=n.next());}qs.LoadMode={DESTROYED:Eu,NOT_LOADED:Tu,MEDIA_SOURCE:xu,SRC_EQUALS:Iu},Ru.prototype.destroy=function(){var t=this;return this.a?this.b:(this.a=!0,this.c().then(function(){t.b.resolve()},function(){t.b.resolve()}))},Nu.prototype.add=function(t){Du(this,t)||this.a.push(t)},B("shaka.offline.Storage",Lu),Lu.support=Uu,Lu.prototype.destroy=function(){return this.h.destroy()},Lu.prototype.destroy=Lu.prototype.destroy,Lu.prototype.configure=function(t,e){2==arguments.length&&"string"==typeof t&&(t=Os(t,e));var n=t,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&nr("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ds(this.a,t)},Lu.prototype.configure=Lu.prototype.configure,Lu.prototype.getConfiguration=function(){var t=Ns();return Ds(t,this.a,Ns()),t},Lu.prototype.getConfiguration=Lu.prototype.getConfiguration,Lu.prototype.Fb=function(){return this.b},Lu.prototype.getNetworkingEngine=Lu.prototype.Fb,Lu.prototype.store=function(t,e,n){var r=this;return Hu(this,function(t,e,n,r){return p(function i(){var o,a,s,u,c,f,h,d,v;return N(i,function(i){switch(i.j){case 1:return Vu(),t.f?i.return(Promise.reject(new pt(2,9,9006))):(t.f=!0,S(i,function(t,e,n){return p(function r(){var i,o,a,s,u,c;return N(r,function(r){switch(r.j){case 1:return i=null,o=t.b,a={networkingEngine:o,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(t){i=t}},S(r,n(),2);case 2:return(s=r.o).configure(t.a.manifest),Fu(t),x(r,3),S(r,s.start(e,a),5);case 5:return u=r.o,Fu(t),c=Gu(u),S(r,Promise.all(Array.from(c).map(function(t){return t.createSegmentIndex()})),6);case 6:if(Fu(t),i)throw i;return r.return(u);case 3:return A(r),S(r,s.stop(),7);case 7:M(r,0)}})})}(t,e,r),2));case 2:if(o=i.o,Fu(t),!(!o.presentationTimeline.V()&&!o.presentationTimeline.Va()))throw new pt(2,9,9005,e);return a=null,s=new $a,c=u=null,T(i,3,4),S(i,function(t,e,n){return p(function r(){var i,o,a;return N(r,function(r){switch(r.j){case 1:return i=new me({rb:t.b,onError:n,kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o=Fo(e.periods),a=t.a,i.configure(a.drm),S(r,function(t,e,n){return t.s=[],t.D=n,be(t,e)}(i,o,a.offline.usePersistentLicense),2);case 2:return S(r,we(i),3);case 3:return S(r,_e(i),4);case 4:return r.return(i)}})})}(t,o,function(t){c=c||t}),6);case 6:if(a=i.o,Fu(t),c)throw c;return function(t,e,n){(function(t,e){for(var n={width:1/0,height:1/0},r=l(t.periods),i=r.next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter(function(t){return zn(t,e,n)})})(e,t.a.restrictions),function(t){for(var e=(t=l(t.periods)).next();!e.done;e=t.next())(e=e.value).variants=e.variants.filter(function(t){var e=!0;return t.audio&&(e=e&&Sn(t.audio)),t.video&&(e=e&&Sn(t.video)),e})}(e),function(t,e){for(var n=l(t.periods),r=n.next();!r.done;r=n.next())(r=r.value).variants=r.variants.filter(function(t){return Pe(e,t)})}(e,n),Ou(e),function(t,e){var n=new Nu;t.periods.forEach(function(t,r){0<r&&(t.variants=t.variants.filter(function(t){return Du(n,new Cu(t))})),e(t),n=ju(t.variants)})}(e,function(e){for(var n=[],r=l(e.variants),i=r.next();!i.done;i=r.next())n.push(Fn(i.value));for(r=l(e.textStreams),i=r.next();!i.done;i=r.next())n.push(Vn(i.value));n=t.a.offline.trackSelectionCallback(n);var o=new Set,a=new Set;for(n=l(n),r=n.next();!r.done;r=n.next())"variant"==(r=r.value).type&&o.add(r.id),"text"==r.type&&a.add(r.id);e.variants=e.variants.filter(function(t){return o.has(t.id)}),e.textStreams=e.textStreams.filter(function(t){return a.has(t.id)})}),function(t){if(0==t.periods.length)throw new pt(2,4,4014);for(var e=(t=l(t.periods)).next();!e.done;e=t.next())Wu(e.value)}(e)}(t,o,a),S(i,s.init(),7);case 7:return Fu(t),S(i,function(t){var e=null;if(t.a.forEach(function(t,n){t.getCells().forEach(function(t,r){t.hasFixedKeySpace()||e||(e={path:{ua:n,aa:r},aa:t})})}),e)return e;throw new pt(2,9,9013,"Could not find a cell that supports add-operations")}(s),8);case 8:return u=i.o,Fu(t),S(i,function(t,e,n,r,i,o){return p(function a(){var s,u,c,f;return N(a,function(a){switch(a.j){case 1:return s=function(t,e,n){var r=void 0==e.expiration?1/0:e.expiration;return{offlineUri:null,originalManifestUri:t,duration:e.presentationTimeline.Y(),size:0,expiration:r,tracks:e=Au(e.periods[0]),appMetadata:n}}(i,r,o),u=new qa(t.b,function(e,n){s.size=n,t.a.offline.progressCallback(s,e)}),x(a,2),f=c=function(t,e,n,r,i,o,a){var s=new Mu,u=i.periods.map(function(r){return function(t,e,n,r,i,o){i.periods.forEach(function(t){t.variants.forEach(function(t){var e=t.audio,n=t.video;if(e&&!n&&(r.a[e.id]=e.bandwidth||t.bandwidth),!e&&n&&(r.a[n.id]=n.bandwidth||t.bandwidth),e&&n){var i=e.bandwidth||393216,o=n.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth),r.a[e.id]=i,r.a[n.id]=o}}),t.textStreams.forEach(function(t){r.a[t.id]=52})});for(var a=Gu(i),s=new Map,u=(a=l(a)).next();!u.done;u=a.next()){u=u.value;var c=Ku(t,e,n,r,i,u);s.set(u.id,c)}return o.variants.forEach(function(t){t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id)}),{startTime:o.startTime,streams:Array.from(s.values())}}(t,e,n,s,i,r)}),c=r.a,f=Te(r);if(c&&t.a.offline.usePersistentLicense){if(!f.length)throw new pt(2,9,9007,o);c.initData=[]}return{originalManifestUri:o,duration:i.presentationTimeline.Y(),size:0,expiration:r.dc(),periods:u,sessionIds:t.a.offline.usePersistentLicense?f:[],drmInfo:c,appMetadata:a}}(t,u,e,n,r,i,o),S(a,function(t){return p(function e(){return N(e,function(e){switch(e.j){case 1:return S(e,Promise.all(t.b.values()),2);case 2:return e.return(t.a.a)}})})}(u),4);case 4:return f.size=a.o,a.return(c);case 2:return A(a),S(a,u.destroy(),5);case 5:M(a,0)}})})}(t,u.aa,a,o,e,n),9);case 9:if(f=i.o,Fu(t),c)throw c;return S(i,u.aa.addManifests([f]),10);case 10:return h=i.o,Fu(t),d=new vs("manifest",u.path.ua,u.path.aa,h[0]),i.return(ku(d,f));case 4:return A(i),t.f=!1,t.c=[],S(i,s.destroy(),11);case 11:if(!a){i.A(12);break}return S(i,a.destroy(),12);case 12:M(i,0);break;case 3:if(v=k(i),!u){i.A(14);break}return S(i,u.aa.removeSegments(t.c,function(){}),14);case 14:throw c||v}})})}(this,t,e||{},function(){return p(function e(){var i,o;return N(e,function(e){switch(e.j){case 1:return n&&"string"!=typeof n?(nr("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,e.return(new i)):S(e,xi.create(t,r.b,r.a.manifest.retryParameters,n),2);case 2:return o=e.o,e.return(o)}})})}))},Lu.prototype.store=Lu.prototype.store,Lu.prototype.Ve=function(){return this.f},Lu.prototype.getStoreInProgress=Lu.prototype.Ve,Lu.prototype.remove=function(t){return Hu(this,function(t,e){return p(function n(){var r,i,o,a,s,u;return N(n,function(n){switch(n.j){case 1:return Vu(),null==(r=ys(e))||"manifest"!=r.a?n.return(Promise.reject(new pt(2,9,9004,e))):(i=r,o=new $a,x(n,2),S(n,o.init(),4));case 4:return S(n,Ja(o,i.ua(),i.aa()),5);case 5:return a=n.o,S(n,a.getManifests([i.key()]),6);case 6:return s=n.o,u=s[0],S(n,Promise.all([Bu(t,u,o),qu(t,a,i,u)]),2);case 2:return A(n),S(n,o.destroy(),8);case 8:M(n,0)}})})}(this,t))},Lu.prototype.remove=Lu.prototype.remove,Lu.prototype.Ff=function(){return Hu(this,(t=this,p(function e(){var n,r,i,o,a,s,u,c,f;return N(e,function(e){switch(e.j){case 1:return Vu(),n=t.b,r=t.a.drm,i=new $a,o=!1,x(e,2),S(e,i.init(),4);case 4:for(a=[],function(t,e){t.a.forEach(function(t){e(t.getEmeSessionCell())})}(i,function(t){return a.push(t)}),s=Promise.resolve(),u={},c=l(a),f=c.next();!f.done;u={qc:u.qc},f=c.next())u.qc=f.value,s=s.then(function(t){return function(){return p(function e(){var i,a;return N(e,function(e){switch(e.j){case 1:return S(e,t.qc.getAll(),2);case 2:return i=e.o,S(e,Es(r,n,i),3);case 3:return a=e.o,S(e,t.qc.remove(a),4);case 4:a.length!=i.length&&(o=!0),E(e)}})})}}(u));return S(e,s,2);case 2:return A(e),S(e,i.destroy(),6);case 6:M(e,3);break;case 3:return e.return(!o)}})})));var t},Lu.prototype.removeEmeSessions=Lu.prototype.Ff,Lu.prototype.list=function(){return Hu(this,p(function t(){var e,n,r;return N(t,function(t){switch(t.j){case 1:return Vu(),e=[],n=new $a,x(t,2),S(t,n.init(),4);case 4:return r=Promise.resolve(),function(t,e){t.a.forEach(function(t,n){t.getCells().forEach(function(t,r){e({ua:n,aa:r},t)})})}(n,function(t,n){r=r.then(function(){return p(function r(){return N(r,function(r){switch(r.j){case 1:return S(r,n.getAllManifests(),2);case 2:r.o.forEach(function(n,r){var i=ku(new vs("manifest",t.ua,t.aa,r),n);e.push(i)}),E(r)}})})})}),S(t,r,2);case 2:return A(t),S(t,n.destroy(),6);case 6:M(t,3);break;case 3:return t.return(e)}})}))},Lu.prototype.list=Lu.prototype.list,Lu.deleteAll=function(){return p(function t(){var e;return N(t,function(t){switch(t.j){case 1:return e=new $a,x(t,2),S(t,e.erase(),2);case 2:return A(t),S(t,e.destroy(),5);case 5:M(t,0)}})})},Vs.offline=Uu,B("shaka.polyfill.installAll",function(){for(var t=0;t<$u.length;++t)$u[t].re()});var Xu,Yu,$u=[];function Ju(t,e){for(var n={priority:e=e||0,re:t},r=0;r<$u.length;r++)if($u[r].priority<e)return void $u.splice(r,0,n);$u.push(n)}function Qu(t){var e=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"===typeof Event)var n=new Event(e,t);else(n=document.createEvent("Event")).initEvent(e,t.bubbles,t.cancelable);t.target.dispatchEvent(n)}function Zu(t,e,n){if("input"==t)switch(this.type){case"range":t="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,t,e,n)}function tc(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=t.apply(this,n)).abort=function(){},n}}function ec(t){var e=t.target,n=e.mediaSource_;if(n.Ed){for(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.xd=!0,t=0;t<n.sourceBuffers.length;++t)if(0==n.sourceBuffers[t].xd)return;n.Ed=!1}}function nc(t){t=t.target;for(var e=0;e<t.sourceBuffers.length;++e)t.sourceBuffers[e].removeEventListener("updateend",ec,!1);t.removeEventListener("sourceclose",nc,!1)}function rc(t,e){try{var n=new ic(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function ic(t,e){if(this.keySystem=t,t.startsWith("com.apple.fps"))for(var n=l(e),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,a=!1;if(i.audioCapabilities)for(var s=l(i.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){o=!0;var c=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(r.audioCapabilities.push(u),a=!0)}if(i.videoCapabilities)for(u=(i=l(i.videoCapabilities)).next();!u.done;u=i.next())(s=u.value).contentType&&(o=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(s),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=a?r:null}if(r)return void(this.a=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function oc(t){var e=this.mediaKeys;return e&&e!=t&&sc(e,null),delete this.mediaKeys,(this.mediaKeys=t)?sc(t,this):Promise.resolve()}function ac(t){this.b=new WebKitMediaKeys(t),this.a=new Kt}function sc(t,e){if(t.a.Ya(),!e)return Promise.resolve();t.a.w(e,"webkitneedkey",cc);try{return 1<=e.readyState?e.webkitSetMediaKeys(t.b):t.a.da(e,"loadedmetadata",function(){e.webkitSetMediaKeys(t.b)}),Promise.resolve()}catch(t){return Promise.reject(t)}}function uc(t){Tt.call(this),this.b=null,this.g=t,this.c=this.a=null,this.f=new Kt,this.sessionId="",this.expiration=NaN,this.closed=new dt,this.keyStatuses=new lc}function cc(t){var e=new Event("encrypted");e.initDataType="cenc",e.initData=t.initData,this.dispatchEvent(e)}function fc(t,e){var n=t.keyStatuses;n.size=void 0==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function lc(){this.size=0,this.a=void 0}function hc(t,e){try{var n=new pc(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function pc(t,e){this.keySystem=t;for(var n=!1,r=0;r<e.length;++r){var i=e[r],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){a=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(o.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)(u=i.videoCapabilities[s]).contentType&&(a=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(o.videoCapabilities.push(u),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=o)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function dc(t){var e=this.mediaKeys;return e&&e!=t&&yc(e,null),delete this.mediaKeys,(this.mediaKeys=t)?yc(t,this):Promise.resolve()}function vc(t){this.a=new MSMediaKeys(t),this.b=new Kt}function yc(t,e){if(t.b.Ya(),!e)return Promise.resolve();t.b.w(e,"msneedkey",gc);var n=t;try{return 1<=e.readyState?e.msSetMediaKeys(t.a):e.addEventListener("loadedmetadata",function t(){e.msSetMediaKeys(n.a),e.removeEventListener("loadedmetadata",t)}),Promise.resolve()}catch(t){return Promise.reject(t)}}function mc(t){Tt.call(this),this.c=null,this.g=t,this.b=this.a=null,this.f=new Kt,this.sessionId="",this.expiration=NaN,this.closed=new dt,this.keyStatuses=new wc}function gc(t){if(t.initData){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc",e.initData=function(t){if(!t)return t;var e=new Xr(t);if(1>=e.a.length)return t;for(var n=[],r=0;r<e.a.length;r++)n.push(t.subarray(e.a[r].start,e.a[r].end+1));for(t=[],e={},r=l(n),n=r.next();!n.done;e={fc:e.fc},n=r.next())e.fc=n.value,t.some(function(t){return function(e){return ve(e,t.fc)}}(e))||t.push(e.fc);for(e=0,r=l(t),n=r.next();!n.done;n=r.next())e+=n.value.length;for(e=new Uint8Array(e),r=0,t=l(t),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,r),r+=n.length;return e}(t.initData),this.dispatchEvent(e)}}function bc(t,e){var n=t.keyStatuses;n.size=void 0==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function wc(){this.size=0,this.a=void 0}function _c(){return Promise.reject(Error("The key system specified is not supported."))}function Sc(t){return null==t?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ec(){throw new TypeError("Illegal constructor.")}function Tc(){throw new TypeError("Illegal constructor.")}B("shaka.polyfill.register",Ju),Ju(function(){if(t.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Qu),document.addEventListener("webkitfullscreenerror",Qu),document.addEventListener("mozfullscreenchange",Qu),document.addEventListener("mozfullscreenerror",Qu),document.addEventListener("MSFullscreenChange",Qu),document.addEventListener("MSFullscreenError",Qu)}}),Ju(function(){ee("CrKey")&&delete t.indexedDB}),Ju(function(){ee("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Zu)}),Ju(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})}),Ju(function(){}),Ju(function(){if(t.MediaSource)if(t.cast&&cast.__platform__&&cast.__platform__.canDisplayType)!function(){var t=MediaSource.isTypeSupported,e=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],o={},a=1;a<r.length;++a){var s=r[a].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),o[u]=s}if(!(r=o.codecs))return t(n);var c=!1,f=!1;for(var l in n=r.split(",").filter(function(t){return e.test(t)&&(f=!0),/^(hev|hvc)1\.2/.test(t)&&(c=!0),!0}),f&&(c=!1),o.codecs=n.join(","),c&&(o.eotf="smpte2084"),o)i+="; "+l+'="'+o[l]+'"';return cast.__platform__.canDisplayType(i)}}();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var e=navigator.appVersion;!function(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1].toLowerCase()&&t(e)}}(),e.includes("Version/8")?t.MediaSource=null:e.includes("Version/9")?tc():e.includes("Version/10")?(tc(),function(){var t=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(e){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];for(var i=r=0;i<this.sourceBuffers.length;++i){var o=this.sourceBuffers[i];o=o.buffered.end(o.buffered.length-1),r=Math.max(r,o)}if(!isNaN(this.duration)&&r<this.duration)for(this.Ed=!0,r=0;r<this.sourceBuffers.length;++r)this.sourceBuffers[r].xd=!1;return t.apply(this,n)};var e=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];return(r=n.apply(this,r)).mediaSource_=this,r.addEventListener("updateend",ec,!1),e||(this.addEventListener("sourceclose",nc,!1),e=!0),r}}()):(e.includes("Version/11")||e.includes("Version/12"))&&(tc(),function(){var t=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(e,n){return t.call(this,e,n-.001)}}())}else ee("Tizen")&&function(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return"opus"!=Jt(e)[0]&&t(e)}}()}),ic.prototype.createMediaKeys=function(){var t=new ac(this.keySystem);return Promise.resolve(t)},ic.prototype.getConfiguration=function(){return this.a},ac.prototype.createSession=function(t){if("temporary"!=(t=t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new uc(this.b,t)},ac.prototype.setServerCertificate=function(t){return t&&new Uint8Array(t),Promise.resolve(!0)},q(uc,Tt),(n=uc.prototype).generateRequest=function(t,e){this.a=new dt;try{this.b=this.g.createSession("video/mp4",new Uint8Array(e)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Wf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Uf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Vf.bind(this)),fc(this,"status-pending")}catch(t){this.a.reject(t)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(t){this.c=new dt;try{this.b.update(new Uint8Array(t))}catch(t){this.c.reject(t)}return this.c},n.close=function(){try{this.b.close(),this.closed.resolve(),this.f.Ya()}catch(t){this.closed.reject(t)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Wf=function(t){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new St("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:t.message.buffer}))},n.Uf=function(){this.c&&(fc(this,"usable"),this.c.resolve(),this.c=null)},n.Vf=function(){var t=Error("EME PatchedMediaKeysApple key error");if(t.errorCode=this.b.error,null!=this.a)this.a.reject(t),this.a=null;else if(null!=this.c)this.c.reject(t),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:fc(this,"output-not-allowed");break;default:fc(this,"internal-error")}},(n=lc.prototype).forEach=function(t){this.a&&t(this.a,Xu)},n.get=function(t){if(this.has(t))return this.a},n.has=function(t){var e=Xu;return!(!this.a||!ve(new Uint8Array(t),new Uint8Array(e)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju(function(){t.HTMLVideoElement&&t.WebKitMediaKeys&&(Xu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oc,t.MediaKeys=ac,t.MediaKeySystemAccess=ic,navigator.requestMediaKeySystemAccess=rc)}),pc.prototype.createMediaKeys=function(){var t=new vc(this.keySystem);return Promise.resolve(t)},pc.prototype.getConfiguration=function(){return this.a},vc.prototype.createSession=function(t){if("temporary"!=(t=t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new mc(this.a,t)},vc.prototype.setServerCertificate=function(){return Promise.resolve(!1)},q(mc,Tt),(n=mc.prototype).generateRequest=function(t,e){this.a=new dt;try{this.c=this.g.createSession("video/mp4",new Uint8Array(e),null),this.f.w(this.c,"mskeymessage",this.nf.bind(this)),this.f.w(this.c,"mskeyadded",this.lf.bind(this)),this.f.w(this.c,"mskeyerror",this.mf.bind(this)),bc(this,"status-pending")}catch(t){this.a.reject(t)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(t){this.b=new dt;try{this.c.update(new Uint8Array(t))}catch(t){this.b.reject(t)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),this.f.Ya()}catch(t){this.closed.reject(t)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.nf=function(t){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new St("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:t.message.buffer}))},n.lf=function(){this.a?(bc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(bc(this,"usable"),this.b.resolve(),this.b=null)},n.mf=function(){var t=Error("EME PatchedMediaKeysMs key error");if(t.errorCode=this.c.error,null!=this.a)this.a.reject(t),this.a=null;else if(null!=this.b)this.b.reject(t),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:bc(this,"output-not-allowed");break;default:bc(this,"internal-error")}},(n=wc.prototype).forEach=function(t){this.a&&t(this.a,Yu)},n.get=function(t){if(this.has(t))return this.a},n.has=function(t){var e=Yu;return!(!this.a||!ve(new Uint8Array(t),new Uint8Array(e)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju(function(){!t.HTMLVideoElement||!t.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Yu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=dc,t.MediaKeys=vc,t.MediaKeySystemAccess=pc,navigator.requestMediaKeySystemAccess=hc)}),Ec.prototype.createSession=function(){},Ec.prototype.setServerCertificate=function(){},Tc.prototype.getConfiguration=function(){},Tc.prototype.createMediaKeys=function(){},Ju(function(){!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=_c,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sc,t.MediaKeys=Ec,t.MediaKeySystemAccess=Tc)},-10);var xc,Ic="";function kc(t){return Ic?Ic+t.charAt(0).toUpperCase()+t.slice(1):t}function Ac(t,e){try{var n=new Pc(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function Mc(t){var e=this.mediaKeys;return e&&e!=t&&Oc(e,null),delete this.mediaKeys,(this.mediaKeys=t)&&Oc(t,this),Promise.resolve()}function Pc(t,e){this.a=this.keySystem=t;var n=!1;"org.w3.clearkey"==t&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=0;o<e.length;++o){var a=e[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var c=0;c<a.audioCapabilities.length;++c){var f=a.audioCapabilities[c];if(f.contentType){u=!0;var l=f.contentType.split(";")[0];i.canPlayType(l,this.a)&&(s.audioCapabilities.push(f),r=!0)}}if(a.videoCapabilities)for(c=0;c<a.videoCapabilities.length;++c)(f=a.videoCapabilities[c]).contentType&&(u=!0,i.canPlayType(f.contentType,this.a)&&(s.videoCapabilities.push(f),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=t&&"com.widevine.alpha"!=t||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Rc(t){this.g=t,this.b=null,this.a=new Kt,this.c=[],this.f={}}function Oc(t,e){t.b=e,t.a.Ya();var n=Ic;e&&(t.a.w(e,n+"needkey",t.tf.bind(t)),t.a.w(e,n+"keymessage",t.Zf.bind(t)),t.a.w(e,n+"keyadded",t.Xf.bind(t)),t.a.w(e,n+"keyerror",t.Yf.bind(t)))}function Cc(t,e){var n=t.f[e];return n||((n=t.c.shift())?(n.sessionId=e,t.f[e]=n):null)}function Nc(t,e,n){Tt.call(this),this.f=t,this.h=!1,this.a=this.b=null,this.c=e,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new dt,this.keyStatuses=new Lc}function Dc(t,e,n){if(t.h)return Promise.reject(Error("The session is already initialized."));t.h=!0;try{if("persistent-license"==t.g)if(n)var r=new Uint8Array(se("LOAD_SESSION|"+n));else{var i=se("PERSISTENT|"),o=new Uint8Array(i.byteLength+e.byteLength);o.set(new Uint8Array(i),0),o.set(new Uint8Array(e),i.byteLength),r=o}else r=new Uint8Array(e)}catch(t){return Promise.reject(t)}t.b=new dt;var a=kc("generateKeyRequest");try{t.f[a](t.c,r)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);new ft(function(){try{t.f[a](t.c,r)}catch(e){t.b.reject(e),t.b=null}}).O(.01)}return t.b}function jc(t,e){var n=t.keyStatuses;n.size=void 0==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function Lc(){this.size=0,this.a=void 0}function Uc(t){if("picture-in-picture"==(t=t.target).webkitPresentationMode){document.pictureInPictureElement=t;var e=new Event("enterpictureinpicture");t.dispatchEvent(e)}else document.pictureInPictureElement==t&&(document.pictureInPictureElement=null),e=new Event("leavepictureinpicture"),t.dispatchEvent(e)}function zc(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Bc(){var t=document.pictureInPictureElement;return t?(t.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function qc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Kc(e,n,r){return new t.TextTrackCue(e,n,r)}function Fc(e,n,r){return new t.TextTrackCue(e+"-"+n+"-"+r,e,n,r)}function Vc(){}Pc.prototype.createMediaKeys=function(){var t=new Rc(this.a);return Promise.resolve(t)},Pc.prototype.getConfiguration=function(){return this.b},(n=Rc.prototype).createSession=function(t){if("temporary"!=(t=t||"temporary")&&"persistent-license"!=t)throw new TypeError("Session type "+t+" is unsupported on this platform.");var e=this.b||document.createElement("video");return e.src||(e.src="about:blank"),t=new Nc(e,this.g,t),this.c.push(t),t},n.setServerCertificate=function(){return Promise.resolve(!1)},n.tf=function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="webm",e.initData=t.initData,this.b.dispatchEvent(e)},n.Zf=function(t){var e=Cc(this,t.sessionId);e&&(t=new St("message",{messageType:void 0==e.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),e.b&&(e.b.resolve(),e.b=null),e.dispatchEvent(t))},n.Xf=function(t){(t=Cc(this,t.sessionId))&&(jc(t,"usable"),t.a&&t.a.resolve(),t.a=null)},n.Yf=function(t){var e=Cc(this,t.sessionId);e&&e.handleError(t)},q(Nc,Tt),(n=Nc.prototype).handleError=function(t){var e=Error("EME v0.1b key error");e.errorCode=t.errorCode,e.errorCode.systemCode=t.systemCode,!t.sessionId&&this.b?(e.method="generateRequest",45==t.systemCode&&(e.message="Unsupported session type."),this.b.reject(e),this.b=null):t.sessionId&&this.a?(e.method="update",this.a.reject(e),this.a=null):(e=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?jc(this,"output-restricted"):jc(this,1==e?"expired":"internal-error"))},n.nd=function(t,e){if(this.a)this.a.then(this.nd.bind(this,t,e)).catch(this.nd.bind(this,t,e));else{if(this.a=t,"webkit-org.w3.clearkey"==this.c){var n=ie(e),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=he(r.keys[0].k),r=he(r.keys[0].kid)}else n=new Uint8Array(e),r=null;var i=kc("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(t){this.a.reject(t),this.a=null}}},n.generateRequest=function(t,e){return Dc(this,e,null)},n.load=function(t){return"persistent-license"==this.g?Dc(this,null,t):Promise.reject(Error("Not a persistent session."))},n.update=function(t){var e=new dt;return this.nd(e,t),e},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var t=kc("cancelKeyRequest");try{this.f[t](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Lc.prototype).forEach=function(t){this.a&&t(this.a,xc)},n.get=function(t){if(this.has(t))return this.a},n.has=function(t){var e=xc;return!(!this.a||!ve(new Uint8Array(t),new Uint8Array(e)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ju(function(){if(!(!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Ic="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;xc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Ac,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mc,t.MediaKeys=Rc,t.MediaKeySystemAccess=Pc}}),Ju(function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=zc,document.exitPictureInPicture=Bc,document.addEventListener("webkitpresentationmodechanged",Uc,!0))}}),Ju(function(){if(t.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}),Ju(function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=qc)}}),Ju(function(){if(!t.VTTCue&&t.TextTrackCue){var e=TextTrackCue.length;if(3==e)t.VTTCue=Kc;else if(6==e)t.VTTCue=Fc;else{try{var n=!!Kc(1,2,"")}catch(t){n=!1}n&&(t.VTTCue=Kc)}}}),Vc.prototype.parseInit=function(){},Vc.prototype.parseMedia=function(t,e){var n=ie(t),r=[],i=new DOMParser,o=null;try{o=i.parseFromString(n,"text/xml")}catch(t){throw new pt(2,2,2005)}if(o){if(!(o=o.getElementsByTagName("tt")[0]))throw new pt(2,2,2005);var a=Yr.getAttributeNS(o,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Yr.getAttributeNS(o,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Yr.getAttributeNS(o,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Yr.getAttributeNS(o,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=o.getAttribute("xml:space")||"default",i=o.getAttribute("tts:extent"),"default"!=n&&"preserve"!=n)throw new pt(2,2,2005);n="default"==n,a=new hf(a,s,u,c),s=nf(o.getElementsByTagName("metadata")[0]),u=nf(o.getElementsByTagName("styling")[0]),c=nf(o.getElementsByTagName("layout")[0]);for(var f=[],l=0;l<c.length;l++){var h,p,d=c[l],v=u,y=i,m=new hn,g=d.getAttribute("xml:id");if(g)m.id=g,g=null,y&&(g=Hc.exec(y)||Wc.exec(y)),y=g?Number(g[1]):null,g=g?Number(g[2]):null,(h=sf(d,v,"extent"))&&(null!=(h=(p=Hc.exec(h))||Wc.exec(h))&&(m.width=null!=y?100*Number(h[1])/y:Number(h[1]),m.height=null!=g?100*Number(h[2])/g:Number(h[2]),m.widthUnits=p||null!=y?pn:0,m.heightUnits=p||null!=g?pn:0)),(d=sf(d,v,"origin"))&&(null!=(h=(p=Hc.exec(d))||Wc.exec(d))&&(m.viewportAnchorX=null!=g?100*Number(h[1])/g:Number(h[1]),m.viewportAnchorY=null!=y?100*Number(h[2])/y:Number(h[2]),m.viewportAnchorUnits=p||null!=y?pn:0));else m=null;m&&f.push(m)}for(i=nf(o.getElementsByTagName("body")[0]),o=0;o<i.length;o++)(l=rf(i[o],e.periodStart,a,s,u,c,f,n))&&r.push(l)}return r};var Hc=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Gc=/^(\d+px|\d+em)$/,Wc=/^(\d+)px (\d+)px$/,Xc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Yc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,$c=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Jc=/^(\d*(?:\.\d*)?)f$/,Qc=/^(\d*(?:\.\d*)?)t$/,Zc=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,tf={left:sn,center:"center",right:"end",start:sn,end:"end"},ef={left:"line-left",center:"center",right:"line-right"};function nf(t){var e=[];if(!t)return e;for(var n=t.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==t.nodeName;n[r].nodeType!=Node.ELEMENT_NODE||"br"==n[r].nodeName||i||(i=nf(n[r]),e=e.concat(i))}return e.length||e.push(t),e}function rf(t,e,n,r,i,o,a,s){if(!t.hasAttribute("begin")&&!t.hasAttribute("end")&&/^\s*$/.test(t.textContent))return null;!function t(e,n){for(var r=e.childNodes,i=0;i<r.length;i++)if("br"==r[i].nodeName&&0<i)r[i-1].textContent+="\n";else if(0<r[i].childNodes.length)t(r[i],n);else if(n){var o=r[i].textContent.trim();o=o.replace(/\s+/g," "),r[i].textContent=o}}(t,s),s=ff(t.getAttribute("begin"),n);var u=ff(t.getAttribute("end"),n);n=ff(t.getAttribute("dur"),n);var c=t.textContent;if(null==u&&null!=n&&(u=s+n),null==s||null==u)throw new pt(2,2,2001);if(e=new Je(s+e,u+e,c),(o=cf(t,"region",o,""))&&o.getAttribute("xml:id")){var f=o.getAttribute("xml:id");a=a.filter(function(t){return t.id==f}),e.region=a[0]}return function(t,e,n,r,i){"rtl"==af(e,n,i,"direction")&&(t.direction="rtl");var o=af(e,n,i,"writingMode");"tb"==o||"tblr"==o?t.writingMode="vertical-lr":"tbrl"==o?t.writingMode="vertical-rl":"rltb"==o||"rl"==o?t.direction="rtl":o&&(t.direction=rn),(o=af(e,n,i,"textAlign"))&&(t.positionAlign=ef[o],t.lineAlign=tf[o],t.textAlign=tn[o.toUpperCase()]);(o=af(e,n,i,"displayAlign"))&&(t.displayAlign=nn[o.toUpperCase()]);(o=af(e,n,i,"color"))&&(t.color=o);(o=af(e,n,i,"backgroundColor"))&&(t.backgroundColor=o);(o=af(e,n,i,"fontFamily"))&&(t.fontFamily=o);(o=af(e,n,i,"fontWeight"))&&"bold"==o&&(t.fontWeight=700),(o=af(e,n,i,"wrapOption"))&&"noWrap"==o&&(t.wrapLine=!1),(o=af(e,n,i,"lineHeight"))&&o.match(Gc)&&(t.lineHeight=o),(o=af(e,n,i,"fontSize"))&&o.match(Gc)&&(t.fontSize=o),(o=af(e,n,i,"fontStyle"))&&(t.fontStyle=ln[o.toUpperCase()]);if(r){o=r.getAttribute("imagetype");var a=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==a&&r&&(t.backgroundImage="data:image/png;base64,"+r)}(n=sf(n,i,"textDecoration"))&&of(t,n),(e=uf(e,i,"textDecoration"))&&of(t,e)}(e,t,o,r=cf(t,"smpte:backgroundImage",r,"#"),i),e}function of(t,e){for(var n=e.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":t.textDecoration.includes("underline")||t.textDecoration.push("underline");break;case"noUnderline":t.textDecoration.includes("underline")&&kt(t.textDecoration,"underline");break;case"lineThrough":t.textDecoration.includes("lineThrough")||t.textDecoration.push("lineThrough");break;case"noLineThrough":t.textDecoration.includes("lineThrough")&&kt(t.textDecoration,"lineThrough");break;case"overline":t.textDecoration.includes("overline")||t.textDecoration.push("overline");break;case"noOverline":t.textDecoration.includes("overline")&&kt(t.textDecoration,"overline")}}function af(t,e,n,r){return(t=uf(t,n,r))?t:sf(e,n,r)}function sf(t,e,n){for(var r=nf(t),i=0;i<r.length;i++){var o=Yr.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(o)return o}return(t=cf(t,"style",e,""))?Yr.getAttributeNS(t,"http://www.w3.org/ns/ttml#styling",n):null}function uf(t,e,n){return(t=cf(t,"style",e,""))?Yr.getAttributeNS(t,"http://www.w3.org/ns/ttml#styling",n):null}function cf(t,e,n,r){if(!t||1>n.length)return null;var i=null,o=t;for(t=null;o&&!(t=o.getAttribute(e))&&(o=o.parentNode)instanceof Element;);if(e=t)for(t=0;t<n.length;t++)if(r+n[t].getAttribute("xml:id")==e){i=n[t];break}return i}function ff(t,e){var n=null;if(Xc.test(t)){n=Xc.exec(t);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),a=Number(n[4]);n=(o+=(a+=(Number(n[5])||0)/e.b)/e.frameRate)+60*i+3600*r}else Yc.test(t)?n=lf(Yc,t):$c.test(t)?n=lf($c,t):Jc.test(t)?(n=Jc.exec(t),n=Number(n[1])/e.frameRate):Qc.test(t)?(n=Qc.exec(t),n=Number(n[1])/e.a):Zc.test(t)&&(n=lf(Zc,t));return n}function lf(t,e){var n=t.exec(e);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function hf(t,e,n,r){this.frameRate=Number(t)||30,this.b=Number(e)||1,this.a=Number(r),0==this.a&&(this.a=t?this.frameRate*this.b:1),n&&(t=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(t[1])/Number(t[2]))}function pf(){this.a=new Vc}function df(){}function vf(t,e,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(e))?(e=r[1],t.textAlign="middle"==e?Ze:tn[e.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(e))?t.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(e))?t.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))?(t.position=Number(r[1]),r[2]&&(e=r[2],t.positionAlign="line-left"==e||"start"==e?"line-left":"line-right"==e||"end"==e?"line-right":"center")):(r=/^region:(.*)$/.exec(e))?(e=function(t,e){var n=t.filter(function(t){return t.id==e});return n.length?n[0]:null}(n,r[1]))&&(t.region=e):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(e))?(t.lineInterpretation=1,t.line=Number(n[1]),n[2]&&(t.lineAlign=un[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))&&(t.lineInterpretation=an,t.line=Number(n[1]),n[2]&&(t.lineAlign=un[n[2].toUpperCase()]))}function yf(t){if(null==(t=Hi(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var e=Number(t[2]),n=Number(t[3]);return 59<e||59<n?null:Number(t[4])/1e3+n+60*e+3600*(Number(t[1])||0)}function mf(){this.a=null}function gf(t,e,n){var r,i,o;return(new Kr).H("payl",Hr(function(t){r=ie(t)})).H("iden",Hr(function(t){i=ie(t)})).H("sttg",Hr(function(t){o=ie(t)})).parse(t),r?function(t,e,n,r,i){if(t=new Je(r,i,t),e&&(t.id=e),n)for(e=new Fi(n),n=Gi(e);n;)vf(t,n,[]),Vi(e),n=Gi(e);return t}(r,i,o,e,n):null}yn["application/ttml+xml"]=Vc,pf.prototype.parseInit=function(t){var e=!1;if((new Kr).H("moov",Fr).H("trak",Fr).H("mdia",Fr).H("minf",Fr).H("stbl",Fr).fa("stsd",Vr).H("stpp",function(t){e=!0,t.parser.stop()}).parse(t),!e)throw new pt(2,2,2007)},pf.prototype.parseMedia=function(t,e){var n=!1,r=[];if((new Kr).H("mdat",Hr(function(t){n=!0,r=r.concat(this.a.parseMedia(t,e))}.bind(this))).parse(t),!n)throw new pt(2,2,2007);return r},yn['application/mp4; codecs="stpp"']=pf,yn['application/mp4; codecs="stpp.TTML.im1t"']=pf,df.prototype.parseInit=function(){},df.prototype.parseMedia=function(t,e){var n=ie(t);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pt(2,2,2e3);var r=e.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=n[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(null==(r=yf(new Fi(i[1]))))throw new pt(2,2,2e3);r=e.periodStart+(Number(o[1])/9e4-r)}}o=[];var a=n[0].split("\n");for(i=1;i<a.length;i++)if(/^Region:/.test(a[i])){var s=new Fi(a[i]),u=new hn;Gi(s),Vi(s);for(var c=Gi(s);c;){var f=u,l=c;(c=/^id=(.*)$/.exec(l))?f.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(l))?f.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(l))?(f.height=Number(c[1]),f.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(f.regionAnchorX=Number(c[1]),f.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(f.viewportAnchorX=Number(c[1]),f.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(l)&&(f.scroll="up"),Vi(s),c=Gi(s)}o.push(u)}for(i=[],s=1;s<n.length;s++){if(c=a=n[s].split("\n"),l=r,a=o,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])a=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1));var h=yf(f=new Fi(c[0])),p=Hi(f,/[ \t]+--\x3e[ \t]+/g),d=yf(f);if(null==h||null==p||null==d)throw new pt(2,2,2001);for(c=new Je(h+l,d+l,c.slice(1).join("\n").trim()),Vi(f),l=Gi(f);l;)vf(c,l,a),Vi(f),l=Gi(f);null!=u&&(c.id=u),a=c}a&&i.push(a)}return i},yn["text/vtt"]=df,yn['text/vtt; codecs="vtt"']=df,mf.prototype.parseInit=function(t){var e=!1;if((new Kr).H("moov",Fr).H("trak",Fr).H("mdia",Fr).fa("mdhd",function(t){0==t.version?(t.reader.L(4),t.reader.L(4),this.a=t.reader.F(),t.reader.L(4)):(t.reader.L(8),t.reader.L(8),this.a=t.reader.F(),t.reader.L(8)),t.reader.L(4)}.bind(this)).H("minf",Fr).H("stbl",Fr).fa("stsd",Vr).H("wvtt",function(){e=!0}).parse(t),!this.a)throw new pt(2,2,2008);if(!e)throw new pt(2,2,2008)},mf.prototype.parseMedia=function(t,e){var n=this;if(!this.a)throw new pt(2,2,2008);var r,i=0,o=[],a=[],s=!1,u=!1,c=!1,f=null;if((new Kr).H("moof",Fr).H("traf",Fr).fa("tfdt",function(t){s=!0,i=0==t.version?t.reader.F():t.reader.yb()}).fa("tfhd",function(t){var e=t.flags;(t=t.reader).L(4),1&e&&t.L(8),2&e&&t.L(4),f=8&e?t.F():null}).fa("trun",function(t){u=!0;var e=t.version,n=t.flags,r=(t=t.reader).F();1&n&&t.L(4),4&n&&t.L(4);for(var i=[],a=0;a<r;a++){var s={duration:null,sampleSize:null,pd:null};256&n&&(s.duration=t.F()),512&n&&(s.sampleSize=t.F()),1024&n&&t.L(4),2048&n&&(s.pd=0==e?t.F():t.Xd()),i.push(s)}o=i}).H("mdat",Hr(function(t){c=!0,r=t})).parse(t),!c&&!s&&!u)throw new pt(2,2,2008);var l=i,h=new zr(new DataView(r.buffer,r.byteOffset,r.byteLength),0);return o.forEach(function(t){var r=t.duration||f,o=t.pd?i+t.pd:l;l=o+(r||0);var s=0;do{var u=h.F();s+=u;var c=null;"vttc"==Wr(h.F())?8<u&&(c=h.Xa(u-8)):h.L(u-8),r&&c&&a.push(gf(c,e.periodStart+o/n.a,e.periodStart+l/n.a))}while(t.sampleSize&&s<t.sampleSize)}),a.filter(Fe.Ga)},yn['application/mp4; codecs="wvtt"']=mf,B("shaka.util.Dom.createHTMLElement",function(t){return document.createElement(t)}),B("shaka.util.Dom.createVideoElement",function(){var t=document.createElement("video");return t.muted=!0,t.width=600,t.height=400,t}),B("shaka.util.Dom.asHTMLElement",function(t){return t}),B("shaka.util.Dom.asHTMLMediaElement",function(t){return t}),B("shaka.util.Dom.removeAllChildren",function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})}.call(r,n,n),r.shaka)e[i]=r.shaka[i]}()}).call(this,n("698d75b157f24ae829cc"))},"54f683fcda7806277002":function(t,e,n){!function(t){"use strict";var e=5,n=1<<e,r=n-1,i={};function o(t){t&&(t.value=!0)}function a(){}function s(t){return void 0===t.size&&(t.size=t.__iterate(c)),t.size}function u(t,e){if("number"!==typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?s(t)+e:e}function c(){return!0}function f(t,e,n){return(0===t&&!d(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function l(t,e){return p(t,e,0)}function h(t,e){return p(t,e,e)}function p(t,e,n){return void 0===t?n:d(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function d(t){return t<0||0===t&&1/t===-1/0}var v="@@__IMMUTABLE_ITERABLE__@@";function y(t){return Boolean(t&&t[v])}var m="@@__IMMUTABLE_KEYED__@@";function g(t){return Boolean(t&&t[m])}var b="@@__IMMUTABLE_INDEXED__@@";function w(t){return Boolean(t&&t[b])}function _(t){return g(t)||w(t)}var S=function(t){return y(t)?t:X(t)},E=function(t){function e(t){return g(t)?t:Y(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),T=function(t){function e(t){return w(t)?t:$(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),x=function(t){function e(t){return y(t)&&!_(t)?t:J(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S);S.Keyed=E,S.Indexed=T,S.Set=x;var I="@@__IMMUTABLE_SEQ__@@";function k(t){return Boolean(t&&t[I])}var A="@@__IMMUTABLE_RECORD__@@";function M(t){return Boolean(t&&t[A])}function P(t){return y(t)||M(t)}var R="@@__IMMUTABLE_ORDERED__@@";function O(t){return Boolean(t&&t[R])}var C=0,N=1,D=2,j="function"===typeof Symbol&&Symbol.iterator,L="@@iterator",U=j||L,z=function(t){this.next=t};function B(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function q(){return{value:void 0,done:!0}}function K(t){return!!H(t)}function F(t){return t&&"function"===typeof t.next}function V(t){var e=H(t);return e&&e.call(t)}function H(t){var e=t&&(j&&t[j]||t[L]);if("function"===typeof e)return e}z.prototype.toString=function(){return"[Iterator]"},z.KEYS=C,z.VALUES=N,z.ENTRIES=D,z.prototype.inspect=z.prototype.toSource=function(){return this.toString()},z.prototype[U]=function(){return this};var G=Object.prototype.hasOwnProperty;function W(t){return!(!Array.isArray(t)&&"string"!==typeof t)||t&&"object"===typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var X=function(t){function e(t){return null===t||void 0===t?nt():P(t)?t.toSeq():function(t){var e=ot(t);if(e)return e;if("object"===typeof t)return new Z(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,i=0;i!==r;){var o=n[e?r-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new z(function(){if(i===r)return{value:void 0,done:!0};var o=n[e?r-++i:i++];return B(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(S),Y=function(t){function e(t){return null===t||void 0===t?nt().toKeyedSeq():y(t)?g(t)?t.toSeq():t.fromEntrySeq():M(t)?t.toSeq():rt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(X),$=function(t){function e(t){return null===t||void 0===t?nt():y(t)?g(t)?t.entrySeq():t.toIndexedSeq():M(t)?t.toSeq().entrySeq():it(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(X),J=function(t){function e(t){return(y(t)&&!_(t)?t:$(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(X);X.isSeq=k,X.Keyed=Y,X.Set=J,X.Indexed=$,X.prototype[I]=!0;var Q=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,i=0;i!==r;){var o=e?r-++i:i++;if(!1===t(n[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new z(function(){if(i===r)return{value:void 0,done:!0};var o=e?r-++i:i++;return B(t,o,n[o])})},e}($),Z=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return G.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length,o=0;o!==i;){var a=r[e?i-++o:o++];if(!1===t(n[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new z(function(){if(o===i)return{value:void 0,done:!0};var a=r[e?i-++o:o++];return B(t,a,n[a])})},e}(Y);Z.prototype[R]=!0;var tt,et=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._collection,r=V(n),i=0;if(F(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._collection,r=V(n);if(!F(r))return new z(q);var i=0;return new z(function(){var e=r.next();return e.done?e:B(t,i++,e.value)})},e}($);function nt(){return tt||(tt=new Q([]))}function rt(t){var e=Array.isArray(t)?new Q(t):K(t)?new et(t):void 0;if(e)return e.fromEntrySeq();if("object"===typeof t)return new Z(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function it(t){var e=ot(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ot(t){return W(t)?new Q(t):K(t)?new et(t):void 0}var at="@@__IMMUTABLE_MAP__@@";function st(t){return Boolean(t&&t[at])}function ut(t){return st(t)&&O(t)}function ct(t){return Boolean(t&&"function"===typeof t.equals&&"function"===typeof t.hashCode)}function ft(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"===typeof t.valueOf&&"function"===typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(ct(t)&&ct(e)&&t.equals(e))}var lt="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function ht(t){return t>>>1&1073741824|3221225471&t}var pt=Object.prototype.valueOf;function dt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!==t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return ht(e)}(t);case"string":return t.length>St?(void 0===(n=xt[e=t])&&(n=vt(e),Tt===Et&&(Tt=0,xt={}),Tt++,xt[e]=n),n):vt(t);case"object":case"function":return null===t?1108378658:"function"===typeof t.hashCode?ht(t.hashCode(t)):(t.valueOf!==pt&&"function"===typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(bt&&void 0!==(e=yt.get(t)))return e;if(void 0!==(e=t[_t]))return e;if(!gt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[_t]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++wt,1073741824&wt&&(wt=0),bt)yt.set(t,e);else{if(void 0!==mt&&!1===mt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(gt)Object.defineProperty(t,_t,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[_t]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[_t]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"===typeof t.toString)return vt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}var e,n}function vt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return ht(e)}var yt,mt=Object.isExtensible,gt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),bt="function"===typeof WeakMap;bt&&(yt=new WeakMap);var wt=0,_t="__immutablehash__";"function"===typeof Symbol&&(_t=Symbol(_t));var St=16,Et=255,Tt=0,xt={},It=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Ot(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=Rt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Y);It.prototype[R]=!0;var kt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&s(this),this._iter.__iterate(function(i){return t(i,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(N,e),i=0;return e&&s(this),new z(function(){var o=r.next();return o.done?o:B(t,e?n.size-++i:i++,o.value,o)})},e}($),At=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(N,e);return new z(function(){var e=n.next();return e.done?e:B(t,e.value,e.value,e)})},e}(J),Mt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Kt(e);var r=y(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(N,e);return new z(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Kt(r);var i=y(r);return B(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},e}(Y);function Pt(t){var e=Vt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ht,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===D){var r=t.__iterator(e,n);return new z(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===N?C:N,n)},e}function Rt(t,e,n){var r=Vt(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var a=t.get(r,i);return a===i?o:e.call(n,a,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(D,i);return new z(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return B(r,s,e.call(n,a[1],s,t),i)})},r}function Ot(t,e){var n=this,r=Vt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Pt(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ht,r.__iterate=function(n,r){var i=this,o=0;return r&&s(t),t.__iterate(function(t,a){return n(t,e?a:r?i.size-++o:o++,i)},!r)},r.__iterator=function(r,i){var o=0;i&&s(t);var a=t.__iterator(D,!i);return new z(function(){var t=a.next();if(t.done)return t;var s=t.value;return B(r,e?s[0]:i?n.size-++o:o++,s[1],t)})},r}function Ct(t,e,n,r){var o=Vt(t);return r&&(o.has=function(r){var o=t.get(r,i);return o!==i&&!!e.call(n,o,r,t)},o.get=function(r,o){var a=t.get(r,i);return a!==i&&e.call(n,a,r,t)?a:o}),o.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate(function(t,o,u){if(e.call(n,t,o,u))return s++,i(t,r?o:s-1,a)},o),s},o.__iteratorUncached=function(i,o){var a=t.__iterator(D,o),s=0;return new z(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],f=u[1];if(e.call(n,f,c,t))return B(i,r?c:s++,f,o)}})},o}function Nt(t,e,n,r){var i=t.size;if(f(e,n,i))return t;var o=l(e,i),a=h(n,i);if(o!==o||a!==a)return Nt(t.toSeq().cacheResult(),e,n,r);var s,c=a-o;c===c&&(s=c<0?0:c);var p=Vt(t);return p.size=0===s?s:t.size&&s||void 0,!r&&k(t)&&s>=0&&(p.get=function(e,n){return(e=u(this,e))>=0&&e<s?t.get(e+o,n):n}),p.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=a++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==s}),c},p.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);if(0===s)return new z(q);var i=t.__iterator(e,n),a=0,u=0;return new z(function(){for(;a++<o;)i.next();if(++u>s)return{value:void 0,done:!0};var t=i.next();return r||e===N||t.done?t:B(e,u-1,e===C?void 0:t.value[1],t)})},p}function Dt(t,e,n,r){var i=Vt(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(n,t,o,c)))return u++,i(t,r?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(D,o),u=!0,c=0;return new z(function(){var t,o,f;do{if((t=s.next()).done)return r||i===N?t:B(i,c++,i===C?void 0:t.value[1],t);var l=t.value;o=l[0],f=l[1],u&&(u=e.call(n,f,o,a))}while(u);return i===D?t:B(i,o,f,t)})},i}function jt(t,e,n){var r=Vt(t);return r.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;return function t(u,c){u.__iterate(function(o,u){return(!e||c<e)&&y(o)?t(o,c+1):(a++,!1===i(o,n?u:a-1,r)&&(s=!0)),!s},o)}(t,0),a},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),a=[],s=0;return new z(function(){for(;o;){var t=o.next();if(!1===t.done){var u=t.value;if(r===D&&(u=u[1]),e&&!(a.length<e)||!y(u))return n?t:B(r,s++,u,t);a.push(o),o=u.__iterator(r,i)}else o=a.pop()}return{value:void 0,done:!0}})},r}function Lt(t,e,n){e||(e=Gt);var r=g(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).valueSeq().toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Y(o):w(t)?$(o):J(o)}function Ut(t,e,n){if(e||(e=Gt),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return zt(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return zt(e,t,n)?n:t})}function zt(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Bt(t,e,n,r){var i=Vt(t),o=new Q(n).map(function(t){return t.size});return i.size=r?o.max():o.min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(N,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=n.map(function(t){return t=S(t),V(i?t.reverse():t)}),a=0,s=!1;return new z(function(){var n;return s||(n=o.map(function(t){return t.next()}),s=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),s?{value:void 0,done:!0}:B(t,a++,e.apply(null,n.map(function(t){return t.value})))})},i}function qt(t,e){return t===e?t:k(t)?e:t.constructor(e)}function Kt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ft(t){return g(t)?E:w(t)?T:x}function Vt(t){return Object.create((g(t)?Y:w(t)?$:J).prototype)}function Ht(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):X.prototype.cacheResult.call(this)}function Gt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Wt(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function Xt(t,e){if(!t)throw new Error(e)}function Yt(t){Xt(t!==1/0,"Cannot perform this action with an infinite size.")}function $t(t){if(W(t)&&"string"!==typeof t)return t;if(O(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Jt(t){return t&&("function"!==typeof t.constructor||"Object"===t.constructor.name)}function Qt(t){return"object"===typeof t&&(P(t)||Array.isArray(t)||Jt(t))}function Zt(t){try{return"string"===typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function te(t,e){return P(t)?t.has(e):Qt(t)&&G.call(t,e)}function ee(t,e,n){return P(t)?t.get(e,n):te(t,e)?"function"===typeof t.get?t.get(e):t[e]:n}function ne(t){if(Array.isArray(t))return Wt(t);var e={};for(var n in t)G.call(t,n)&&(e[n]=t[n]);return e}function re(t,e){if(!Qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(P(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!G.call(t,e))return t;var n=ne(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function ie(t,e,n){if(!Qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(P(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(G.call(t,e)&&n===t[e])return t;var r=ne(t);return r[e]=n,r}function oe(t,e,n,r){r||(r=n,n=void 0);var o=function t(e,n,r,o,a,s){var u=n===i;if(o===r.length){var c=u?a:n,f=s(c);return f===c?n:f}if(!u&&!Qt(n))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,o).map(Zt)+"]: "+n);var l=r[o],h=u?i:ee(n,l,i),p=t(h===i?e:P(h),h,r,o+1,a,s);return p===h?n:p===i?re(n,l):ie(u?e?Ke():{}:n,l,p)}(P(t),t,$t(e),0,n,r);return o===i?n:o}function ae(t,e,n){return oe(t,e,i,function(){return n})}function se(t,e){return ae(this,t,e)}function ue(t,e){return oe(t,e,function(){return i})}function ce(t){return ue(this,t)}function fe(t,e,n,r){return oe(t,[e],n,r)}function le(t,e,n){return 1===arguments.length?t(this):fe(this,t,e,n)}function he(t,e,n){return oe(this,t,e,n)}function pe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ve(this,t)}function de(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!==typeof t)throw new TypeError("Invalid merger function: "+t);return ve(this,e,t)}function ve(t,e,n){for(var r=[],o=0;o<e.length;o++){var a=E(e[o]);0!==a.size&&r.push(a)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var e=n?function(e,r){fe(t,r,i,function(t){return t===i?e:n(t,e,r)})}:function(e,n){t.set(n,e)},o=0;o<r.length;o++)r[o].forEach(e)}):t.constructor(r[0])}function ye(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return _e(t,e)}function me(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return _e(e,n,t)}function ge(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return we(t,e)}function be(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return we(e,n,t)}function we(t,e,n){return _e(t,e,function(t){return function e(n,r,i){return Qt(n)&&Qt(r)?_e(n,[r],e):t?t(n,r,i):r}}(n))}function _e(t,e,n){if(!Qt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(P(t))return"function"===typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),i=t,o=r?T:E,a=r?function(e){i===t&&(i=ne(i)),i.push(e)}:function(e,r){var o=G.call(i,r),a=o&&n?n(i[r],e,r):e;o&&a===i[r]||(i===t&&(i=ne(i)),i[r]=a)},s=0;s<e.length;s++)o(e[s]).forEach(a);return i}function Se(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return we(this,t)}function Ee(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return we(this,e,t)}function Te(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return oe(this,t,Ke(),function(t){return _e(t,e)})}function xe(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return oe(this,t,Ke(),function(t){return we(t,e)})}function Ie(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function ke(){return this.__ownerID?this:this.__ensureOwner(new a)}function Ae(){return this.__ensureOwner()}function Me(){return this.__altered}kt.prototype.cacheResult=It.prototype.cacheResult=At.prototype.cacheResult=Mt.prototype.cacheResult=Ht;var Pe=function(t){function e(e){return null===e||void 0===e?Ke():st(e)&&!O(e)?e:Ke().withMutations(function(n){var r=t(e);Yt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ke().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Fe(this,t,e)},e.prototype.remove=function(t){return Fe(this,t,i)},e.prototype.deleteAll=function(t){var e=S(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ke()},e.prototype.sort=function(t){return vn(Lt(this,t))},e.prototype.sortBy=function(t,e){return vn(Lt(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,i){n.set(i,t.call(e,r,i,n))})})},e.prototype.__iterator=function(t,e){return new Ue(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?qe(this.size,this._root,t,this.__hash):0===this.size?Ke():(this.__ownerID=t,this.__altered=!1,this)},e}(E);Pe.isMap=st;var Re=Pe.prototype;Re[at]=!0,Re.delete=Re.remove,Re.removeAll=Re.deleteAll,Re.setIn=se,Re.removeIn=Re.deleteIn=ce,Re.update=le,Re.updateIn=he,Re.merge=Re.concat=pe,Re.mergeWith=de,Re.mergeDeep=Se,Re.mergeDeepWith=Ee,Re.mergeIn=Te,Re.mergeDeepIn=xe,Re.withMutations=Ie,Re.wasAltered=Me,Re.asImmutable=Ae,Re["@@transducer/init"]=Re.asMutable=ke,Re["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Re["@@transducer/result"]=function(t){return t.asImmutable()};var Oe=function(t,e){this.ownerID=t,this.entries=e};Oe.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ft(n,i[o][0]))return i[o][1];return r},Oe.prototype.update=function(t,e,n,r,s,u,c){for(var f=s===i,l=this.entries,h=0,p=l.length;h<p&&!ft(r,l[h][0]);h++);var d=h<p;if(d?l[h][1]===s:f)return this;if(o(c),(f||!d)&&o(u),!f||1!==l.length){if(!d&&!f&&l.length>=Ye)return function(t,e,n,r){t||(t=new a);for(var i=new je(t,dt(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,l,r,s);var v=t&&t===this.ownerID,y=v?l:Wt(l);return d?f?h===p-1?y.pop():y[h]=y.pop():y[h]=[r,s]:y.push([r,s]),v?(this.entries=y,this):new Oe(t,y)}};var Ce=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};Ce.prototype.get=function(t,n,i,o){void 0===n&&(n=dt(i));var a=1<<((0===t?n:n>>>t)&r),s=this.bitmap;return 0===(s&a)?o:this.nodes[We(s&a-1)].get(t+e,n,i,o)},Ce.prototype.update=function(t,o,a,s,u,c,f){void 0===a&&(a=dt(s));var l=(0===o?a:a>>>o)&r,h=1<<l,p=this.bitmap,d=0!==(p&h);if(!d&&u===i)return this;var v=We(p&h-1),y=this.nodes,m=d?y[v]:void 0,g=Ve(m,t,o+e,a,s,u,c,f);if(g===m)return this;if(!d&&g&&y.length>=$e)return function(t,e,r,i,o){for(var a=0,s=new Array(n),u=0;0!==r;u++,r>>>=1)s[u]=1&r?e[a++]:void 0;return s[i]=o,new Ne(t,a+1,s)}(t,y,p,l,g);if(d&&!g&&2===y.length&&He(y[1^v]))return y[1^v];if(d&&g&&1===y.length&&He(g))return g;var b=t&&t===this.ownerID,w=d?g?p:p^h:p|h,_=d?g?Xe(y,v,g,b):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}(y,v,b):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}(y,v,g,b);return b?(this.bitmap=w,this.nodes=_,this):new Ce(t,w,_)};var Ne=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};Ne.prototype.get=function(t,n,i,o){void 0===n&&(n=dt(i));var a=(0===t?n:n>>>t)&r,s=this.nodes[a];return s?s.get(t+e,n,i,o):o},Ne.prototype.update=function(t,n,o,a,s,u,c){void 0===o&&(o=dt(a));var f=(0===n?o:o>>>n)&r,l=s===i,h=this.nodes,p=h[f];if(l&&!p)return this;var d=Ve(p,t,n+e,o,a,s,u,c);if(d===p)return this;var v=this.count;if(p){if(!d&&--v<Je)return function(t,e,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,c=e.length;s<c;s++,u<<=1){var f=e[s];void 0!==f&&s!==r&&(i|=u,a[o++]=f)}return new Ce(t,i,a)}(t,h,v,f)}else v++;var y=t&&t===this.ownerID,m=Xe(h,f,d,y);return y?(this.count=v,this.nodes=m,this):new Ne(t,v,m)};var De=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};De.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(ft(n,i[o][0]))return i[o][1];return r},De.prototype.update=function(t,e,n,r,a,s,u){void 0===n&&(n=dt(r));var c=a===i;if(n!==this.keyHash)return c?this:(o(u),o(s),Ge(this,t,e,n,[r,a]));for(var f=this.entries,l=0,h=f.length;l<h&&!ft(r,f[l][0]);l++);var p=l<h;if(p?f[l][1]===a:c)return this;if(o(u),(c||!p)&&o(s),c&&2===h)return new je(t,this.keyHash,f[1^l]);var d=t&&t===this.ownerID,v=d?f:Wt(f);return p?c?l===h-1?v.pop():v[l]=v.pop():v[l]=[r,a]:v.push([r,a]),d?(this.entries=v,this):new De(t,this.keyHash,v)};var je=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};je.prototype.get=function(t,e,n,r){return ft(n,this.entry[0])?this.entry[1]:r},je.prototype.update=function(t,e,n,r,a,s,u){var c=a===i,f=ft(r,this.entry[0]);return(f?a===this.entry[1]:c)?this:(o(u),c?void o(s):f?t&&t===this.ownerID?(this.entry[1]=a,this):new je(t,this.keyHash,[r,a]):(o(s),Ge(this,t,e,dt(r),[r,a])))},Oe.prototype.iterate=De.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Ce.prototype.iterate=Ne.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},je.prototype.iterate=function(t,e){return t(this.entry)};var Le,Ue=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Be(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,i=void 0;if(n.entry){if(0===r)return ze(t,n.entry)}else if(n.entries){if(i=n.entries.length-1,r<=i)return ze(t,n.entries[this._reverse?i-r:r])}else if(i=n.nodes.length-1,r<=i){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return ze(t,o.entry);e=this._stack=Be(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(z);function ze(t,e){return B(t,e[0],e[1])}function Be(t,e){return{node:t,index:0,__prev:e}}function qe(t,e,n,r){var i=Object.create(Re);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ke(){return Le||(Le=qe(0))}function Fe(t,e,n){var r,o;if(t._root){var a={value:!1},s={value:!1};if(r=Ve(t._root,t.__ownerID,0,void 0,e,n,a,s),!s.value)return t;o=t.size+(a.value?n===i?-1:1:0)}else{if(n===i)return t;o=1,r=new Oe(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?qe(o,r):Ke()}function Ve(t,e,n,r,a,s,u,c){return t?t.update(e,n,r,a,s,u,c):s===i?t:(o(c),o(u),new je(e,r,[a,s]))}function He(t){return t.constructor===je||t.constructor===De}function Ge(t,n,i,o,a){if(t.keyHash===o)return new De(n,o,[t.entry,a]);var s,u=(0===i?t.keyHash:t.keyHash>>>i)&r,c=(0===i?o:o>>>i)&r,f=u===c?[Ge(t,n,i+e,o,a)]:(s=new je(n,o,a),u<c?[t,s]:[s,t]);return new Ce(n,1<<u|1<<c,f)}function We(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Xe(t,e,n,r){var i=r?t:Wt(t);return i[e]=n,i}var Ye=n/4,$e=n/2,Je=n/4,Qe="@@__IMMUTABLE_LIST__@@";function Ze(t){return Boolean(t&&t[Qe])}var tn=function(t){function i(r){var i=un();if(null===r||void 0===r)return i;if(Ze(r))return r;var o=t(r),a=o.size;return 0===a?i:(Yt(a),a>0&&a<n?sn(0,a,e,null,new nn(o.toArray())):i.withMutations(function(t){t.setSize(a),o.forEach(function(e,n){return t.set(n,e)})}))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.of=function(){return this(arguments)},i.prototype.toString=function(){return this.__toString("List [","]")},i.prototype.get=function(t,e){if((t=u(this,t))>=0&&t<this.size){var n=ln(this,t+=this._origin);return n&&n.array[t&r]}return e},i.prototype.set=function(t,e){return function(t,e,n){if((e=u(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?hn(t,e).set(0,n):hn(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o={value:!1};return e>=pn(t._capacity)?r=cn(r,t.__ownerID,0,e,n,o):i=cn(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):sn(t._origin,t._capacity,t._level,i,r):t}(this,t,e)},i.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},i.prototype.insert=function(t,e){return this.splice(t,0,e)},i.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=e,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):un()},i.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){hn(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},i.prototype.pop=function(){return hn(this,0,-1)},i.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){hn(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},i.prototype.shift=function(){return hn(this,1)},i.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var i=e[r],o=t("string"!==typeof i&&K(i)?i:[i]);0!==o.size&&n.push(o)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},i.prototype.setSize=function(t){return hn(this,0,t)},i.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var i=0;i<n.size;i++)r.set(i,t.call(e,r.get(i),i,r))})},i.prototype.slice=function(t,e){var n=this.size;return f(t,e,n)?this:hn(this,l(t,n),h(e,n))},i.prototype.__iterator=function(t,e){var n=e?this.size:0,r=an(this,e);return new z(function(){var i=r();return i===on?{value:void 0,done:!0}:B(t,e?--n:n++,i)})},i.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,i=an(this,e);(n=i())!==on&&!1!==t(n,e?--r:r++,this););return r},i.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sn(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?un():(this.__ownerID=t,this.__altered=!1,this)},i}(T);tn.isList=Ze;var en=tn.prototype;en[Qe]=!0,en.delete=en.remove,en.merge=en.concat,en.setIn=se,en.deleteIn=en.removeIn=ce,en.update=le,en.updateIn=he,en.mergeIn=Te,en.mergeDeepIn=xe,en.withMutations=Ie,en.wasAltered=Me,en.asImmutable=Ae,en["@@transducer/init"]=en.asMutable=ke,en["@@transducer/step"]=function(t,e){return t.push(e)},en["@@transducer/result"]=function(t){return t.asImmutable()};var nn=function(t,e){this.array=t,this.ownerID=e};nn.prototype.removeBefore=function(t,n,i){if(i===n?1<<n:0===this.array.length)return this;var o=i>>>n&r;if(o>=this.array.length)return new nn([],t);var a,s=0===o;if(n>0){var u=this.array[o];if((a=u&&u.removeBefore(t,n-e,i))===u&&s)return this}if(s&&!a)return this;var c=fn(this,t);if(!s)for(var f=0;f<o;f++)c.array[f]=void 0;return a&&(c.array[o]=a),c},nn.prototype.removeAfter=function(t,n,i){if(i===(n?1<<n:0)||0===this.array.length)return this;var o,a=i-1>>>n&r;if(a>=this.array.length)return this;if(n>0){var s=this.array[a];if((o=s&&s.removeAfter(t,n-e,i))===s&&a===this.array.length-1)return this}var u=fn(this,t);return u.array.splice(a+1),o&&(u.array[a]=o),u};var rn,on={};function an(t,r){var i=t._origin,o=t._capacity,a=pn(o),s=t._tail;return u(t._root,t._level,0);function u(t,c,f){return 0===c?function(t,e){var u=e===a?s&&s.array:t&&t.array,c=e>i?0:i-e,f=o-e;return f>n&&(f=n),function(){if(c===f)return on;var t=r?--f:c++;return u&&u[t]}}(t,f):function(t,a,s){var c,f=t&&t.array,l=s>i?0:i-s>>a,h=1+(o-s>>a);return h>n&&(h=n),function(){for(;;){if(c){var t=c();if(t!==on)return t;c=null}if(l===h)return on;var n=r?--h:l++;c=u(f&&f[n],a-e,s+(n<<a))}}}(t,c,f)}}function sn(t,e,n,r,i,o,a){var s=Object.create(en);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function un(){return rn||(rn=sn(0,0,e))}function cn(t,n,i,a,s,u){var c,f=a>>>i&r,l=t&&f<t.array.length;if(!l&&void 0===s)return t;if(i>0){var h=t&&t.array[f],p=cn(h,n,i-e,a,s,u);return p===h?t:((c=fn(t,n)).array[f]=p,c)}return l&&t.array[f]===s?t:(u&&o(u),c=fn(t,n),void 0===s&&f===c.array.length-1?c.array.pop():c.array[f]=s,c)}function fn(t,e){return e&&t&&e===t.ownerID?t:new nn(t?t.array.slice():[],e)}function ln(t,n){if(n>=pn(t._capacity))return t._tail;if(n<1<<t._level+e){for(var i=t._root,o=t._level;i&&o>0;)i=i.array[n>>>o&r],o-=e;return i}}function hn(t,n,i){void 0!==n&&(n|=0),void 0!==i&&(i|=0);var o=t.__ownerID||new a,s=t._origin,u=t._capacity,c=s+n,f=void 0===i?u:i<0?u+i:s+i;if(c===s&&f===u)return t;if(c>=f)return t.clear();for(var l=t._level,h=t._root,p=0;c+p<0;)h=new nn(h&&h.array.length?[void 0,h]:[],o),p+=1<<(l+=e);p&&(c+=p,s+=p,f+=p,u+=p);for(var d=pn(u),v=pn(f);v>=1<<l+e;)h=new nn(h&&h.array.length?[h]:[],o),l+=e;var y=t._tail,m=v<d?ln(t,f-1):v>d?new nn([],o):y;if(y&&v>d&&c<u&&y.array.length){for(var g=h=fn(h,o),b=l;b>e;b-=e){var w=d>>>b&r;g=g.array[w]=fn(g.array[w],o)}g.array[d>>>e&r]=y}if(f<u&&(m=m&&m.removeAfter(o,0,f)),c>=v)c-=v,f-=v,l=e,h=null,m=m&&m.removeBefore(o,0,c);else if(c>s||v<d){for(p=0;h;){var _=c>>>l&r;if(_!==v>>>l&r)break;_&&(p+=(1<<l)*_),l-=e,h=h.array[_]}h&&c>s&&(h=h.removeBefore(o,l,c-p)),h&&v<d&&(h=h.removeAfter(o,l,v-p)),p&&(c-=p,f-=p)}return t.__ownerID?(t.size=f-c,t._origin=c,t._capacity=f,t._level=l,t._root=h,t._tail=m,t.__hash=void 0,t.__altered=!0,t):sn(c,f,l,h,m)}function pn(t){return t<n?0:t-1>>>e<<e}var dn,vn=function(t){function e(t){return null===t||void 0===t?mn():ut(t)?t:mn().withMutations(function(e){var n=E(t);Yt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):mn()},e.prototype.set=function(t,e){return gn(this,t,e)},e.prototype.remove=function(t){return gn(this,t,i)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?yn(e,n,t,this.__hash):0===this.size?mn():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(Pe);function yn(t,e,n,r){var i=Object.create(vn.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function mn(){return dn||(dn=yn(Ke(),un()))}function gn(t,e,r){var o,a,s=t._map,u=t._list,c=s.get(e),f=void 0!==c;if(r===i){if(!f)return t;u.size>=n&&u.size>=2*s.size?(a=u.filter(function(t,e){return void 0!==t&&c!==e}),o=a.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=a.__ownerID=t.__ownerID)):(o=s.remove(e),a=c===u.size-1?u.pop():u.set(c,void 0))}else if(f){if(r===u.get(c)[1])return t;o=s,a=u.set(c,[e,r])}else o=s.set(e,u.size),a=u.set(u.size,[e,r]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=a,t.__hash=void 0,t):yn(o,a)}vn.isOrderedMap=ut,vn.prototype[R]=!0,vn.prototype.delete=vn.prototype.remove;var bn="@@__IMMUTABLE_STACK__@@";function wn(t){return Boolean(t&&t[bn])}var _n=function(t){function e(t){return null===t||void 0===t?xn():wn(t)?t:xn().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=u(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Tn(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&wn(e))return e;Yt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Tn(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):xn()},e.prototype.slice=function(e,n){if(f(e,n,this.size))return this;var r=l(e,this.size),i=h(n,this.size);if(i!==this.size)return t.prototype.slice.call(this,e,n);for(var o=this.size-r,a=this._head;r--;)a=a.next;return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):Tn(o,a)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Tn(this.size,this._head,t,this.__hash):0===this.size?xn():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new Q(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,this);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new Q(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new z(function(){if(r){var e=r.value;return r=r.next,B(t,n++,e)}return{value:void 0,done:!0}})},e}(T);_n.isStack=wn;var Sn,En=_n.prototype;function Tn(t,e,n,r){var i=Object.create(En);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function xn(){return Sn||(Sn=Tn(0))}En[bn]=!0,En.shift=En.pop,En.unshift=En.push,En.unshiftAll=En.pushAll,En.withMutations=Ie,En.wasAltered=Me,En.asImmutable=Ae,En["@@transducer/init"]=En.asMutable=ke,En["@@transducer/step"]=function(t,e){return t.unshift(e)},En["@@transducer/result"]=function(t){return t.asImmutable()};var In="@@__IMMUTABLE_SET__@@";function kn(t){return Boolean(t&&t[In])}function An(t){return kn(t)&&O(t)}function Mn(t,e){if(t===e)return!0;if(!y(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||g(t)!==g(e)||w(t)!==w(e)||O(t)!==O(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!_(t);if(O(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&ft(i[1],t)&&(n||ft(i[0],e))})&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"===typeof t.cacheResult&&t.cacheResult();else{o=!0;var a=t;t=e,e=a}var s=!0,u=e.__iterate(function(e,r){if(n?!t.has(e):o?!ft(e,t.get(r,i)):!ft(t.get(r,i),e))return s=!1,!1});return s&&t.size===u}function Pn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Rn(t){if(!t||"object"!==typeof t)return t;if(!y(t)){if(!Qt(t))return t;t=X(t)}if(g(t)){var e={};return t.__iterate(function(t,n){e[n]=Rn(t)}),e}var n=[];return t.__iterate(function(t){n.push(Rn(t))}),n}var On=function(t){function e(e){return null===e||void 0===e?Ln():kn(e)&&!O(e)?e:Ln().withMutations(function(n){var r=t(e);Yt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.intersect=function(t){return(t=S(t).toArray()).length?Nn.intersect.apply(e(t.pop()),t):Ln()},e.union=function(t){return(t=S(t).toArray()).length?Nn.union.apply(e(t.pop()),t):Ln()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Dn(this,this._map.set(t,t))},e.prototype.remove=function(t){return Dn(this,this._map.remove(t))},e.prototype.clear=function(){return Dn(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],i=[];return this.forEach(function(o){var a=t.call(e,o,o,n);a!==o&&(r.push(o),i.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),i.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return er(Lt(this,t))},e.prototype.sortBy=function(t,e){return er(Lt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(x);On.isSet=kn;var Cn,Nn=On.prototype;function Dn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function jn(t,e){var n=Object.create(Nn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ln(){return Cn||(Cn=jn(Ke()))}Nn[In]=!0,Nn.delete=Nn.remove,Nn.merge=Nn.concat=Nn.union,Nn.withMutations=Ie,Nn.asImmutable=Ae,Nn["@@transducer/init"]=Nn.asMutable=ke,Nn["@@transducer/step"]=function(t,e){return t.add(e)},Nn["@@transducer/result"]=function(t){return t.asImmutable()},Nn.__empty=Ln,Nn.__make=jn;var Un,zn=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Xt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Un)return Un;Un=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return f(t,n,this.size)?this:(t=l(t,this.size),(n=h(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;o!==n&&!1!==t(i,e?n-++o:o++,this);)i+=e?-r:r;return o},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new z(function(){if(o===n)return{value:void 0,done:!0};var a=i;return i+=e?-r:r,B(t,e?n-++o:o++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Mn(this,t)},e}($);function Bn(t,e,n){for(var r=$t(e),o=0;o!==r.length;)if((t=ee(t,r[o++],i))===i)return n;return t}function qn(t,e){return Bn(this,t,e)}function Kn(t,e){return Bn(t,e,i)!==i}function Fn(){Yt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}S.isIterable=y,S.isKeyed=g,S.isIndexed=w,S.isAssociative=_,S.isOrdered=O,S.Iterator=z,Pn(S,{toArray:function(){Yt(this.size);var t=new Array(this.size||0),e=g(this),n=0;return this.__iterate(function(r,i){t[n++]=e?[i,r]:r}),t},toIndexedSeq:function(){return new kt(this)},toJS:function(){return Rn(this)},toKeyedSeq:function(){return new It(this,!0)},toMap:function(){return Pe(this.toKeyedSeq())},toObject:Fn,toOrderedMap:function(){return vn(this.toKeyedSeq())},toOrderedSet:function(){return er(g(this)?this.valueSeq():this)},toSet:function(){return On(g(this)?this.valueSeq():this)},toSetSeq:function(){return new At(this)},toSeq:function(){return w(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _n(g(this)?this.valueSeq():this)},toList:function(){return tn(g(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return qt(this,function(t,e){var n=g(t),r=[t].concat(e).map(function(t){return y(t)?n&&(t=E(t)):t=n?rt(t):it(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&g(i)||w(t)&&w(i))return i}var o=new Q(r);return n?o=o.toKeyedSeq():w(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}(this,t))},includes:function(t){return this.some(function(e){return ft(e,t)})},entries:function(){return this.__iterator(D)},every:function(t,e){Yt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return qt(this,Ct(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Yt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Yt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(C)},map:function(t,e){return qt(this,Rt(this,t,e))},reduce:function(t,e,n){return Wn(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Wn(this,t,e,n,arguments.length<2,!0)},reverse:function(){return qt(this,Ot(this,!0))},slice:function(t,e){return qt(this,Nt(this,t,e,!0))},some:function(t,e){return!this.every($n(t),e)},sort:function(t){return qt(this,Lt(this,t))},values:function(){return this.__iterator(N)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return s(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=Pe().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return Mn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Q(t._cache);var e=t.toSeq().map(Yn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($n(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(c,null,t)},flatMap:function(t,e){return qt(this,function(t,e,n){var r=Ft(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return qt(this,jt(this,t,!0))},fromEntrySeq:function(){return new Mt(this)},get:function(t,e){return this.find(function(e,n){return ft(n,t)},void 0,e)},getIn:qn,groupBy:function(t,e){return function(t,e,n){var r=g(t),i=(O(t)?vn():Pe()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return(t=t||[]).push(r?[a,o]:o),t})});var o=Ft(t);return i.map(function(e){return qt(t,o(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,i)!==i},hasIn:function(t){return Kn(this,t)},isSubset:function(t){return t="function"===typeof t.includes?t:S(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"===typeof t.isSubset?t:S(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return ft(e,t)})},keySeq:function(){return this.toSeq().map(Xn).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ut(this,t)},maxBy:function(t,e){return Ut(this,e,t)},min:function(t){return Ut(this,t?Jn(t):Zn)},minBy:function(t,e){return Ut(this,e?Jn(e):Zn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return qt(this,Dt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($n(t),e)},sortBy:function(t,e){return qt(this,Lt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return qt(this,function(t,e,n){var r=Vt(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(D,i),s=!0;return new z(function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===D?t:B(r,u,c,t):(s=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile($n(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=O(t),n=g(t),r=e?1:0;return function(t,e){return e=lt(e,3432918353),e=lt(e<<15|e>>>-15,461845907),e=lt(e<<13|e>>>-13,5),e=lt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=ht((e=lt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+tr(dt(t),dt(e))|0}:function(t,e){r=r+tr(dt(t),dt(e))|0}:e?function(t){r=31*r+dt(t)|0}:function(t){r=r+dt(t)|0}),r)}(this))}});var Vn=S.prototype;Vn[v]=!0,Vn[U]=Vn.values,Vn.toJSON=Vn.toArray,Vn.__toStringMapper=Zt,Vn.inspect=Vn.toSource=function(){return this.toString()},Vn.chain=Vn.flatMap,Vn.contains=Vn.includes,Pn(E,{flip:function(){return qt(this,Pt(this))},mapEntries:function(t,e){var n=this,r=0;return qt(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return qt(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Hn=E.prototype;Hn[m]=!0,Hn[U]=Vn.entries,Hn.toJSON=Fn,Hn.__toStringMapper=function(t,e){return Zt(e)+": "+Zt(t)},Pn(T,{toKeyedSeq:function(){return new It(this,!1)},filter:function(t,e){return qt(this,Ct(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return qt(this,Ot(this,!1))},slice:function(t,e){return qt(this,Nt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=l(t,t<0?this.count():this.size);var r=this.slice(0,t);return qt(this,1===n?r:r.concat(Wt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return qt(this,jt(this,t,!1))},get:function(t,e){return(t=u(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return qt(this,function(t,e){var n=Vt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(N,r),a=0;return new z(function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?B(n,a++,e):B(n,a++,i.value,i)})},n}(this,t))},interleave:function(){var t=[this].concat(Wt(arguments)),e=Bt(this.toSeq(),$.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),qt(this,n)},keySeq:function(){return zn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return qt(this,Dt(this,t,e,!1))},zip:function(){var t=[this].concat(Wt(arguments));return qt(this,Bt(this,Qn,t))},zipAll:function(){var t=[this].concat(Wt(arguments));return qt(this,Bt(this,Qn,t,!0))},zipWith:function(t){var e=Wt(arguments);return e[0]=this,qt(this,Bt(this,t,e))}});var Gn=T.prototype;function Wn(t,e,n,r,i,o){return Yt(t.size),t.__iterate(function(t,o,a){i?(i=!1,n=t):n=e.call(r,n,t,o,a)},o),n}function Xn(t,e){return e}function Yn(t,e){return[e,t]}function $n(t){return function(){return!t.apply(this,arguments)}}function Jn(t){return function(){return-t.apply(this,arguments)}}function Qn(){return Wt(arguments)}function Zn(t,e){return t<e?1:t>e?-1:0}function tr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Gn[b]=!0,Gn[R]=!0,Pn(x,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),x.prototype.has=Vn.includes,x.prototype.contains=x.prototype.includes,Pn(Y,E.prototype),Pn($,T.prototype),Pn(J,x.prototype);var er=function(t){function e(t){return null===t||void 0===t?or():An(t)?t:or().withMutations(function(e){var n=x(t);Yt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(On);er.isOrderedSet=An;var nr,rr=er.prototype;function ir(t,e){var n=Object.create(rr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function or(){return nr||(nr=ir(mn()))}rr[R]=!0,rr.zip=Gn.zip,rr.zipWith=Gn.zipWith,rr.__empty=or,rr.__make=ir;var ar=function(t,e){var n,r=function(o){var a=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t),u=i._indices={};i._name=e,i._keys=s,i._defaultValues=t;for(var c=0;c<s.length;c++){var f=s[c];u[f]=c,i[f]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+cr(this)+' with property "'+f+'" since that property name is part of the Record API.'):lr(i,f)}}this.__ownerID=void 0,this._values=tn().withMutations(function(t){t.setSize(a._keys.length),E(o).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},i=r.prototype=Object.create(sr);return i.constructor=r,e&&(r.displayName=e),r};ar.prototype.toString=function(){for(var t,e=cr(this)+" { ",n=this._keys,r=0,i=n.length;r!==i;r++)t=n[r],e+=(r?", ":"")+t+": "+Zt(this.get(t));return e+" }"},ar.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&fr(this).equals(fr(t))},ar.prototype.hashCode=function(){return fr(this).hashCode()},ar.prototype.has=function(t){return this._indices.hasOwnProperty(t)},ar.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},ar.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return ur(this,n)}return this},ar.prototype.remove=function(t){return this.set(t)},ar.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ur(this,t)},ar.prototype.wasAltered=function(){return this._values.wasAltered()},ar.prototype.toSeq=function(){return fr(this)},ar.prototype.toJS=function(){return Rn(this)},ar.prototype.entries=function(){return this.__iterator(D)},ar.prototype.__iterator=function(t,e){return fr(this).__iterator(t,e)},ar.prototype.__iterate=function(t,e){return fr(this).__iterate(t,e)},ar.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?ur(this,e,t):(this.__ownerID=t,this._values=e,this)},ar.isRecord=M,ar.getDescriptiveName=cr;var sr=ar.prototype;function ur(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function cr(t){return t.constructor.displayName||t.constructor.name||"Record"}function fr(t){return rt(t._keys.map(function(e){return[e,t.get(e)]}))}function lr(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Xt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}sr[A]=!0,sr.delete=sr.remove,sr.deleteIn=sr.removeIn=ce,sr.getIn=qn,sr.hasIn=Vn.hasIn,sr.merge=pe,sr.mergeWith=de,sr.mergeIn=Te,sr.mergeDeep=Se,sr.mergeDeepWith=Ee,sr.mergeDeepIn=xe,sr.setIn=se,sr.update=le,sr.updateIn=he,sr.withMutations=Ie,sr.asMutable=ke,sr.asImmutable=Ae,sr[U]=sr.entries,sr.toJSON=sr.toObject=Vn.toObject,sr.inspect=sr.toSource=function(){return this.toString()};var hr,pr=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(hr)return hr;hr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return ft(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return f(t,n,r)?this:new e(this._value,h(n,r)-l(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return ft(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return ft(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,i=0;return new z(function(){return i===r?{value:void 0,done:!0}:B(t,e?r-++i:i++,n._value)})},e.prototype.equals=function(t){return t instanceof e?ft(this._value,t._value):Mn(t)},e}($);function dr(t,e){return function t(e,n,r,i,o,a){var s=Array.isArray(r)?$:Jt(r)?Y:null;if(s){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),o&&""!==i&&o.push(i);var u=n.call(a,i,s(r).map(function(i,a){return t(e,n,i,a,o,r)}),o&&o.slice());return e.pop(),o&&o.pop(),u}return r}([],e||vr,t,"",e&&e.length>2?[]:void 0,{"":t})}function vr(t,e){return g(e)?e.toMap():e.toList()}var yr={version:"4.0.0-rc.11",Collection:S,Iterable:S,Seq:X,Map:Pe,OrderedMap:vn,List:tn,Stack:_n,Set:On,OrderedSet:er,Record:ar,Range:zn,Repeat:pr,is:ft,fromJS:dr,hash:dt,isImmutable:P,isCollection:y,isKeyed:g,isIndexed:w,isAssociative:_,isOrdered:O,isValueObject:ct,isSeq:k,isList:Ze,isMap:st,isOrderedMap:ut,isStack:wn,isSet:kn,isOrderedSet:An,isRecord:M,get:ee,getIn:Bn,has:te,hasIn:Kn,merge:ye,mergeDeep:ge,mergeWith:me,mergeDeepWith:be,remove:re,removeIn:ue,set:ie,setIn:ae,update:fe,updateIn:oe},mr=S;t.default=yr,t.version="4.0.0-rc.11",t.Collection=S,t.Iterable=mr,t.Seq=X,t.Map=Pe,t.OrderedMap=vn,t.List=tn,t.Stack=_n,t.Set=On,t.OrderedSet=er,t.Record=ar,t.Range=zn,t.Repeat=pr,t.is=ft,t.fromJS=dr,t.hash=dt,t.isImmutable=P,t.isCollection=y,t.isKeyed=g,t.isIndexed=w,t.isAssociative=_,t.isOrdered=O,t.isValueObject=ct,t.get=ee,t.getIn=Bn,t.has=te,t.hasIn=Kn,t.merge=ye,t.mergeDeep=ge,t.mergeWith=me,t.mergeDeepWith=be,t.remove=re,t.removeIn=ue,t.set=ie,t.setIn=ae,t.update=fe,t.updateIn=oe,Object.defineProperty(t,"__esModule",{value:!0})}(e)},a28fc3c963a1d4d1a2e5:function(t,e,n){"use strict";function r(t,e){return t===e}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var i=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=0,a=r.pop(),s=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(t){return"function"===typeof t})){var n=e.map(function(t){return typeof t}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}(r),u=t.apply(void 0,[function(){return o++,a.apply(null,arguments)}].concat(n)),c=t(function(){for(var t=[],e=s.length,n=0;n<e;n++)t.push(s[n].apply(null,arguments));return u.apply(null,t)});return c.resultFunc=a,c.dependencies=s,c.recomputations=function(){return o},c.resetRecomputations=function(){return o=0},c}}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return function(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!t(e[i],n[i]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}});function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if("object"!==typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var n=Object.keys(t);return e(n.map(function(e){return t[e]}),function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(t,e,r){return t[n[r]]=e,t},{})})}},adc20f99e57c573c589c:function(t,e,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),i=n.n(r),o=n("5ef9de3df8d92ea0e41c"),a=n.n(o),s=n("d7dd51e1bf6bfc2c9c3d"),u=n("f2873ecf7390fe7d7c89"),c=n.n(u),f=n("5fa3f8487e09c6182715"),l=n.n(f),h=n("f3b0ff1628e56352bcbf"),p=n.n(h),d=n("a1cf5d6fa4ed65a6ddd5"),v=n.n(d),y=n("6a4f9c383785f9168266"),m=n.n(y),g=n("cc13decd9f9c09598c2f"),b="@@saga-injector/daemon",w="@@saga-injector/once-till-unmount";function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach(function(e){E(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=["@@saga-injector/restart-on-remount",b,w],x=function(t){return m()(l()(t)&&!v()(t),"(app/utils...) injectSaga: Expected `key` to be a non empty string")},I=function(t){var e={saga:p.a,mode:function(t){return l()(t)&&T.includes(t)}};m()(c()(t,e),"(app/utils...) injectSaga: Expected a valid saga descriptor")};function k(t,e){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;e||Object(g.a)(t);var o=S({},r,{mode:r.mode||b}),a=o.saga,s=o.mode;x(n),I(o);var u=Reflect.has(t.injectedSagas,n);(!u||u&&s!==b&&s!==w)&&(t.injectedSagas[n]=S({},o,{task:t.runSaga(a,i)}))}}function A(t,e){return function(n){if(e||Object(g.a)(t),x(n),Reflect.has(t.injectedSagas,n)){var r=t.injectedSagas[n];r.mode&&r.mode!==b&&(r.task.cancel(),t.injectedSagas[n]="done")}}}function M(t){return Object(g.a)(t),{injectSaga:k(t,!0),ejectSaga:A(t,!0)}}function P(t){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return!e||"object"!==P(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(t){var e=t.key,n=t.saga,r=t.mode;return function(t){var o=function(o){function a(t,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=O(this,C(a).call(this,t,i))).injectors=M(i.store),o.injectors.injectSaga(e,{saga:n,mode:r},o.props),o}var s,u,c;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(a,i.a.Component),s=a,(u=[{key:"componentWillUnmount",value:function(){this.injectors.ejectSaga(e)}},{key:"render",value:function(){return i.a.createElement(t,this.props)}}])&&R(s.prototype,u),c&&R(s,c),a}();return D(o,"WrappedComponent",t),D(o,"contextType",s.ReactReduxContext),D(o,"displayName","withSaga(".concat(t.displayName||t.name||"Component",")")),a()(o,t)}}},cc13decd9f9c09598c2f:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("d3a850c4000d77bccc89"),i=n.n(r),o=n("f3b0ff1628e56352bcbf"),a=n.n(o),s=n("f2873ecf7390fe7d7c89"),u=n.n(s),c=n("6a4f9c383785f9168266"),f=n.n(c);function l(t){var e={dispatch:a.a,subscribe:a.a,getState:a.a,replaceReducer:a.a,runSaga:a.a,injectedReducers:i.a,injectedSagas:i.a};f()(u()(t,e),"(app/utils...) injectors: Expected a valid redux store")}},d95b0cf107403b178365:function(t,e,n){"use strict";var r=n("8af190b70a6bc55c6f1b"),i=n.n(r),o=n("5ef9de3df8d92ea0e41c"),a=n.n(o),s=n("d7dd51e1bf6bfc2c9c3d"),u=n("5fa3f8487e09c6182715"),c=n.n(u),f=n("f3b0ff1628e56352bcbf"),l=n.n(f),h=n("a1cf5d6fa4ed65a6ddd5"),p=n.n(h),d=n("6a4f9c383785f9168266"),v=n.n(d),y=n("cc13decd9f9c09598c2f"),m=n("491cc2e27aa2b4221847");function g(t,e){return function(n,r){e||Object(y.a)(t),v()(c()(n)&&!p()(n)&&l()(r),"(app/utils...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(t.injectedReducers,n)&&t.injectedReducers[n]===r||(t.injectedReducers[n]=r,t.replaceReducer(Object(m.a)(t.injectedReducers)))}}function b(t){return Object(y.a)(t),{injectReducer:g(t,!0)}}function w(t){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return!e||"object"!==w(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(t){var e=t.key,n=t.reducer;return function(t){var r=function(r){function o(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i=S(this,E(o).call(this,t,r)),b(r.store).injectReducer(e,n),i}var a,s,u;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(o,i.a.Component),a=o,(s=[{key:"render",value:function(){return i.a.createElement(t,this.props)}}])&&_(a.prototype,s),u&&_(a,u),o}();return x(r,"WrappedComponent",t),x(r,"contextType",s.ReactReduxContext),x(r,"displayName","withReducer(".concat(t.displayName||t.name||"Component",")")),a()(r,t)}}},f363639bc5c3c97af546:function(t,e,n){"use strict";function r(t){return 204===t.status||205===t.status?null:t.json()}function i(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function o(t,e){return fetch(t,e).then(i).then(r)}n.d(e,"a",function(){return o})}}]);